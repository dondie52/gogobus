import{u as e,a,r,l as s,b as t,c as n,j as i,S as o}from"./index-kWACVtAX.js";const l="_splashScreen_chkan_2",c="_splashContent_chkan_27",h="_logoContainer_chkan_37",g="_logoIcon_chkan_44",d="_logoText_chkan_61",u="_loadingIndicator_chkan_73",x="_loadingDots_chkan_80",f=["/onboarding","/get-started","/dashboard","/profile"],_=()=>{const _=e(),{user:m,loading:p,userProfile:w}=a(),[j,b]=r.useState(!1),[v,k]=r.useState(!1),[S]=r.useState(()=>Date.now()),y=r.useRef(!1),N=r.useCallback(()=>{try{const e=window.location.hash.substring(1);return new URLSearchParams(e)}catch(e){return s("Error parsing hash parameters",e),new URLSearchParams}},[]),E=r.useCallback(()=>{const e=N(),a=e.get("access_token"),r=e.get("type");return!(!a||"email"!==r&&"signup"!==r)},[N]),C=r.useCallback(()=>{try{const e="true"===localStorage.getItem("gogobus_onboarding_complete"),a=localStorage.getItem("gogobus_last_screen");return e?"/get-started":a&&f.includes(`/${a}`)?`/${a}`:"/onboarding"}catch(e){return s("Error accessing localStorage",e),"/onboarding"}},[]),A=r.useCallback(()=>{if(!j)try{if(E())return void t("Email verification still in progress, skipping navigation");const e=C();b(!0),t(`Navigating to: ${e}`),_(e,{replace:!0})}catch(e){n("Navigation error",e),_("/onboarding",{replace:!0})}},[_,j,E,C]);return r.useEffect(()=>{E()&&k(!0)},[E]),r.useEffect(()=>{!v||p||y.current||m&&(y.current=!0,window.history.replaceState(null,"",window.location.pathname+window.location.search),(null==w?void 0:w.full_name)?_("/home",{replace:!0}):_("/complete-profile",{replace:!0}))},[v,m,p,w,_]),r.useEffect(()=>{if(v)return;if(E())return;if(p)return;const e=Date.now()-S,a=Math.max(0,o-e),r=setTimeout(()=>{A()},a);return()=>{clearTimeout(r)}},[A,E,v,p,S]),r.useEffect(()=>()=>{b(!1)},[]),i.jsx("div",{className:l,role:"main","aria-label":"GogoBus Loading Screen",children:i.jsxs("div",{className:c,children:[i.jsxs("div",{className:h,children:[i.jsx("div",{className:g,"aria-hidden":"true",children:i.jsxs("svg",{viewBox:"0 0 60 60",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-label":"GogoBus Logo",children:[i.jsx("rect",{x:"8",y:"20",width:"6",height:"25",rx:"3",fill:"#F5A623"}),i.jsx("rect",{x:"18",y:"12",width:"6",height:"33",rx:"3",fill:"#F5A623"}),i.jsx("rect",{x:"28",y:"8",width:"6",height:"37",rx:"3",fill:"#F5A623"}),i.jsx("rect",{x:"38",y:"15",width:"6",height:"30",rx:"3",fill:"#F5A623"}),i.jsx("rect",{x:"48",y:"22",width:"6",height:"23",rx:"3",fill:"#F5A623"})]})}),i.jsx("h1",{className:d,children:"GOGOBUS"})]}),i.jsx("div",{className:u,"aria-live":"polite",children:i.jsxs("div",{className:x,children:[i.jsx("span",{}),i.jsx("span",{}),i.jsx("span",{})]})})]})})};export{_ as default};
