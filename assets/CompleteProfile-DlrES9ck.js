import{u as e,a as s,r,c as n,j as o,L as t,p as l}from"./index-BscrYh5_.js";import{B as a}from"./Button-ClcLFMxb.js";import{A as i}from"./AvatarUpload-DpY9-FqD.js";const c="_completeProfileScreen_1n2fq_3",d="_backgroundDecoration_1n2fq_13",h="_decorCircle1_1n2fq_23",u="_decorCircle2_1n2fq_34",x="_decorCircle3_1n2fq_45",p="_completeProfileContainer_1n2fq_66",m="_loaded_1n2fq_80",_="_completeProfileHeader_1n2fq_86",j="_headerTop_1n2fq_91",f="_skipBtn_1n2fq_97",v="_headerIcon_1n2fq_114",g="_completeProfileTitle_1n2fq_140",k="_completeProfileSubtitle_1n2fq_148",C="_progressContainer_1n2fq_157",N="_progressBar_1n2fq_164",L="_progressFill_1n2fq_172",w="_progressText_1n2fq_179",q="_completeProfileForm_1n2fq_188",y="_errorMessage_1n2fq_195",M="_avatarSection_1n2fq_220",S="_avatarHint_1n2fq_228",B="_formSection_1n2fq_235",W="_sectionTitle_1n2fq_265",b="_inputGroup_1n2fq_281",P="_focused_1n2fq_288",V="_disabled_1n2fq_292",E="_inputLabel_1n2fq_296",$="_inputWrapper_1n2fq_304",F="_selectWrapper_1n2fq_305",H="_inputIcon_1n2fq_311",T="_input_1n2fq_281",A="_select_1n2fq_305",G="_checkIcon_1n2fq_347",I="_selectArrow_1n2fq_380",K="_submitButton_1n2fq_394",z="_buttonContent_1n2fq_424",D="_loadingState_1n2fq_431",Z="_footerInfo_1n2fq_439",O=["Central","Ghanzi","Kgalagadi","Kgatleng","Kweneng","North East","North West","South East","Southern"],U={Central:["Serowe","Mahalapye","Palapye","Tutume","Tonota"],Ghanzi:["Ghanzi"],Kgalagadi:["Tshabong"],Kgatleng:["Mochudi"],Kweneng:["Molepolole","Thamaga"],"North East":["Masunga"],"North West":["Maun","Gumare","Shakawe"],"South East":["Ramotswa"],Southern:["Kanye","Moshupa","Jwaneng"]},J=()=>{const J=e(),{user:Y}=s(),[R,Q]=r.useState(""),[X,ee]=r.useState(""),[se,re]=r.useState(""),[ne,oe]=r.useState(""),[te,le]=r.useState(""),[ae,ie]=r.useState(null),[ce,de]=r.useState(!1),[he,ue]=r.useState(""),[xe,pe]=r.useState(!1),[me,_e]=r.useState(null),[je,fe]=r.useState(0);r.useEffect(()=>{const e=setTimeout(()=>pe(!0),100);return()=>clearTimeout(e)},[]),r.useEffect(()=>{let e=0;ae&&(e+=20),R.length>=2&&(e+=20),X&&(e+=20),se&&(e+=15),ne&&(e+=12.5),te&&(e+=12.5),fe(e)},[ae,R,X,se,ne,te]),r.useEffect(()=>{const e=localStorage.getItem("gogobus_signupData");if(e)try{const s=JSON.parse(e);s.fullName&&Q(s.fullName),s.email&&ee(s.email),s.phone&&re(s.phone)}catch(s){n("Error parsing signup data",s)}(null==Y?void 0:Y.email)&&ee(Y.email)},[Y]);const ve=ne&&U[ne]||[];return o.jsxs("div",{className:c,children:[o.jsxs("div",{className:d,children:[o.jsx("div",{className:h}),o.jsx("div",{className:u}),o.jsx("div",{className:x})]}),o.jsxs("div",{className:`${p} ${xe?m:""}`,children:[o.jsxs("div",{className:_,children:[o.jsx("div",{className:j,children:o.jsx("button",{className:f,onClick:()=>J("/home"),type:"button",children:"Skip for now"})}),o.jsx("div",{className:v,children:o.jsxs("svg",{viewBox:"0 0 80 80",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[o.jsx("circle",{cx:"40",cy:"40",r:"36",fill:"rgba(245, 166, 35, 0.15)"}),o.jsx("circle",{cx:"40",cy:"30",r:"12",fill:"#F5A623"}),o.jsx("path",{d:"M20 58C20 48 28 42 40 42C52 42 60 48 60 58",stroke:"#F5A623",strokeWidth:"4",strokeLinecap:"round"}),o.jsx("circle",{cx:"54",cy:"54",r:"10",fill:"#1B4D4A"}),o.jsx("path",{d:"M50 54L53 57L58 51",stroke:"white",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})}),o.jsx("h1",{className:g,children:"Complete Your Profile"}),o.jsx("p",{className:k,children:"Add your details to personalize your GOGOBUS experience"}),o.jsxs("div",{className:C,children:[o.jsx("div",{className:N,children:o.jsx("div",{className:L,style:{width:`${je}%`}})}),o.jsxs("span",{className:w,children:[Math.round(je),"% Complete"]})]})]}),o.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),ue(""),R.length<2)ue("Please enter your full name");else if(ne)if(te){de(!0);try{if(!(null==Y?void 0:Y.id))throw new Error("User not authenticated");let e=null;ae&&(e=await l.uploadAvatar(Y.id,ae)),await l.updateProfile(Y.id,{full_name:R,email:X,phone:se,province:ne,city:te,avatar_url:e}),localStorage.removeItem("gogobus_signupData"),J("/home")}catch(s){ue(s.message||"Failed to complete profile. Please try again.")}finally{de(!1)}}else ue("Please select your city");else ue("Please select your province")},className:q,children:[he&&o.jsxs("div",{className:y,children:[o.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",children:[o.jsx("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"2"}),o.jsx("path",{d:"M12 8V12M12 16H12.01",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})]}),o.jsx("span",{children:he})]}),o.jsxs("div",{className:M,children:[o.jsx(i,{onAvatarChange:ie}),o.jsx("p",{className:S,children:"Tap to add a profile photo"})]}),o.jsxs("div",{className:B,children:[o.jsxs("h3",{className:W,children:[o.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",children:[o.jsx("path",{d:"M20 21V19C20 16.79 18.21 15 16 15H8C5.79 15 4 16.79 4 19V21",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"}),o.jsx("circle",{cx:"12",cy:"7",r:"4",stroke:"currentColor",strokeWidth:"2"})]}),"Personal Information"]}),o.jsxs("div",{className:`${b} ${"fullName"===me?P:""}`,children:[o.jsx("label",{className:E,children:"Full Name"}),o.jsxs("div",{className:$,children:[o.jsxs("svg",{className:H,width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",children:[o.jsx("path",{d:"M20 21V19C20 16.79 18.21 15 16 15H8C5.79 15 4 16.79 4 19V21",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"}),o.jsx("circle",{cx:"12",cy:"7",r:"4",stroke:"currentColor",strokeWidth:"2"})]}),o.jsx("input",{type:"text",value:R,onChange:e=>Q(e.target.value),onFocus:()=>_e("fullName"),onBlur:()=>_e(null),placeholder:"Enter your full name",className:T,required:!0}),R.length>=2&&o.jsx("svg",{className:G,width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",children:o.jsx("path",{d:"M20 6L9 17L4 12",stroke:"#22C55E",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})]})]}),o.jsxs("div",{className:`${b} ${"email"===me?P:""}`,children:[o.jsx("label",{className:E,children:"Email Address"}),o.jsxs("div",{className:$,children:[o.jsxs("svg",{className:H,width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",children:[o.jsx("path",{d:"M4 4H20C21.1 4 22 4.9 22 6V18C22 19.1 21.1 20 20 20H4C2.9 20 2 19.1 2 18V6C2 4.9 2.9 4 4 4Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"}),o.jsx("path",{d:"M22 6L12 13L2 6",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})]}),o.jsx("input",{type:"email",value:X,onChange:e=>ee(e.target.value),onFocus:()=>_e("email"),onBlur:()=>_e(null),placeholder:"yourname@example.com",className:T,required:!0}),X&&o.jsx("svg",{className:G,width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",children:o.jsx("path",{d:"M20 6L9 17L4 12",stroke:"#22C55E",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})]})]}),o.jsxs("div",{className:`${b} ${"phone"===me?P:""}`,children:[o.jsx("label",{className:E,children:"Phone Number"}),o.jsxs("div",{className:$,children:[o.jsx("svg",{className:H,width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",children:o.jsx("path",{d:"M22 16.92V19.92C22 20.48 21.56 20.93 21 20.98C20.61 21.01 20.21 21.03 19.81 21.03C10.84 21.03 3.47 13.66 3.47 4.69C3.47 4.29 3.49 3.89 3.52 3.5C3.57 2.94 4.02 2.5 4.58 2.5H7.58C8.06 2.5 8.48 2.85 8.56 3.32C8.67 4.01 8.86 4.68 9.13 5.31C9.27 5.63 9.19 6 8.93 6.26L7.66 7.53C9.06 10.08 11.14 12.16 13.69 13.56L14.96 12.29C15.22 12.03 15.59 11.95 15.91 12.09C16.54 12.36 17.21 12.55 17.9 12.66C18.37 12.74 18.72 13.16 18.72 13.64V16.64C18.72 17.2 18.28 17.65 17.72 17.7C17.33 17.73 16.93 17.75 16.53 17.75",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})}),o.jsx("input",{type:"tel",value:se,onChange:e=>re(e.target.value),onFocus:()=>_e("phone"),onBlur:()=>_e(null),placeholder:"+267 71 234 567",className:T,required:!0}),se&&o.jsx("svg",{className:G,width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",children:o.jsx("path",{d:"M20 6L9 17L4 12",stroke:"#22C55E",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})]})]})]}),o.jsxs("div",{className:B,children:[o.jsxs("h3",{className:W,children:[o.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",children:[o.jsx("path",{d:"M21 10C21 17 12 23 12 23C12 23 3 17 3 10C3 5.02944 7.02944 1 12 1C16.9706 1 21 5.02944 21 10Z",stroke:"currentColor",strokeWidth:"2"}),o.jsx("circle",{cx:"12",cy:"10",r:"3",stroke:"currentColor",strokeWidth:"2"})]}),"Location"]}),o.jsxs("div",{className:`${b} ${"province"===me?P:""}`,children:[o.jsx("label",{className:E,children:"Province"}),o.jsxs("div",{className:F,children:[o.jsxs("svg",{className:H,width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",children:[o.jsx("path",{d:"M3 7L9 4L15 7L21 4V17L15 20L9 17L3 20V7Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M9 4V17M15 7V20",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})]}),o.jsxs("select",{value:ne,onChange:e=>{oe(e.target.value),le("")},onFocus:()=>_e("province"),onBlur:()=>_e(null),className:A,required:!0,children:[o.jsx("option",{value:"",children:"Select Province"}),O.map(e=>o.jsx("option",{value:e,children:e},e))]}),o.jsx("svg",{className:I,width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",children:o.jsx("path",{d:"M6 9L12 15L18 9",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})]})]}),o.jsxs("div",{className:`${b} ${"city"===me?P:""} ${ne?"":V}`,children:[o.jsx("label",{className:E,children:"City"}),o.jsxs("div",{className:F,children:[o.jsx("svg",{className:H,width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",children:o.jsx("path",{d:"M3 21H21M5 21V7L13 3V21M13 21V7L19 10V21",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),o.jsxs("select",{value:te,onChange:e=>le(e.target.value),onFocus:()=>_e("city"),onBlur:()=>_e(null),className:A,required:!0,disabled:!ne,children:[o.jsx("option",{value:"",children:ne?"Select City":"Select Province First"}),ve.map(e=>o.jsx("option",{value:e,children:e},e))]}),o.jsx("svg",{className:I,width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",children:o.jsx("path",{d:"M6 9L12 15L18 9",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})]})]})]}),o.jsx(a,{type:"submit",disabled:ce,className:K,children:ce?o.jsxs("span",{className:D,children:[o.jsx(t,{size:"small"}),o.jsx("span",{children:"Saving Profile..."})]}):o.jsxs("span",{className:z,children:["Complete Profile",o.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",children:o.jsx("path",{d:"M5 12H19M19 12L12 5M19 12L12 19",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})]})})]}),o.jsxs("div",{className:Z,children:[o.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",children:[o.jsx("path",{d:"M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z",stroke:"currentColor",strokeWidth:"2"}),o.jsx("path",{d:"M12 16V12M12 8H12.01",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})]}),o.jsx("span",{children:"Your information is secure and will only be used to enhance your experience"})]})]})]})};export{J as default};
