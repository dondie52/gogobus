import{j as e,u as s,a as r,r as t,v as a,f as i,L as o,d as n,h as l,i as c}from"./index-DawsuJNi.js";import{B as d}from"./Button-xkGq4ELw.js";import{s as h}from"./Auth.module-VA9ZlUWa.js";const u="_passwordStrength_6s0r5_1",x="_strengthBars_6s0r5_8",p="_bar_6s0r5_14",j="_active_6s0r5_22",m="_strengthLabel_6s0r5_26",g=({password:s})=>{const r=()=>{if(!s)return 0;let e=0;return s.length>=8&&e++,s.length>=12&&e++,/[a-z]/.test(s)&&/[A-Z]/.test(s)&&e++,/\d/.test(s)&&e++,/[^a-zA-Z\d]/.test(s)&&e++,Math.min(e,4)};if(!s)return null;const t=r(),a=(()=>{const e=r();return 0===e?"":e<=1?"Weak":e<=2?"Fair":e<=3?"Good":"Strong"})(),i=(()=>{const e=r();return e<=1?"#F44336":e<=2?"#FF9800":e<=3?"#FFC107":"#4CAF50"})();return e.jsxs("div",{className:u,children:[e.jsx("div",{className:x,children:[1,2,3,4].map(s=>e.jsx("div",{className:`${p} ${t>=s?j:""}`,style:t>=s?{backgroundColor:i}:{}},s))}),e.jsx("span",{className:m,style:{color:i},children:a})]})},k=()=>{const u=s(),{signup:x}=r(),[p,j]=t.useState(""),[m,k]=t.useState(""),[v,C]=t.useState("+267"),[f,w]=t.useState(""),[L,N]=t.useState(!1),[y,b]=t.useState(!1),[B,W]=t.useState(""),[S,M]=t.useState(!1),[$,_]=t.useState(null),[F,A]=t.useState(!1);t.useEffect(()=>{const e=setTimeout(()=>M(!0),100);return()=>clearTimeout(e)},[]);const P=m&&a(m),G=i(v),V=f.length>=8;return e.jsxs("div",{className:h.authScreen,children:[e.jsxs("div",{className:h.authHero,children:[e.jsx("div",{className:h.heroBackground,style:{backgroundImage:"url(https://images.unsplash.com/photo-1570125909232-eb263c188f7e?w=1200&q=80)"},children:e.jsx("div",{className:h.heroOverlay})}),e.jsxs("div",{className:h.heroContent,children:[e.jsx("button",{className:h.backBtn,onClick:()=>u("/get-started"),"aria-label":"Go back",children:e.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:e.jsx("path",{d:"M15 18L9 12L15 6",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),e.jsxs("div",{className:h.heroLogo,children:[e.jsxs("svg",{viewBox:"0 0 40 40",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("rect",{x:"4",y:"10",width:"32",height:"20",rx:"5",fill:"#F5A623"}),e.jsx("rect",{x:"7",y:"13",width:"8",height:"6",rx:"1.5",fill:"#1B4D4A"}),e.jsx("rect",{x:"17",y:"13",width:"8",height:"6",rx:"1.5",fill:"#1B4D4A"}),e.jsx("rect",{x:"27",y:"13",width:"6",height:"10",rx:"1.5",fill:"#87CEEB"}),e.jsx("circle",{cx:"12",cy:"30",r:"4",fill:"#333"}),e.jsx("circle",{cx:"28",cy:"30",r:"4",fill:"#333"}),e.jsx("circle",{cx:"12",cy:"30",r:"2",fill:"#666"}),e.jsx("circle",{cx:"28",cy:"30",r:"2",fill:"#666"})]}),e.jsx("span",{children:"GOGOBUS"})]}),e.jsxs("div",{className:h.heroText,children:[e.jsx("h1",{children:"Join GOGOBUS"}),e.jsx("p",{children:"Create an account to start your journey"})]})]})]}),e.jsxs("div",{className:`${h.authContainer} ${S?h.loaded:""}`,children:[e.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),W(""),l(p))if(a(m))if(i(v))if(f.length<8)W("Password must be at least 8 characters");else if(F){b(!0);try{const{user:e,session:s}=await x(m,f,{full_name:p,phone:v});c("email"),s&&e?(localStorage.setItem("gogobus_signupData",JSON.stringify({fullName:p,email:m,phone:v})),u("/complete-profile")):(localStorage.setItem("gogobus_signupData",JSON.stringify({fullName:p,email:m,phone:v})),u("/check-email",{state:{email:m}}))}catch(s){W(s.message||"Failed to create account. Please try again.")}finally{b(!1)}}else W("Please agree to the Terms of Service");else W("Please enter a valid phone number (e.g., +26771234567)");else W("Please enter a valid email");else W("Please enter your full name (at least 2 characters)")},className:h.authForm,children:[B&&e.jsxs("div",{className:h.errorMessage,children:[e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"2"}),e.jsx("path",{d:"M12 8V12M12 16H12.01",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})]}),B]}),e.jsxs("div",{className:`${h.inputGroup} ${"name"===$?h.focused:""} ${p.length>=2?h.valid:""}`,children:[e.jsxs("label",{className:h.inputLabel,children:[e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",children:[e.jsx("path",{d:"M20 21V19C20 17.9391 19.5786 16.9217 18.8284 16.1716C18.0783 15.4214 17.0609 15 16 15H8C6.93913 15 5.92172 15.4214 5.17157 16.1716C4.42143 16.9217 4 17.9391 4 19V21",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("circle",{cx:"12",cy:"7",r:"4",stroke:"currentColor",strokeWidth:"2"})]}),"Full Name"]}),e.jsxs("div",{className:h.inputWrapper,children:[e.jsx("input",{type:"text",value:p,onChange:e=>j(e.target.value),onFocus:()=>_("name"),onBlur:()=>_(null),placeholder:"Enter your full name",required:!0,className:h.input,autoComplete:"name"}),p.length>=2&&e.jsx("div",{className:h.validIcon,children:e.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",children:e.jsx("path",{d:"M20 6L9 17L4 12",stroke:"#22C55E",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"})})})]})]}),e.jsxs("div",{className:`${h.inputGroup} ${"email"===$?h.focused:""} ${P?h.valid:""}`,children:[e.jsxs("label",{className:h.inputLabel,children:[e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",children:[e.jsx("rect",{x:"2",y:"4",width:"20",height:"16",rx:"3",stroke:"currentColor",strokeWidth:"2"}),e.jsx("path",{d:"M2 7L12 13L22 7",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})]}),"Email Address"]}),e.jsxs("div",{className:h.inputWrapper,children:[e.jsx("input",{type:"email",value:m,onChange:e=>k(e.target.value),onFocus:()=>_("email"),onBlur:()=>_(null),placeholder:"yourname@example.com",required:!0,className:h.input,autoComplete:"email"}),P&&e.jsx("div",{className:h.validIcon,children:e.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",children:e.jsx("path",{d:"M20 6L9 17L4 12",stroke:"#22C55E",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"})})})]})]}),e.jsxs("div",{className:`${h.inputGroup} ${"phone"===$?h.focused:""} ${G?h.valid:""}`,children:[e.jsxs("label",{className:h.inputLabel,children:[e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",children:[e.jsx("path",{d:"M22 16.92V19.92C22 20.4704 21.5504 21 21 21H20C14.477 21 10 16.523 10 11V10C10 9.44957 10.5496 9 11.1 9H14.1C14.6504 9 15.1 9.44957 15.1 10C15.1 10.8267 15.2733 11.6133 15.6 12.32L14.8 13.12C14.4134 13.5066 14.4134 14.1334 14.8 14.52L16.48 16.2C16.8666 16.5866 17.4934 16.5866 17.88 16.2L18.68 15.4C19.3867 15.7267 20.1733 15.9 21 15.9C21.5504 15.9 22 16.3496 22 16.9V16.92Z",stroke:"currentColor",strokeWidth:"2"}),e.jsx("rect",{x:"3",y:"3",width:"14",height:"21",rx:"3",stroke:"currentColor",strokeWidth:"2"})]}),"Phone Number"]}),e.jsxs("div",{className:h.inputWrapper,children:[e.jsx("div",{className:h.phonePrefix,children:"ðŸ‡§ðŸ‡¼"}),e.jsx("input",{type:"tel",value:v,onChange:e=>C(e.target.value),onFocus:()=>_("phone"),onBlur:()=>_(null),placeholder:"+26771234567",required:!0,className:`${h.input} ${h.phoneInput}`,autoComplete:"tel"}),G&&e.jsx("div",{className:h.validIcon,children:e.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",children:e.jsx("path",{d:"M20 6L9 17L4 12",stroke:"#22C55E",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"})})})]}),e.jsx("span",{className:h.inputHint,children:"Botswana phone number (e.g., +26771234567)"})]}),e.jsxs("div",{className:`${h.inputGroup} ${"password"===$?h.focused:""} ${V?h.valid:""}`,children:[e.jsxs("label",{className:h.inputLabel,children:[e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",children:[e.jsx("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",stroke:"currentColor",strokeWidth:"2"}),e.jsx("path",{d:"M7 11V7C7 4.23858 9.23858 2 12 2C14.7614 2 17 4.23858 17 7V11",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"}),e.jsx("circle",{cx:"12",cy:"16",r:"1.5",fill:"currentColor"})]}),"Password"]}),e.jsxs("div",{className:h.inputWrapper,children:[e.jsx("input",{type:L?"text":"password",value:f,onChange:e=>w(e.target.value),onFocus:()=>_("password"),onBlur:()=>_(null),placeholder:"Create a strong password",required:!0,className:h.input,autoComplete:"new-password"}),e.jsx("button",{type:"button",className:h.togglePassword,onClick:()=>N(!L),"aria-label":L?"Hide password":"Show password",children:L?e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",children:[e.jsx("path",{d:"M17.94 17.94A10.07 10.07 0 0112 20C7 20 2.73 16.11 1 12C1.69 10.24 2.78 8.69 4.19 7.46M9.88 9.88A3 3 0 0014.12 14.12",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M1 1L23 23",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})]}):e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",children:[e.jsx("path",{d:"M1 12C2.73 7.61 7 4 12 4C17 4 21.27 7.61 23 12C21.27 16.39 17 20 12 20C7 20 2.73 16.39 1 12Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("circle",{cx:"12",cy:"12",r:"3",stroke:"currentColor",strokeWidth:"2"})]})})]}),e.jsx(g,{password:f})]}),e.jsx("div",{className:h.termsCheckbox,children:e.jsxs("label",{className:h.checkboxLabel,children:[e.jsx("input",{type:"checkbox",checked:F,onChange:e=>A(e.target.checked)}),e.jsx("span",{className:h.checkmark,children:e.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",children:e.jsx("path",{d:"M20 6L9 17L4 12",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round"})})}),e.jsxs("span",{className:h.termsText,children:["I agree to the ",e.jsx("a",{href:"/terms",children:"Terms of Service"})," and ",e.jsx("a",{href:"/privacy",children:"Privacy Policy"})]})]})}),e.jsx(d,{type:"submit",disabled:y,className:h.submitButton,children:y?e.jsxs("span",{className:h.loadingState,children:[e.jsx(o,{size:"small"}),e.jsx("span",{children:"Creating account..."})]}):e.jsxs("span",{className:h.buttonContent,children:[e.jsx("span",{children:"Create Account"}),e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",children:e.jsx("path",{d:"M5 12H19M19 12L12 5M19 12L12 19",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})]})})]}),e.jsx("div",{className:h.authFooter,children:e.jsxs("p",{children:["Already have an account? ",e.jsx(n,{to:"/login",children:"Sign In"})]})}),e.jsxs("div",{className:h.securityBadge,children:[e.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",children:[e.jsx("path",{d:"M12 22C12 22 20 18 20 12V5L12 2L4 5V12C4 18 12 22 12 22Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M9 12L11 14L15 10",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),e.jsx("span",{children:"Your data is protected"})]})]})]})};export{k as default};
