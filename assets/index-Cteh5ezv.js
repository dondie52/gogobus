const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Splash-BX5zTE_j.js","assets/Splash-rJUKwLyI.css","assets/OnboardingFlow-DLvwFxlm.js","assets/Button-D7ec3YZm.js","assets/Button-CFVGQCE8.css","assets/OnboardingFlow-DsDNSi0M.css","assets/GetStarted-DYj5RXN5.js","assets/GetStarted-BdITqPoQ.css","assets/Login-Tk6dsqbx.js","assets/Auth.module-DvRfuExQ.js","assets/Auth-CClpMcLn.css","assets/SignUp-B_xOdtx2.js","assets/SignUp-BK1x0v1G.css","assets/OTPVerification-DM_OYab1.js","assets/Input-BXj31bvm.js","assets/Input-bwdu_EtS.css","assets/CheckEmail-CRhTtBfz.js","assets/CompleteProfile-JbFLT0N0.js","assets/AvatarUpload-2u9obOi4.js","assets/AvatarUpload-BGcvTQGt.css","assets/CompleteProfile-DcVfNhLG.css","assets/Home-D_KRin3q.js","assets/Home-BSvayFOV.css","assets/SearchResults-DTr-qLVq.js","assets/SearchResults-DCLdUG-2.css","assets/SeatSelection-D7DkY8bw.js","assets/SeatSelection-Bmrt4fVq.css","assets/PassengerDetails-CvRVvhjo.js","assets/Booking.module-aEmucKHr.js","assets/Booking-CRMfdv7Z.css","assets/PassengerDetails-ChuCW7-2.css","assets/BookingSummary-Bhha2e77.js","assets/BookingSummary-D4EqI9x4.css","assets/Payment-Dknwa44e.js","assets/paymentService-Ctfl_lFy.js","assets/emailService-Rf0gwwX7.js","assets/Payment-DRIqb4Nu.css","assets/PaymentConfirmation-DBNsYCN5.js","assets/PaymentConfirmation-BuK9W205.css","assets/BookingConfirmation-CvqlmfpR.js","assets/QRCodeDisplay-lGM-OQXY.js","assets/QRCodeDisplay-BZoSebYH.css","assets/MyTickets-BAMAr8B1.js","assets/MyTickets-DJCGJW7k.css","assets/TicketView-8XdcbdJf.js","assets/trackingService-Deqtew15.js","assets/trackingService-Bgvk0m8Q.css","assets/TicketView-Cnf-k-ad.css","assets/Tracking-O6rMIRcN.js","assets/Tracking-DA045kUk.css","assets/Profile-_i-WN252.js","assets/Profile-JqSaGtUN.css","assets/Help-B2-UFQGX.js","assets/Help-BM19ZUbJ.css","assets/Notifications-C4Bzw6dM.js","assets/Notifications-Cix_Gbya.css","assets/BecomePartner-j48vJ3oB.js","assets/BecomePartner-p_XTZVwq.css","assets/AdminDashboard-1G9hdBdo.js","assets/adminService-Ig-PB7Gc.js","assets/AdminDashboard-cOIuE03T.css","assets/QRScanner-Drs8bwsc.js","assets/QRScanner-C9iZ_uUW.css"])))=>i.map(i=>d[i]);
var e;function t(e,t){for(var n=0;n<t.length;n++){const r=t[n];if("string"!=typeof r&&!Array.isArray(r))for(const t in r)if("default"!==t&&!(t in e)){const n=Object.getOwnPropertyDescriptor(r,t);n&&Object.defineProperty(e,t,n.get?n:{enumerable:!0,get:()=>r[t]})}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function r(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var a={exports:{}},s={},i={exports:{}},o={},l=Symbol.for("react.element"),u=Symbol.for("react.portal"),c=Symbol.for("react.fragment"),d=Symbol.for("react.strict_mode"),h=Symbol.for("react.profiler"),f=Symbol.for("react.provider"),p=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),b=Symbol.iterator;var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_=Object.assign,S={};function k(e,t,n){this.props=e,this.context=t,this.refs=S,this.updater=n||w}function E(){}function T(e,t,n){this.props=e,this.context=t,this.refs=S,this.updater=n||w}k.prototype.isReactComponent={},k.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},k.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},E.prototype=k.prototype;var C=T.prototype=new E;C.constructor=T,_(C,k.prototype),C.isPureReactComponent=!0;var x=Array.isArray,O=Object.prototype.hasOwnProperty,I={current:null},P={key:!0,ref:!0,__self:!0,__source:!0};function j(e,t,n){var r,a={},s=null,i=null;if(null!=t)for(r in void 0!==t.ref&&(i=t.ref),void 0!==t.key&&(s=""+t.key),t)O.call(t,r)&&!P.hasOwnProperty(r)&&(a[r]=t[r]);var o=arguments.length-2;if(1===o)a.children=n;else if(1<o){for(var u=Array(o),c=0;c<o;c++)u[c]=arguments[c+2];a.children=u}if(e&&e.defaultProps)for(r in o=e.defaultProps)void 0===a[r]&&(a[r]=o[r]);return{$$typeof:l,type:e,key:s,ref:i,props:a,_owner:I.current}}function R(e){return"object"==typeof e&&null!==e&&e.$$typeof===l}var A=/\/+/g;function N(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function D(e,t,n,r,a){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var i=!1;if(null===e)i=!0;else switch(s){case"string":case"number":i=!0;break;case"object":switch(e.$$typeof){case l:case u:i=!0}}if(i)return a=a(i=e),e=""===r?"."+N(i,0):r,x(a)?(n="",null!=e&&(n=e.replace(A,"$&/")+"/"),D(a,t,n,"",function(e){return e})):null!=a&&(R(a)&&(a=function(e,t){return{$$typeof:l,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,n+(!a.key||i&&i.key===a.key?"":(""+a.key).replace(A,"$&/")+"/")+e)),t.push(a)),1;if(i=0,r=""===r?".":r+":",x(e))for(var o=0;o<e.length;o++){var c=r+N(s=e[o],o);i+=D(s,t,n,c,a)}else if(c=function(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=b&&e[b]||e["@@iterator"])?e:null}(e),"function"==typeof c)for(e=c.call(e),o=0;!(s=e.next()).done;)i+=D(s=s.value,t,n,c=r+N(s,o++),a);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return i}function $(e,t,n){if(null==e)return e;var r=[],a=0;return D(e,r,"","",function(e){return t.call(n,e,a++)}),r}function L(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var U={current:null},M={transition:null},B={ReactCurrentDispatcher:U,ReactCurrentBatchConfig:M,ReactCurrentOwner:I};function z(){throw Error("act(...) is not supported in production builds of React.")}o.Children={map:$,forEach:function(e,t,n){$(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return $(e,function(){t++}),t},toArray:function(e){return $(e,function(e){return e})||[]},only:function(e){if(!R(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},o.Component=k,o.Fragment=c,o.Profiler=h,o.PureComponent=T,o.StrictMode=d,o.Suspense=g,o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=B,o.act=z,o.cloneElement=function(e,t,n){if(null==e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=_({},e.props),a=e.key,s=e.ref,i=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,i=I.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(u in t)O.call(t,u)&&!P.hasOwnProperty(u)&&(r[u]=void 0===t[u]&&void 0!==o?o[u]:t[u])}var u=arguments.length-2;if(1===u)r.children=n;else if(1<u){o=Array(u);for(var c=0;c<u;c++)o[c]=arguments[c+2];r.children=o}return{$$typeof:l,type:e.type,key:a,ref:s,props:r,_owner:i}},o.createContext=function(e){return(e={$$typeof:p,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:f,_context:e},e.Consumer=e},o.createElement=j,o.createFactory=function(e){var t=j.bind(null,e);return t.type=e,t},o.createRef=function(){return{current:null}},o.forwardRef=function(e){return{$$typeof:m,render:e}},o.isValidElement=R,o.lazy=function(e){return{$$typeof:v,_payload:{_status:-1,_result:e},_init:L}},o.memo=function(e,t){return{$$typeof:y,type:e,compare:void 0===t?null:t}},o.startTransition=function(e){var t=M.transition;M.transition={};try{e()}finally{M.transition=t}},o.unstable_act=z,o.useCallback=function(e,t){return U.current.useCallback(e,t)},o.useContext=function(e){return U.current.useContext(e)},o.useDebugValue=function(){},o.useDeferredValue=function(e){return U.current.useDeferredValue(e)},o.useEffect=function(e,t){return U.current.useEffect(e,t)},o.useId=function(){return U.current.useId()},o.useImperativeHandle=function(e,t,n){return U.current.useImperativeHandle(e,t,n)},o.useInsertionEffect=function(e,t){return U.current.useInsertionEffect(e,t)},o.useLayoutEffect=function(e,t){return U.current.useLayoutEffect(e,t)},o.useMemo=function(e,t){return U.current.useMemo(e,t)},o.useReducer=function(e,t,n){return U.current.useReducer(e,t,n)},o.useRef=function(e){return U.current.useRef(e)},o.useState=function(e){return U.current.useState(e)},o.useSyncExternalStore=function(e,t,n){return U.current.useSyncExternalStore(e,t,n)},o.useTransition=function(){return U.current.useTransition()},o.version="18.3.1",i.exports=o;var F=i.exports;const q=r(F),H=t({__proto__:null,default:q},[F]);
/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
var W=F,V=Symbol.for("react.element"),K=Symbol.for("react.fragment"),J=Object.prototype.hasOwnProperty,G=W.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Y={key:!0,ref:!0,__self:!0,__source:!0};function Q(e,t,n){var r,a={},s=null,i=null;for(r in void 0!==n&&(s=""+n),void 0!==t.key&&(s=""+t.key),void 0!==t.ref&&(i=t.ref),t)J.call(t,r)&&!Y.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:V,type:e,key:s,ref:i,props:a,_owner:G.current}}s.Fragment=K,s.jsx=Q,s.jsxs=Q,a.exports=s;var X=a.exports,Z={},ee={exports:{}},te={},ne={exports:{}},re={};
/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
!function(e){function t(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,s=e[r];if(!(0<a(s,t)))break e;e[r]=t,e[n]=s,n=r}}function n(e){return 0===e.length?null:e[0]}function r(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,s=e.length,i=s>>>1;r<i;){var o=2*(r+1)-1,l=e[o],u=o+1,c=e[u];if(0>a(l,n))u<s&&0>a(c,l)?(e[r]=c,e[u]=n,r=u):(e[r]=l,e[o]=n,r=o);else{if(!(u<s&&0>a(c,n)))break e;e[r]=c,e[u]=n,r=u}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"==typeof performance&&"function"==typeof performance.now){var s=performance;e.unstable_now=function(){return s.now()}}else{var i=Date,o=i.now();e.unstable_now=function(){return i.now()-o}}var l=[],u=[],c=1,d=null,h=3,f=!1,p=!1,m=!1,g="function"==typeof setTimeout?setTimeout:null,y="function"==typeof clearTimeout?clearTimeout:null,v="undefined"!=typeof setImmediate?setImmediate:null;function b(e){for(var a=n(u);null!==a;){if(null===a.callback)r(u);else{if(!(a.startTime<=e))break;r(u),a.sortIndex=a.expirationTime,t(l,a)}a=n(u)}}function w(e){if(m=!1,b(e),!p)if(null!==n(l))p=!0,R(_);else{var t=n(u);null!==t&&A(w,t.startTime-e)}}function _(t,a){p=!1,m&&(m=!1,y(T),T=-1),f=!0;var s=h;try{for(b(a),d=n(l);null!==d&&(!(d.expirationTime>a)||t&&!O());){var i=d.callback;if("function"==typeof i){d.callback=null,h=d.priorityLevel;var o=i(d.expirationTime<=a);a=e.unstable_now(),"function"==typeof o?d.callback=o:d===n(l)&&r(l),b(a)}else r(l);d=n(l)}if(null!==d)var c=!0;else{var g=n(u);null!==g&&A(w,g.startTime-a),c=!1}return c}finally{d=null,h=s,f=!1}}"undefined"!=typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var S,k=!1,E=null,T=-1,C=5,x=-1;function O(){return!(e.unstable_now()-x<C)}function I(){if(null!==E){var t=e.unstable_now();x=t;var n=!0;try{n=E(!0,t)}finally{n?S():(k=!1,E=null)}}else k=!1}if("function"==typeof v)S=function(){v(I)};else if("undefined"!=typeof MessageChannel){var P=new MessageChannel,j=P.port2;P.port1.onmessage=I,S=function(){j.postMessage(null)}}else S=function(){g(I,0)};function R(e){E=e,k||(k=!0,S())}function A(t,n){T=g(function(){t(e.unstable_now())},n)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(e){e.callback=null},e.unstable_continueExecution=function(){p||f||(p=!0,R(_))},e.unstable_forceFrameRate=function(e){0>e||125<e||(C=0<e?Math.floor(1e3/e):5)},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return n(l)},e.unstable_next=function(e){switch(h){case 1:case 2:case 3:var t=3;break;default:t=h}var n=h;h=t;try{return e()}finally{h=n}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=h;h=e;try{return t()}finally{h=n}},e.unstable_scheduleCallback=function(r,a,s){var i=e.unstable_now();switch("object"==typeof s&&null!==s?s="number"==typeof(s=s.delay)&&0<s?i+s:i:s=i,r){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return r={id:c++,callback:a,priorityLevel:r,startTime:s,expirationTime:o=s+o,sortIndex:-1},s>i?(r.sortIndex=s,t(u,r),null===n(l)&&r===n(u)&&(m?(y(T),T=-1):m=!0,A(w,s-i))):(r.sortIndex=o,t(l,r),p||f||(p=!0,R(_))),r},e.unstable_shouldYield=O,e.unstable_wrapCallback=function(e){var t=h;return function(){var n=h;h=t;try{return e.apply(this,arguments)}finally{h=n}}}}(re),ne.exports=re;var ae=ne.exports,se=F,ie=ae;
/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function oe(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var le=new Set,ue={};function ce(e,t){de(e,t),de(e+"Capture",t)}function de(e,t){for(ue[e]=t,e=0;e<t.length;e++)le.add(t[e])}var he=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),fe=Object.prototype.hasOwnProperty,pe=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,me={},ge={};function ye(e,t,n,r,a,s,i){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=i}var ve={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){ve[e]=new ye(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];ve[t]=new ye(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){ve[e]=new ye(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){ve[e]=new ye(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){ve[e]=new ye(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){ve[e]=new ye(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){ve[e]=new ye(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){ve[e]=new ye(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){ve[e]=new ye(e,5,!1,e.toLowerCase(),null,!1,!1)});var be=/[\-:]([a-z])/g;function we(e){return e[1].toUpperCase()}function _e(e,t,n,r){var a=ve.hasOwnProperty(t)?ve[t]:null;(null!==a?0!==a.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null==t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,a,r)&&(n=null),r||null===a?function(e){return!!fe.call(ge,e)||!fe.call(me,e)&&(pe.test(e)?ge[e]=!0:(me[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):a.mustUseProperty?e[a.propertyName]=null===n?3!==a.type&&"":n:(t=a.attributeName,r=a.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(a=a.type)||4===a&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(be,we);ve[t]=new ye(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(be,we);ve[t]=new ye(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(be,we);ve[t]=new ye(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){ve[e]=new ye(e,1,!1,e.toLowerCase(),null,!1,!1)}),ve.xlinkHref=new ye("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){ve[e]=new ye(e,1,!1,e.toLowerCase(),null,!0,!0)});var Se=se.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ke=Symbol.for("react.element"),Ee=Symbol.for("react.portal"),Te=Symbol.for("react.fragment"),Ce=Symbol.for("react.strict_mode"),xe=Symbol.for("react.profiler"),Oe=Symbol.for("react.provider"),Ie=Symbol.for("react.context"),Pe=Symbol.for("react.forward_ref"),je=Symbol.for("react.suspense"),Re=Symbol.for("react.suspense_list"),Ae=Symbol.for("react.memo"),Ne=Symbol.for("react.lazy"),De=Symbol.for("react.offscreen"),$e=Symbol.iterator;function Le(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=$e&&e[$e]||e["@@iterator"])?e:null}var Ue,Me=Object.assign;function Be(e){if(void 0===Ue)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Ue=t&&t[1]||""}return"\n"+Ue+e}var ze=!1;function Fe(e,t){if(!e||ze)return"";ze=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&"string"==typeof u.stack){for(var a=u.stack.split("\n"),s=r.stack.split("\n"),i=a.length-1,o=s.length-1;1<=i&&0<=o&&a[i]!==s[o];)o--;for(;1<=i&&0<=o;i--,o--)if(a[i]!==s[o]){if(1!==i||1!==o)do{if(i--,0>--o||a[i]!==s[o]){var l="\n"+a[i].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=i&&0<=o);break}}}finally{ze=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Be(e):""}function qe(e){switch(e.tag){case 5:return Be(e.type);case 16:return Be("Lazy");case 13:return Be("Suspense");case 19:return Be("SuspenseList");case 0:case 2:case 15:return e=Fe(e.type,!1);case 11:return e=Fe(e.type.render,!1);case 1:return e=Fe(e.type,!0);default:return""}}function He(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case Te:return"Fragment";case Ee:return"Portal";case xe:return"Profiler";case Ce:return"StrictMode";case je:return"Suspense";case Re:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case Ie:return(e.displayName||"Context")+".Consumer";case Oe:return(e._context.displayName||"Context")+".Provider";case Pe:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case Ae:return null!==(t=e.displayName||null)?t:He(e.type)||"Memo";case Ne:t=e._payload,e=e._init;try{return He(e(t))}catch(n){}}return null}function We(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return He(t);case 8:return t===Ce?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"==typeof t)return t.displayName||t.name||null;if("string"==typeof t)return t}return null}function Ve(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function Ke(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function Je(e){e._valueTracker||(e._valueTracker=function(e){var t=Ke(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var a=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(e){r=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function Ge(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Ke(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Ye(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Qe(e,t){var n=t.checked;return Me({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Xe(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=Ve(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Ze(e,t){null!=(t=t.checked)&&_e(e,"checked",t,!1)}function et(e,t){Ze(e,t);var n=Ve(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?nt(e,t.type,n):t.hasOwnProperty("defaultValue")&&nt(e,t.type,Ve(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function tt(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function nt(e,t,n){"number"===t&&Ye(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var rt=Array.isArray;function at(e,t,n,r){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Ve(n),t=null,a=0;a<e.length;a++){if(e[a].value===n)return e[a].selected=!0,void(r&&(e[a].defaultSelected=!0));null!==t||e[a].disabled||(t=e[a])}null!==t&&(t.selected=!0)}}function st(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(oe(91));return Me({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function it(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(oe(92));if(rt(n)){if(1<n.length)throw Error(oe(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:Ve(n)}}function ot(e,t){var n=Ve(t.value),r=Ve(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function lt(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ut(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ct(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ut(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var dt,ht,ft=(ht=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((dt=dt||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=dt.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction(function(){return ht(e,t)})}:ht);function pt(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var mt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},gt=["Webkit","ms","Moz","O"];function yt(e,t,n){return null==t||"boolean"==typeof t||""===t?"":n||"number"!=typeof t||0===t||mt.hasOwnProperty(e)&&mt[e]?(""+t).trim():t+"px"}function vt(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),a=yt(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,a):e[n]=a}}Object.keys(mt).forEach(function(e){gt.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),mt[t]=mt[e]})});var bt=Me({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function wt(e,t){if(t){if(bt[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(oe(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(oe(60));if("object"!=typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(oe(61))}if(null!=t.style&&"object"!=typeof t.style)throw Error(oe(62))}}function _t(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var St=null;function kt(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Et=null,Tt=null,Ct=null;function xt(e){if(e=_s(e)){if("function"!=typeof Et)throw Error(oe(280));var t=e.stateNode;t&&(t=ks(t),Et(e.stateNode,e.type,t))}}function Ot(e){Tt?Ct?Ct.push(e):Ct=[e]:Tt=e}function It(){if(Tt){var e=Tt,t=Ct;if(Ct=Tt=null,xt(e),t)for(e=0;e<t.length;e++)xt(t[e])}}function Pt(e,t){return e(t)}function jt(){}var Rt=!1;function At(e,t,n){if(Rt)return e(t,n);Rt=!0;try{return Pt(e,t,n)}finally{Rt=!1,(null!==Tt||null!==Ct)&&(jt(),It())}}function Nt(e,t){var n=e.stateNode;if(null===n)return null;var r=ks(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!=typeof n)throw Error(oe(231,t,typeof n));return n}var Dt=!1;if(he)try{var $t={};Object.defineProperty($t,"passive",{get:function(){Dt=!0}}),window.addEventListener("test",$t,$t),window.removeEventListener("test",$t,$t)}catch(ht){Dt=!1}function Lt(e,t,n,r,a,s,i,o,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(c){this.onError(c)}}var Ut=!1,Mt=null,Bt=!1,zt=null,Ft={onError:function(e){Ut=!0,Mt=e}};function qt(e,t,n,r,a,s,i,o,l){Ut=!1,Mt=null,Lt.apply(Ft,arguments)}function Ht(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{!!(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Wt(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Vt(e){if(Ht(e)!==e)throw Error(oe(188))}function Kt(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ht(e)))throw Error(oe(188));return t!==e?null:e}for(var n=e,r=t;;){var a=n.return;if(null===a)break;var s=a.alternate;if(null===s){if(null!==(r=a.return)){n=r;continue}break}if(a.child===s.child){for(s=a.child;s;){if(s===n)return Vt(a),e;if(s===r)return Vt(a),t;s=s.sibling}throw Error(oe(188))}if(n.return!==r.return)n=a,r=s;else{for(var i=!1,o=a.child;o;){if(o===n){i=!0,n=a,r=s;break}if(o===r){i=!0,r=a,n=s;break}o=o.sibling}if(!i){for(o=s.child;o;){if(o===n){i=!0,n=s,r=a;break}if(o===r){i=!0,r=s,n=a;break}o=o.sibling}if(!i)throw Error(oe(189))}}if(n.alternate!==r)throw Error(oe(190))}if(3!==n.tag)throw Error(oe(188));return n.stateNode.current===n?e:t}(e))?Jt(e):null}function Jt(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Jt(e);if(null!==t)return t;e=e.sibling}return null}var Gt=ie.unstable_scheduleCallback,Yt=ie.unstable_cancelCallback,Qt=ie.unstable_shouldYield,Xt=ie.unstable_requestPaint,Zt=ie.unstable_now,en=ie.unstable_getCurrentPriorityLevel,tn=ie.unstable_ImmediatePriority,nn=ie.unstable_UserBlockingPriority,rn=ie.unstable_NormalPriority,an=ie.unstable_LowPriority,sn=ie.unstable_IdlePriority,on=null,ln=null;var un=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(cn(e)/dn|0)|0},cn=Math.log,dn=Math.LN2;var hn=64,fn=4194304;function pn(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function mn(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,a=e.suspendedLanes,s=e.pingedLanes,i=268435455&n;if(0!==i){var o=i&~a;0!==o?r=pn(o):0!==(s&=i)&&(r=pn(s))}else 0!==(i=n&~a)?r=pn(i):0!==s&&(r=pn(s));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&a)&&((a=r&-r)>=(s=t&-t)||16===a&&4194240&s))return t;if(4&r&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)a=1<<(n=31-un(t)),r|=e[n],t&=~a;return r}function gn(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function yn(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function vn(){var e=hn;return!(4194240&(hn<<=1))&&(hn=64),e}function bn(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function wn(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-un(t)]=n}function _n(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-un(n),a=1<<r;a&t|e[r]&t&&(e[r]|=t),n&=~a}}var Sn=0;function kn(e){return 1<(e&=-e)?4<e?268435455&e?16:536870912:4:1}var En,Tn,Cn,xn,On,In=!1,Pn=[],jn=null,Rn=null,An=null,Nn=new Map,Dn=new Map,$n=[],Ln="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Un(e,t){switch(e){case"focusin":case"focusout":jn=null;break;case"dragenter":case"dragleave":Rn=null;break;case"mouseover":case"mouseout":An=null;break;case"pointerover":case"pointerout":Nn.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Dn.delete(t.pointerId)}}function Mn(e,t,n,r,a,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[a]},null!==t&&(null!==(t=_s(t))&&Tn(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==a&&-1===t.indexOf(a)&&t.push(a),e)}function Bn(e){var t=ws(e.target);if(null!==t){var n=Ht(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Wt(n)))return e.blockedOn=t,void On(e.priority,function(){Cn(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function zn(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Xn(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=_s(n))&&Tn(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);St=r,n.target.dispatchEvent(r),St=null,t.shift()}return!0}function Fn(e,t,n){zn(e)&&n.delete(t)}function qn(){In=!1,null!==jn&&zn(jn)&&(jn=null),null!==Rn&&zn(Rn)&&(Rn=null),null!==An&&zn(An)&&(An=null),Nn.forEach(Fn),Dn.forEach(Fn)}function Hn(e,t){e.blockedOn===t&&(e.blockedOn=null,In||(In=!0,ie.unstable_scheduleCallback(ie.unstable_NormalPriority,qn)))}function Wn(e){function t(t){return Hn(t,e)}if(0<Pn.length){Hn(Pn[0],e);for(var n=1;n<Pn.length;n++){var r=Pn[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==jn&&Hn(jn,e),null!==Rn&&Hn(Rn,e),null!==An&&Hn(An,e),Nn.forEach(t),Dn.forEach(t),n=0;n<$n.length;n++)(r=$n[n]).blockedOn===e&&(r.blockedOn=null);for(;0<$n.length&&null===(n=$n[0]).blockedOn;)Bn(n),null===n.blockedOn&&$n.shift()}var Vn=Se.ReactCurrentBatchConfig,Kn=!0;function Jn(e,t,n,r){var a=Sn,s=Vn.transition;Vn.transition=null;try{Sn=1,Yn(e,t,n,r)}finally{Sn=a,Vn.transition=s}}function Gn(e,t,n,r){var a=Sn,s=Vn.transition;Vn.transition=null;try{Sn=4,Yn(e,t,n,r)}finally{Sn=a,Vn.transition=s}}function Yn(e,t,n,r){if(Kn){var a=Xn(e,t,n,r);if(null===a)Va(e,t,r,Qn,n),Un(e,r);else if(function(e,t,n,r,a){switch(t){case"focusin":return jn=Mn(jn,e,t,n,r,a),!0;case"dragenter":return Rn=Mn(Rn,e,t,n,r,a),!0;case"mouseover":return An=Mn(An,e,t,n,r,a),!0;case"pointerover":var s=a.pointerId;return Nn.set(s,Mn(Nn.get(s)||null,e,t,n,r,a)),!0;case"gotpointercapture":return s=a.pointerId,Dn.set(s,Mn(Dn.get(s)||null,e,t,n,r,a)),!0}return!1}(a,e,t,n,r))r.stopPropagation();else if(Un(e,r),4&t&&-1<Ln.indexOf(e)){for(;null!==a;){var s=_s(a);if(null!==s&&En(s),null===(s=Xn(e,t,n,r))&&Va(e,t,r,Qn,n),s===a)break;a=s}null!==a&&r.stopPropagation()}else Va(e,t,r,null,n)}}var Qn=null;function Xn(e,t,n,r){if(Qn=null,null!==(e=ws(e=kt(r))))if(null===(t=Ht(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Wt(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qn=e,null}function Zn(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(en()){case tn:return 1;case nn:return 4;case rn:case an:return 16;case sn:return 536870912;default:return 16}default:return 16}}var er=null,tr=null,nr=null;function rr(){if(nr)return nr;var e,t,n=tr,r=n.length,a="value"in er?er.value:er.textContent,s=a.length;for(e=0;e<r&&n[e]===a[e];e++);var i=r-e;for(t=1;t<=i&&n[r-t]===a[s-t];t++);return nr=a.slice(e,1<t?1-t:void 0)}function ar(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function sr(){return!0}function ir(){return!1}function or(e){function t(t,n,r,a,s){for(var i in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=a,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(i)&&(t=e[i],this[i]=t?t(a):a[i]);return this.isDefaultPrevented=(null!=a.defaultPrevented?a.defaultPrevented:!1===a.returnValue)?sr:ir,this.isPropagationStopped=ir,this}return Me(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=sr)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=sr)},persist:function(){},isPersistent:sr}),t}var lr,ur,cr,dr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},hr=or(dr),fr=Me({},dr,{view:0,detail:0}),pr=or(fr),mr=Me({},fr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:xr,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==cr&&(cr&&"mousemove"===e.type?(lr=e.screenX-cr.screenX,ur=e.screenY-cr.screenY):ur=lr=0,cr=e),lr)},movementY:function(e){return"movementY"in e?e.movementY:ur}}),gr=or(mr),yr=or(Me({},mr,{dataTransfer:0})),vr=or(Me({},fr,{relatedTarget:0})),br=or(Me({},dr,{animationName:0,elapsedTime:0,pseudoElement:0})),wr=Me({},dr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),_r=or(wr),Sr=or(Me({},dr,{data:0})),kr={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Er={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Tr={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Cr(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Tr[e])&&!!t[e]}function xr(){return Cr}var Or=Me({},fr,{key:function(e){if(e.key){var t=kr[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=ar(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Er[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:xr,charCode:function(e){return"keypress"===e.type?ar(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?ar(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Ir=or(Or),Pr=or(Me({},mr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),jr=or(Me({},fr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:xr})),Rr=or(Me({},dr,{propertyName:0,elapsedTime:0,pseudoElement:0})),Ar=Me({},mr,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Nr=or(Ar),Dr=[9,13,27,32],$r=he&&"CompositionEvent"in window,Lr=null;he&&"documentMode"in document&&(Lr=document.documentMode);var Ur=he&&"TextEvent"in window&&!Lr,Mr=he&&(!$r||Lr&&8<Lr&&11>=Lr),Br=String.fromCharCode(32),zr=!1;function Fr(e,t){switch(e){case"keyup":return-1!==Dr.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function qr(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var Hr=!1;var Wr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Vr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Wr[e.type]:"textarea"===t}function Kr(e,t,n,r){Ot(r),0<(t=Ja(t,"onChange")).length&&(n=new hr("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Jr=null,Gr=null;function Yr(e){Ba(e,0)}function Qr(e){if(Ge(Ss(e)))return e}function Xr(e,t){if("change"===e)return t}var Zr=!1;if(he){var ea;if(he){var ta="oninput"in document;if(!ta){var na=document.createElement("div");na.setAttribute("oninput","return;"),ta="function"==typeof na.oninput}ea=ta}else ea=!1;Zr=ea&&(!document.documentMode||9<document.documentMode)}function ra(){Jr&&(Jr.detachEvent("onpropertychange",aa),Gr=Jr=null)}function aa(e){if("value"===e.propertyName&&Qr(Gr)){var t=[];Kr(t,Gr,e,kt(e)),At(Yr,t)}}function sa(e,t,n){"focusin"===e?(ra(),Gr=n,(Jr=t).attachEvent("onpropertychange",aa)):"focusout"===e&&ra()}function ia(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Qr(Gr)}function oa(e,t){if("click"===e)return Qr(t)}function la(e,t){if("input"===e||"change"===e)return Qr(t)}var ua="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t};function ca(e,t){if(ua(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var a=n[r];if(!fe.call(t,a)||!ua(e[a],t[a]))return!1}return!0}function da(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ha(e,t){var n,r=da(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=da(r)}}function fa(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?fa(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function pa(){for(var e=window,t=Ye();t instanceof e.HTMLIFrameElement;){try{var n="string"==typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Ye((e=t.contentWindow).document)}return t}function ma(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function ga(e){var t=pa(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&fa(n.ownerDocument.documentElement,n)){if(null!==r&&ma(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var a=n.textContent.length,s=Math.min(r.start,a);r=void 0===r.end?s:Math.min(r.end,a),!e.extend&&s>r&&(a=r,r=s,s=a),a=ha(n,s);var i=ha(n,r);a&&i&&(1!==e.rangeCount||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&((t=t.createRange()).setStart(a.node,a.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"==typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var ya=he&&"documentMode"in document&&11>=document.documentMode,va=null,ba=null,wa=null,_a=!1;function Sa(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;_a||null==va||va!==Ye(r)||("selectionStart"in(r=va)&&ma(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},wa&&ca(wa,r)||(wa=r,0<(r=Ja(ba,"onSelect")).length&&(t=new hr("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=va)))}function ka(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Ea={animationend:ka("Animation","AnimationEnd"),animationiteration:ka("Animation","AnimationIteration"),animationstart:ka("Animation","AnimationStart"),transitionend:ka("Transition","TransitionEnd")},Ta={},Ca={};function xa(e){if(Ta[e])return Ta[e];if(!Ea[e])return e;var t,n=Ea[e];for(t in n)if(n.hasOwnProperty(t)&&t in Ca)return Ta[e]=n[t];return e}he&&(Ca=document.createElement("div").style,"AnimationEvent"in window||(delete Ea.animationend.animation,delete Ea.animationiteration.animation,delete Ea.animationstart.animation),"TransitionEvent"in window||delete Ea.transitionend.transition);var Oa=xa("animationend"),Ia=xa("animationiteration"),Pa=xa("animationstart"),ja=xa("transitionend"),Ra=new Map,Aa="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Na(e,t){Ra.set(e,t),ce(t,[e])}for(var Da=0;Da<Aa.length;Da++){var $a=Aa[Da];Na($a.toLowerCase(),"on"+($a[0].toUpperCase()+$a.slice(1)))}Na(Oa,"onAnimationEnd"),Na(Ia,"onAnimationIteration"),Na(Pa,"onAnimationStart"),Na("dblclick","onDoubleClick"),Na("focusin","onFocus"),Na("focusout","onBlur"),Na(ja,"onTransitionEnd"),de("onMouseEnter",["mouseout","mouseover"]),de("onMouseLeave",["mouseout","mouseover"]),de("onPointerEnter",["pointerout","pointerover"]),de("onPointerLeave",["pointerout","pointerover"]),ce("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ce("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ce("onBeforeInput",["compositionend","keypress","textInput","paste"]),ce("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ce("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ce("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var La="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ua=new Set("cancel close invalid load scroll toggle".split(" ").concat(La));function Ma(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,a,s,i,o,l){if(qt.apply(this,arguments),Ut){if(!Ut)throw Error(oe(198));var u=Mt;Ut=!1,Mt=null,Bt||(Bt=!0,zt=u)}}(r,t,void 0,e),e.currentTarget=null}function Ba(e,t){t=!!(4&t);for(var n=0;n<e.length;n++){var r=e[n],a=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var i=r.length-1;0<=i;i--){var o=r[i],l=o.instance,u=o.currentTarget;if(o=o.listener,l!==s&&a.isPropagationStopped())break e;Ma(a,o,u),s=l}else for(i=0;i<r.length;i++){if(l=(o=r[i]).instance,u=o.currentTarget,o=o.listener,l!==s&&a.isPropagationStopped())break e;Ma(a,o,u),s=l}}}if(Bt)throw e=zt,Bt=!1,zt=null,e}function za(e,t){var n=t[ys];void 0===n&&(n=t[ys]=new Set);var r=e+"__bubble";n.has(r)||(Wa(t,e,2,!1),n.add(r))}function Fa(e,t,n){var r=0;t&&(r|=4),Wa(n,e,r,t)}var qa="_reactListening"+Math.random().toString(36).slice(2);function Ha(e){if(!e[qa]){e[qa]=!0,le.forEach(function(t){"selectionchange"!==t&&(Ua.has(t)||Fa(t,!1,e),Fa(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[qa]||(t[qa]=!0,Fa("selectionchange",!1,t))}}function Wa(e,t,n,r){switch(Zn(t)){case 1:var a=Jn;break;case 4:a=Gn;break;default:a=Yn}n=a.bind(null,t,n,e),a=void 0,!Dt||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(a=!0),r?void 0!==a?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):void 0!==a?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function Va(e,t,n,r,a){var s=r;if(!(1&t||2&t||null===r))e:for(;;){if(null===r)return;var i=r.tag;if(3===i||4===i){var o=r.stateNode.containerInfo;if(o===a||8===o.nodeType&&o.parentNode===a)break;if(4===i)for(i=r.return;null!==i;){var l=i.tag;if((3===l||4===l)&&((l=i.stateNode.containerInfo)===a||8===l.nodeType&&l.parentNode===a))return;i=i.return}for(;null!==o;){if(null===(i=ws(o)))return;if(5===(l=i.tag)||6===l){r=s=i;continue e}o=o.parentNode}}r=r.return}At(function(){var r=s,a=kt(n),i=[];e:{var o=Ra.get(e);if(void 0!==o){var l=hr,u=e;switch(e){case"keypress":if(0===ar(n))break e;case"keydown":case"keyup":l=Ir;break;case"focusin":u="focus",l=vr;break;case"focusout":u="blur",l=vr;break;case"beforeblur":case"afterblur":l=vr;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=gr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=yr;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=jr;break;case Oa:case Ia:case Pa:l=br;break;case ja:l=Rr;break;case"scroll":l=pr;break;case"wheel":l=Nr;break;case"copy":case"cut":case"paste":l=_r;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Pr}var c=!!(4&t),d=!c&&"scroll"===e,h=c?null!==o?o+"Capture":null:o;c=[];for(var f,p=r;null!==p;){var m=(f=p).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==h&&(null!=(m=Nt(p,h))&&c.push(Ka(p,m,f)))),d)break;p=p.return}0<c.length&&(o=new l(o,u,null,n,a),i.push({event:o,listeners:c}))}}if(!(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||n===St||!(u=n.relatedTarget||n.fromElement)||!ws(u)&&!u[gs])&&(l||o)&&(o=a.window===a?a:(o=a.ownerDocument)?o.defaultView||o.parentWindow:window,l?(l=r,null!==(u=(u=n.relatedTarget||n.toElement)?ws(u):null)&&(u!==(d=Ht(u))||5!==u.tag&&6!==u.tag)&&(u=null)):(l=null,u=r),l!==u)){if(c=gr,m="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(c=Pr,m="onPointerLeave",h="onPointerEnter",p="pointer"),d=null==l?o:Ss(l),f=null==u?o:Ss(u),(o=new c(m,p+"leave",l,n,a)).target=d,o.relatedTarget=f,m=null,ws(a)===r&&((c=new c(h,p+"enter",u,n,a)).target=f,c.relatedTarget=d,m=c),d=m,l&&u)e:{for(h=u,p=0,f=c=l;f;f=Ga(f))p++;for(f=0,m=h;m;m=Ga(m))f++;for(;0<p-f;)c=Ga(c),p--;for(;0<f-p;)h=Ga(h),f--;for(;p--;){if(c===h||null!==h&&c===h.alternate)break e;c=Ga(c),h=Ga(h)}c=null}else c=null;null!==l&&Ya(i,o,l,c,!1),null!==u&&null!==d&&Ya(i,d,u,c,!0)}if("select"===(l=(o=r?Ss(r):window).nodeName&&o.nodeName.toLowerCase())||"input"===l&&"file"===o.type)var g=Xr;else if(Vr(o))if(Zr)g=la;else{g=ia;var y=sa}else(l=o.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(g=oa);switch(g&&(g=g(e,r))?Kr(i,g,n,a):(y&&y(e,o,r),"focusout"===e&&(y=o._wrapperState)&&y.controlled&&"number"===o.type&&nt(o,"number",o.value)),y=r?Ss(r):window,e){case"focusin":(Vr(y)||"true"===y.contentEditable)&&(va=y,ba=r,wa=null);break;case"focusout":wa=ba=va=null;break;case"mousedown":_a=!0;break;case"contextmenu":case"mouseup":case"dragend":_a=!1,Sa(i,n,a);break;case"selectionchange":if(ya)break;case"keydown":case"keyup":Sa(i,n,a)}var v;if($r)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Hr?Fr(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Mr&&"ko"!==n.locale&&(Hr||"onCompositionStart"!==b?"onCompositionEnd"===b&&Hr&&(v=rr()):(tr="value"in(er=a)?er.value:er.textContent,Hr=!0)),0<(y=Ja(r,b)).length&&(b=new Sr(b,e,null,n,a),i.push({event:b,listeners:y}),v?b.data=v:null!==(v=qr(n))&&(b.data=v))),(v=Ur?function(e,t){switch(e){case"compositionend":return qr(t);case"keypress":return 32!==t.which?null:(zr=!0,Br);case"textInput":return(e=t.data)===Br&&zr?null:e;default:return null}}(e,n):function(e,t){if(Hr)return"compositionend"===e||!$r&&Fr(e,t)?(e=rr(),nr=tr=er=null,Hr=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Mr&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Ja(r,"onBeforeInput")).length&&(a=new Sr("onBeforeInput","beforeinput",null,n,a),i.push({event:a,listeners:r}),a.data=v))}Ba(i,t)})}function Ka(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Ja(e,t){for(var n=t+"Capture",r=[];null!==e;){var a=e,s=a.stateNode;5===a.tag&&null!==s&&(a=s,null!=(s=Nt(e,n))&&r.unshift(Ka(e,s,a)),null!=(s=Nt(e,t))&&r.push(Ka(e,s,a))),e=e.return}return r}function Ga(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Ya(e,t,n,r,a){for(var s=t._reactName,i=[];null!==n&&n!==r;){var o=n,l=o.alternate,u=o.stateNode;if(null!==l&&l===r)break;5===o.tag&&null!==u&&(o=u,a?null!=(l=Nt(n,s))&&i.unshift(Ka(n,l,o)):a||null!=(l=Nt(n,s))&&i.push(Ka(n,l,o))),n=n.return}0!==i.length&&e.push({event:t,listeners:i})}var Qa=/\r\n?/g,Xa=/\u0000|\uFFFD/g;function Za(e){return("string"==typeof e?e:""+e).replace(Qa,"\n").replace(Xa,"")}function es(e,t,n){if(t=Za(t),Za(e)!==t&&n)throw Error(oe(425))}function ts(){}var ns=null,rs=null;function as(e,t){return"textarea"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ss="function"==typeof setTimeout?setTimeout:void 0,is="function"==typeof clearTimeout?clearTimeout:void 0,os="function"==typeof Promise?Promise:void 0,ls="function"==typeof queueMicrotask?queueMicrotask:void 0!==os?function(e){return os.resolve(null).then(e).catch(us)}:ss;function us(e){setTimeout(function(){throw e})}function cs(e,t){var n=t,r=0;do{var a=n.nextSibling;if(e.removeChild(n),a&&8===a.nodeType)if("/$"===(n=a.data)){if(0===r)return e.removeChild(a),void Wn(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=a}while(n);Wn(t)}function ds(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function hs(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var fs=Math.random().toString(36).slice(2),ps="__reactFiber$"+fs,ms="__reactProps$"+fs,gs="__reactContainer$"+fs,ys="__reactEvents$"+fs,vs="__reactListeners$"+fs,bs="__reactHandles$"+fs;function ws(e){var t=e[ps];if(t)return t;for(var n=e.parentNode;n;){if(t=n[gs]||n[ps]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=hs(e);null!==e;){if(n=e[ps])return n;e=hs(e)}return t}n=(e=n).parentNode}return null}function _s(e){return!(e=e[ps]||e[gs])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function Ss(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(oe(33))}function ks(e){return e[ms]||null}var Es=[],Ts=-1;function Cs(e){return{current:e}}function xs(e){0>Ts||(e.current=Es[Ts],Es[Ts]=null,Ts--)}function Os(e,t){Ts++,Es[Ts]=e.current,e.current=t}var Is={},Ps=Cs(Is),js=Cs(!1),Rs=Is;function As(e,t){var n=e.type.contextTypes;if(!n)return Is;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var a,s={};for(a in n)s[a]=t[a];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Ns(e){return null!=(e=e.childContextTypes)}function Ds(){xs(js),xs(Ps)}function $s(e,t,n){if(Ps.current!==Is)throw Error(oe(168));Os(Ps,t),Os(js,n)}function Ls(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!=typeof r.getChildContext)return n;for(var a in r=r.getChildContext())if(!(a in t))throw Error(oe(108,We(e)||"Unknown",a));return Me({},n,r)}function Us(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Is,Rs=Ps.current,Os(Ps,e),Os(js,js.current),!0}function Ms(e,t,n){var r=e.stateNode;if(!r)throw Error(oe(169));n?(e=Ls(e,t,Rs),r.__reactInternalMemoizedMergedChildContext=e,xs(js),xs(Ps),Os(Ps,e)):xs(js),Os(js,n)}var Bs=null,zs=!1,Fs=!1;function qs(e){null===Bs?Bs=[e]:Bs.push(e)}function Hs(){if(!Fs&&null!==Bs){Fs=!0;var e=0,t=Sn;try{var n=Bs;for(Sn=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Bs=null,zs=!1}catch(a){throw null!==Bs&&(Bs=Bs.slice(e+1)),Gt(tn,Hs),a}finally{Sn=t,Fs=!1}}return null}var Ws=[],Vs=0,Ks=null,Js=0,Gs=[],Ys=0,Qs=null,Xs=1,Zs="";function ei(e,t){Ws[Vs++]=Js,Ws[Vs++]=Ks,Ks=e,Js=t}function ti(e,t,n){Gs[Ys++]=Xs,Gs[Ys++]=Zs,Gs[Ys++]=Qs,Qs=e;var r=Xs;e=Zs;var a=32-un(r)-1;r&=~(1<<a),n+=1;var s=32-un(t)+a;if(30<s){var i=a-a%5;s=(r&(1<<i)-1).toString(32),r>>=i,a-=i,Xs=1<<32-un(t)+a|n<<a|r,Zs=s+e}else Xs=1<<s|n<<a|r,Zs=e}function ni(e){null!==e.return&&(ei(e,1),ti(e,1,0))}function ri(e){for(;e===Ks;)Ks=Ws[--Vs],Ws[Vs]=null,Js=Ws[--Vs],Ws[Vs]=null;for(;e===Qs;)Qs=Gs[--Ys],Gs[Ys]=null,Zs=Gs[--Ys],Gs[Ys]=null,Xs=Gs[--Ys],Gs[Ys]=null}var ai=null,si=null,ii=!1,oi=null;function li(e,t){var n=Rc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function ui(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ai=e,si=ds(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ai=e,si=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Qs?{id:Xs,overflow:Zs}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Rc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ai=e,si=null,!0);default:return!1}}function ci(e){return!(!(1&e.mode)||128&e.flags)}function di(e){if(ii){var t=si;if(t){var n=t;if(!ui(e,t)){if(ci(e))throw Error(oe(418));t=ds(n.nextSibling);var r=ai;t&&ui(e,t)?li(r,n):(e.flags=-4097&e.flags|2,ii=!1,ai=e)}}else{if(ci(e))throw Error(oe(418));e.flags=-4097&e.flags|2,ii=!1,ai=e}}}function hi(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ai=e}function fi(e){if(e!==ai)return!1;if(!ii)return hi(e),ii=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!as(e.type,e.memoizedProps)),t&&(t=si)){if(ci(e))throw pi(),Error(oe(418));for(;t;)li(e,t),t=ds(t.nextSibling)}if(hi(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(oe(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){si=ds(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}si=null}}else si=ai?ds(e.stateNode.nextSibling):null;return!0}function pi(){for(var e=si;e;)e=ds(e.nextSibling)}function mi(){si=ai=null,ii=!1}function gi(e){null===oi?oi=[e]:oi.push(e)}var yi=Se.ReactCurrentBatchConfig;function vi(e,t,n){if(null!==(e=n.ref)&&"function"!=typeof e&&"object"!=typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(oe(309));var r=n.stateNode}if(!r)throw Error(oe(147,e));var a=r,s=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===s?t.ref:((t=function(e){var t=a.refs;null===e?delete t[s]:t[s]=e})._stringRef=s,t)}if("string"!=typeof e)throw Error(oe(284));if(!n._owner)throw Error(oe(290,e))}return e}function bi(e,t){throw e=Object.prototype.toString.call(t),Error(oe(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function wi(e){return(0,e._init)(e._payload)}function _i(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function a(e,t){return(e=Nc(e,t)).index=0,e.sibling=null,e}function s(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function i(t){return e&&null===t.alternate&&(t.flags|=2),t}function o(e,t,n,r){return null===t||6!==t.tag?((t=Uc(n,e.mode,r)).return=e,t):((t=a(t,n)).return=e,t)}function l(e,t,n,r){var s=n.type;return s===Te?c(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===s||"object"==typeof s&&null!==s&&s.$$typeof===Ne&&wi(s)===t.type)?((r=a(t,n.props)).ref=vi(e,t,n),r.return=e,r):((r=Dc(n.type,n.key,n.props,null,e.mode,r)).ref=vi(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Mc(n,e.mode,r)).return=e,t):((t=a(t,n.children||[])).return=e,t)}function c(e,t,n,r,s){return null===t||7!==t.tag?((t=$c(n,e.mode,r,s)).return=e,t):((t=a(t,n)).return=e,t)}function d(e,t,n){if("string"==typeof t&&""!==t||"number"==typeof t)return(t=Uc(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case ke:return(n=Dc(t.type,t.key,t.props,null,e.mode,n)).ref=vi(e,null,t),n.return=e,n;case Ee:return(t=Mc(t,e.mode,n)).return=e,t;case Ne:return d(e,(0,t._init)(t._payload),n)}if(rt(t)||Le(t))return(t=$c(t,e.mode,n,null)).return=e,t;bi(e,t)}return null}function h(e,t,n,r){var a=null!==t?t.key:null;if("string"==typeof n&&""!==n||"number"==typeof n)return null!==a?null:o(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case ke:return n.key===a?l(e,t,n,r):null;case Ee:return n.key===a?u(e,t,n,r):null;case Ne:return h(e,t,(a=n._init)(n._payload),r)}if(rt(n)||Le(n))return null!==a?null:c(e,t,n,r,null);bi(e,n)}return null}function f(e,t,n,r,a){if("string"==typeof r&&""!==r||"number"==typeof r)return o(t,e=e.get(n)||null,""+r,a);if("object"==typeof r&&null!==r){switch(r.$$typeof){case ke:return l(t,e=e.get(null===r.key?n:r.key)||null,r,a);case Ee:return u(t,e=e.get(null===r.key?n:r.key)||null,r,a);case Ne:return f(e,t,n,(0,r._init)(r._payload),a)}if(rt(r)||Le(r))return c(t,e=e.get(n)||null,r,a,null);bi(t,r)}return null}return function o(l,u,c,p){if("object"==typeof c&&null!==c&&c.type===Te&&null===c.key&&(c=c.props.children),"object"==typeof c&&null!==c){switch(c.$$typeof){case ke:e:{for(var m=c.key,g=u;null!==g;){if(g.key===m){if((m=c.type)===Te){if(7===g.tag){n(l,g.sibling),(u=a(g,c.props.children)).return=l,l=u;break e}}else if(g.elementType===m||"object"==typeof m&&null!==m&&m.$$typeof===Ne&&wi(m)===g.type){n(l,g.sibling),(u=a(g,c.props)).ref=vi(l,g,c),u.return=l,l=u;break e}n(l,g);break}t(l,g),g=g.sibling}c.type===Te?((u=$c(c.props.children,l.mode,p,c.key)).return=l,l=u):((p=Dc(c.type,c.key,c.props,null,l.mode,p)).ref=vi(l,u,c),p.return=l,l=p)}return i(l);case Ee:e:{for(g=c.key;null!==u;){if(u.key===g){if(4===u.tag&&u.stateNode.containerInfo===c.containerInfo&&u.stateNode.implementation===c.implementation){n(l,u.sibling),(u=a(u,c.children||[])).return=l,l=u;break e}n(l,u);break}t(l,u),u=u.sibling}(u=Mc(c,l.mode,p)).return=l,l=u}return i(l);case Ne:return o(l,u,(g=c._init)(c._payload),p)}if(rt(c))return function(a,i,o,l){for(var u=null,c=null,p=i,m=i=0,g=null;null!==p&&m<o.length;m++){p.index>m?(g=p,p=null):g=p.sibling;var y=h(a,p,o[m],l);if(null===y){null===p&&(p=g);break}e&&p&&null===y.alternate&&t(a,p),i=s(y,i,m),null===c?u=y:c.sibling=y,c=y,p=g}if(m===o.length)return n(a,p),ii&&ei(a,m),u;if(null===p){for(;m<o.length;m++)null!==(p=d(a,o[m],l))&&(i=s(p,i,m),null===c?u=p:c.sibling=p,c=p);return ii&&ei(a,m),u}for(p=r(a,p);m<o.length;m++)null!==(g=f(p,a,m,o[m],l))&&(e&&null!==g.alternate&&p.delete(null===g.key?m:g.key),i=s(g,i,m),null===c?u=g:c.sibling=g,c=g);return e&&p.forEach(function(e){return t(a,e)}),ii&&ei(a,m),u}(l,u,c,p);if(Le(c))return function(a,i,o,l){var u=Le(o);if("function"!=typeof u)throw Error(oe(150));if(null==(o=u.call(o)))throw Error(oe(151));for(var c=u=null,p=i,m=i=0,g=null,y=o.next();null!==p&&!y.done;m++,y=o.next()){p.index>m?(g=p,p=null):g=p.sibling;var v=h(a,p,y.value,l);if(null===v){null===p&&(p=g);break}e&&p&&null===v.alternate&&t(a,p),i=s(v,i,m),null===c?u=v:c.sibling=v,c=v,p=g}if(y.done)return n(a,p),ii&&ei(a,m),u;if(null===p){for(;!y.done;m++,y=o.next())null!==(y=d(a,y.value,l))&&(i=s(y,i,m),null===c?u=y:c.sibling=y,c=y);return ii&&ei(a,m),u}for(p=r(a,p);!y.done;m++,y=o.next())null!==(y=f(p,a,m,y.value,l))&&(e&&null!==y.alternate&&p.delete(null===y.key?m:y.key),i=s(y,i,m),null===c?u=y:c.sibling=y,c=y);return e&&p.forEach(function(e){return t(a,e)}),ii&&ei(a,m),u}(l,u,c,p);bi(l,c)}return"string"==typeof c&&""!==c||"number"==typeof c?(c=""+c,null!==u&&6===u.tag?(n(l,u.sibling),(u=a(u,c)).return=l,l=u):(n(l,u),(u=Uc(c,l.mode,p)).return=l,l=u),i(l)):n(l,u)}}var Si=_i(!0),ki=_i(!1),Ei=Cs(null),Ti=null,Ci=null,xi=null;function Oi(){xi=Ci=Ti=null}function Ii(e){var t=Ei.current;xs(Ei),e._currentValue=t}function Pi(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function ji(e,t){Ti=e,xi=Ci=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(wl=!0),e.firstContext=null)}function Ri(e){var t=e._currentValue;if(xi!==e)if(e={context:e,memoizedValue:t,next:null},null===Ci){if(null===Ti)throw Error(oe(308));Ci=e,Ti.dependencies={lanes:0,firstContext:e}}else Ci=Ci.next=e;return t}var Ai=null;function Ni(e){null===Ai?Ai=[e]:Ai.push(e)}function Di(e,t,n,r){var a=t.interleaved;return null===a?(n.next=n,Ni(t)):(n.next=a.next,a.next=n),t.interleaved=n,$i(e,r)}function $i(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Li=!1;function Ui(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Mi(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Bi(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function zi(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,2&Iu){var a=r.pending;return null===a?t.next=t:(t.next=a.next,a.next=t),r.pending=t,$i(e,n)}return null===(a=r.interleaved)?(t.next=t,Ni(r)):(t.next=a.next,a.next=t),r.interleaved=t,$i(e,n)}function Fi(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,_n(e,n)}}function qi(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var a=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var i={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?a=s=i:s=s.next=i,n=n.next}while(null!==n);null===s?a=s=t:s=s.next=t}else a=s=t;return n={baseState:r.baseState,firstBaseUpdate:a,lastBaseUpdate:s,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Hi(e,t,n,r){var a=e.updateQueue;Li=!1;var s=a.firstBaseUpdate,i=a.lastBaseUpdate,o=a.shared.pending;if(null!==o){a.shared.pending=null;var l=o,u=l.next;l.next=null,null===i?s=u:i.next=u,i=l;var c=e.alternate;null!==c&&((o=(c=c.updateQueue).lastBaseUpdate)!==i&&(null===o?c.firstBaseUpdate=u:o.next=u,c.lastBaseUpdate=l))}if(null!==s){var d=a.baseState;for(i=0,c=u=l=null,o=s;;){var h=o.lane,f=o.eventTime;if((r&h)===h){null!==c&&(c=c.next={eventTime:f,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var p=e,m=o;switch(h=t,f=n,m.tag){case 1:if("function"==typeof(p=m.payload)){d=p.call(f,d,h);break e}d=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null==(h="function"==typeof(p=m.payload)?p.call(f,d,h):p))break e;d=Me({},d,h);break e;case 2:Li=!0}}null!==o.callback&&0!==o.lane&&(e.flags|=64,null===(h=a.effects)?a.effects=[o]:h.push(o))}else f={eventTime:f,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===c?(u=c=f,l=d):c=c.next=f,i|=h;if(null===(o=o.next)){if(null===(o=a.shared.pending))break;o=(h=o).next,h.next=null,a.lastBaseUpdate=h,a.shared.pending=null}}if(null===c&&(l=d),a.baseState=l,a.firstBaseUpdate=u,a.lastBaseUpdate=c,null!==(t=a.shared.interleaved)){a=t;do{i|=a.lane,a=a.next}while(a!==t)}else null===s&&(a.shared.lanes=0);Lu|=i,e.lanes=i,e.memoizedState=d}}function Wi(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],a=r.callback;if(null!==a){if(r.callback=null,r=n,"function"!=typeof a)throw Error(oe(191,a));a.call(r)}}}var Vi={},Ki=Cs(Vi),Ji=Cs(Vi),Gi=Cs(Vi);function Yi(e){if(e===Vi)throw Error(oe(174));return e}function Qi(e,t){switch(Os(Gi,t),Os(Ji,e),Os(Ki,Vi),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ct(null,"");break;default:t=ct(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}xs(Ki),Os(Ki,t)}function Xi(){xs(Ki),xs(Ji),xs(Gi)}function Zi(e){Yi(Gi.current);var t=Yi(Ki.current),n=ct(t,e.type);t!==n&&(Os(Ji,e),Os(Ki,n))}function eo(e){Ji.current===e&&(xs(Ki),xs(Ji))}var to=Cs(0);function no(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(128&t.flags)return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ro=[];function ao(){for(var e=0;e<ro.length;e++)ro[e]._workInProgressVersionPrimary=null;ro.length=0}var so=Se.ReactCurrentDispatcher,io=Se.ReactCurrentBatchConfig,oo=0,lo=null,uo=null,co=null,ho=!1,fo=!1,po=0,mo=0;function go(){throw Error(oe(321))}function yo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ua(e[n],t[n]))return!1;return!0}function vo(e,t,n,r,a,s){if(oo=s,lo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,so.current=null===e||null===e.memoizedState?tl:nl,e=n(r,a),fo){s=0;do{if(fo=!1,po=0,25<=s)throw Error(oe(301));s+=1,co=uo=null,t.updateQueue=null,so.current=rl,e=n(r,a)}while(fo)}if(so.current=el,t=null!==uo&&null!==uo.next,oo=0,co=uo=lo=null,ho=!1,t)throw Error(oe(300));return e}function bo(){var e=0!==po;return po=0,e}function wo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===co?lo.memoizedState=co=e:co=co.next=e,co}function _o(){if(null===uo){var e=lo.alternate;e=null!==e?e.memoizedState:null}else e=uo.next;var t=null===co?lo.memoizedState:co.next;if(null!==t)co=t,uo=e;else{if(null===e)throw Error(oe(310));e={memoizedState:(uo=e).memoizedState,baseState:uo.baseState,baseQueue:uo.baseQueue,queue:uo.queue,next:null},null===co?lo.memoizedState=co=e:co=co.next=e}return co}function So(e,t){return"function"==typeof t?t(e):t}function ko(e){var t=_o(),n=t.queue;if(null===n)throw Error(oe(311));n.lastRenderedReducer=e;var r=uo,a=r.baseQueue,s=n.pending;if(null!==s){if(null!==a){var i=a.next;a.next=s.next,s.next=i}r.baseQueue=a=s,n.pending=null}if(null!==a){s=a.next,r=r.baseState;var o=i=null,l=null,u=s;do{var c=u.lane;if((oo&c)===c)null!==l&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var d={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===l?(o=l=d,i=r):l=l.next=d,lo.lanes|=c,Lu|=c}u=u.next}while(null!==u&&u!==s);null===l?i=r:l.next=o,ua(r,t.memoizedState)||(wl=!0),t.memoizedState=r,t.baseState=i,t.baseQueue=l,n.lastRenderedState=r}if(null!==(e=n.interleaved)){a=e;do{s=a.lane,lo.lanes|=s,Lu|=s,a=a.next}while(a!==e)}else null===a&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Eo(e){var t=_o(),n=t.queue;if(null===n)throw Error(oe(311));n.lastRenderedReducer=e;var r=n.dispatch,a=n.pending,s=t.memoizedState;if(null!==a){n.pending=null;var i=a=a.next;do{s=e(s,i.action),i=i.next}while(i!==a);ua(s,t.memoizedState)||(wl=!0),t.memoizedState=s,null===t.baseQueue&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function To(){}function Co(e,t){var n=lo,r=_o(),a=t(),s=!ua(r.memoizedState,a);if(s&&(r.memoizedState=a,wl=!0),r=r.queue,Uo(Io.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||null!==co&&1&co.memoizedState.tag){if(n.flags|=2048,Ao(9,Oo.bind(null,n,r,a,t),void 0,null),null===Pu)throw Error(oe(349));30&oo||xo(n,t,a)}return a}function xo(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=lo.updateQueue)?(t={lastEffect:null,stores:null},lo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Oo(e,t,n,r){t.value=n,t.getSnapshot=r,Po(t)&&jo(e)}function Io(e,t,n){return n(function(){Po(t)&&jo(e)})}function Po(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ua(e,n)}catch(r){return!0}}function jo(e){var t=$i(e,1);null!==t&&rc(t,e,1,-1)}function Ro(e){var t=wo();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:So,lastRenderedState:e},t.queue=e,e=e.dispatch=Yo.bind(null,lo,e),[t.memoizedState,e]}function Ao(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=lo.updateQueue)?(t={lastEffect:null,stores:null},lo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function No(){return _o().memoizedState}function Do(e,t,n,r){var a=wo();lo.flags|=e,a.memoizedState=Ao(1|t,n,void 0,void 0===r?null:r)}function $o(e,t,n,r){var a=_o();r=void 0===r?null:r;var s=void 0;if(null!==uo){var i=uo.memoizedState;if(s=i.destroy,null!==r&&yo(r,i.deps))return void(a.memoizedState=Ao(t,n,s,r))}lo.flags|=e,a.memoizedState=Ao(1|t,n,s,r)}function Lo(e,t){return Do(8390656,8,e,t)}function Uo(e,t){return $o(2048,8,e,t)}function Mo(e,t){return $o(4,2,e,t)}function Bo(e,t){return $o(4,4,e,t)}function zo(e,t){return"function"==typeof t?(e=e(),t(e),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Fo(e,t,n){return n=null!=n?n.concat([e]):null,$o(4,4,zo.bind(null,t,e),n)}function qo(){}function Ho(e,t){var n=_o();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&yo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Wo(e,t){var n=_o();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&yo(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Vo(e,t,n){return 21&oo?(ua(n,t)||(n=vn(),lo.lanes|=n,Lu|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,wl=!0),e.memoizedState=n)}function Ko(e,t){var n=Sn;Sn=0!==n&&4>n?n:4,e(!0);var r=io.transition;io.transition={};try{e(!1),t()}finally{Sn=n,io.transition=r}}function Jo(){return _o().memoizedState}function Go(e,t,n){var r=nc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Qo(e))Xo(t,n);else if(null!==(n=Di(e,t,n,r))){rc(n,e,r,tc()),Zo(n,t,r)}}function Yo(e,t,n){var r=nc(e),a={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Qo(e))Xo(t,a);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var i=t.lastRenderedState,o=s(i,n);if(a.hasEagerState=!0,a.eagerState=o,ua(o,i)){var l=t.interleaved;return null===l?(a.next=a,Ni(t)):(a.next=l.next,l.next=a),void(t.interleaved=a)}}catch(u){}null!==(n=Di(e,t,a,r))&&(rc(n,e,r,a=tc()),Zo(n,t,r))}}function Qo(e){var t=e.alternate;return e===lo||null!==t&&t===lo}function Xo(e,t){fo=ho=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Zo(e,t,n){if(4194240&n){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,_n(e,n)}}var el={readContext:Ri,useCallback:go,useContext:go,useEffect:go,useImperativeHandle:go,useInsertionEffect:go,useLayoutEffect:go,useMemo:go,useReducer:go,useRef:go,useState:go,useDebugValue:go,useDeferredValue:go,useTransition:go,useMutableSource:go,useSyncExternalStore:go,useId:go,unstable_isNewReconciler:!1},tl={readContext:Ri,useCallback:function(e,t){return wo().memoizedState=[e,void 0===t?null:t],e},useContext:Ri,useEffect:Lo,useImperativeHandle:function(e,t,n){return n=null!=n?n.concat([e]):null,Do(4194308,4,zo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Do(4194308,4,e,t)},useInsertionEffect:function(e,t){return Do(4,2,e,t)},useMemo:function(e,t){var n=wo();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=wo();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Go.bind(null,lo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},wo().memoizedState=e},useState:Ro,useDebugValue:qo,useDeferredValue:function(e){return wo().memoizedState=e},useTransition:function(){var e=Ro(!1),t=e[0];return e=Ko.bind(null,e[1]),wo().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=lo,a=wo();if(ii){if(void 0===n)throw Error(oe(407));n=n()}else{if(n=t(),null===Pu)throw Error(oe(349));30&oo||xo(r,t,n)}a.memoizedState=n;var s={value:n,getSnapshot:t};return a.queue=s,Lo(Io.bind(null,r,s,e),[e]),r.flags|=2048,Ao(9,Oo.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=wo(),t=Pu.identifierPrefix;if(ii){var n=Zs;t=":"+t+"R"+(n=(Xs&~(1<<32-un(Xs)-1)).toString(32)+n),0<(n=po++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=mo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},nl={readContext:Ri,useCallback:Ho,useContext:Ri,useEffect:Uo,useImperativeHandle:Fo,useInsertionEffect:Mo,useLayoutEffect:Bo,useMemo:Wo,useReducer:ko,useRef:No,useState:function(){return ko(So)},useDebugValue:qo,useDeferredValue:function(e){return Vo(_o(),uo.memoizedState,e)},useTransition:function(){return[ko(So)[0],_o().memoizedState]},useMutableSource:To,useSyncExternalStore:Co,useId:Jo,unstable_isNewReconciler:!1},rl={readContext:Ri,useCallback:Ho,useContext:Ri,useEffect:Uo,useImperativeHandle:Fo,useInsertionEffect:Mo,useLayoutEffect:Bo,useMemo:Wo,useReducer:Eo,useRef:No,useState:function(){return Eo(So)},useDebugValue:qo,useDeferredValue:function(e){var t=_o();return null===uo?t.memoizedState=e:Vo(t,uo.memoizedState,e)},useTransition:function(){return[Eo(So)[0],_o().memoizedState]},useMutableSource:To,useSyncExternalStore:Co,useId:Jo,unstable_isNewReconciler:!1};function al(e,t){if(e&&e.defaultProps){for(var n in t=Me({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function sl(e,t,n,r){n=null==(n=n(r,t=e.memoizedState))?t:Me({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var il={isMounted:function(e){return!!(e=e._reactInternals)&&Ht(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=tc(),a=nc(e),s=Bi(r,a);s.payload=t,null!=n&&(s.callback=n),null!==(t=zi(e,s,a))&&(rc(t,e,a,r),Fi(t,e,a))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=tc(),a=nc(e),s=Bi(r,a);s.tag=1,s.payload=t,null!=n&&(s.callback=n),null!==(t=zi(e,s,a))&&(rc(t,e,a,r),Fi(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tc(),r=nc(e),a=Bi(n,r);a.tag=2,null!=t&&(a.callback=t),null!==(t=zi(e,a,r))&&(rc(t,e,r,n),Fi(t,e,r))}};function ol(e,t,n,r,a,s,i){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,i):!t.prototype||!t.prototype.isPureReactComponent||(!ca(n,r)||!ca(a,s))}function ll(e,t,n){var r=!1,a=Is,s=t.contextType;return"object"==typeof s&&null!==s?s=Ri(s):(a=Ns(t)?Rs:Ps.current,s=(r=null!=(r=t.contextTypes))?As(e,a):Is),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=il,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=s),t}function ul(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&il.enqueueReplaceState(t,t.state,null)}function cl(e,t,n,r){var a=e.stateNode;a.props=n,a.state=e.memoizedState,a.refs={},Ui(e);var s=t.contextType;"object"==typeof s&&null!==s?a.context=Ri(s):(s=Ns(t)?Rs:Ps.current,a.context=As(e,s)),a.state=e.memoizedState,"function"==typeof(s=t.getDerivedStateFromProps)&&(sl(e,t,s,n),a.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof a.getSnapshotBeforeUpdate||"function"!=typeof a.UNSAFE_componentWillMount&&"function"!=typeof a.componentWillMount||(t=a.state,"function"==typeof a.componentWillMount&&a.componentWillMount(),"function"==typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount(),t!==a.state&&il.enqueueReplaceState(a,a.state,null),Hi(e,n,a,r),a.state=e.memoizedState),"function"==typeof a.componentDidMount&&(e.flags|=4194308)}function dl(e,t){try{var n="",r=t;do{n+=qe(r),r=r.return}while(r);var a=n}catch(s){a="\nError generating stack: "+s.message+"\n"+s.stack}return{value:e,source:t,stack:a,digest:null}}function hl(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}var fl="function"==typeof WeakMap?WeakMap:Map;function pl(e,t,n){(n=Bi(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Wu||(Wu=!0,Vu=r)},n}function ml(e,t,n){(n=Bi(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"==typeof r){var a=t.value;n.payload=function(){return r(a)},n.callback=function(){}}var s=e.stateNode;return null!==s&&"function"==typeof s.componentDidCatch&&(n.callback=function(){"function"!=typeof r&&(null===Ku?Ku=new Set([this]):Ku.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function gl(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new fl;var a=new Set;r.set(t,a)}else void 0===(a=r.get(t))&&(a=new Set,r.set(t,a));a.has(n)||(a.add(n),e=Cc.bind(null,e,t,n),t.then(e,e))}function yl(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function vl(e,t,n,r,a){return 1&e.mode?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Bi(-1,1)).tag=2,zi(n,t,1))),n.lanes|=1),e)}var bl=Se.ReactCurrentOwner,wl=!1;function _l(e,t,n,r){t.child=null===e?ki(t,null,n,r):Si(t,e.child,n,r)}function Sl(e,t,n,r,a){n=n.render;var s=t.ref;return ji(t,a),r=vo(e,t,n,r,s,a),n=bo(),null===e||wl?(ii&&n&&ni(t),t.flags|=1,_l(e,t,r,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Wl(e,t,a))}function kl(e,t,n,r,a){if(null===e){var s=n.type;return"function"!=typeof s||Ac(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Dc(n.type,null,r,t,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,El(e,t,s,r,a))}if(s=e.child,0===(e.lanes&a)){var i=s.memoizedProps;if((n=null!==(n=n.compare)?n:ca)(i,r)&&e.ref===t.ref)return Wl(e,t,a)}return t.flags|=1,(e=Nc(s,r)).ref=t.ref,e.return=t,t.child=e}function El(e,t,n,r,a){if(null!==e){var s=e.memoizedProps;if(ca(s,r)&&e.ref===t.ref){if(wl=!1,t.pendingProps=r=s,0===(e.lanes&a))return t.lanes=e.lanes,Wl(e,t,a);131072&e.flags&&(wl=!0)}}return xl(e,t,n,r,a)}function Tl(e,t,n){var r=t.pendingProps,a=r.children,s=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(1&t.mode){if(!(1073741824&n))return e=null!==s?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Os(Nu,Au),Au|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==s?s.baseLanes:n,Os(Nu,Au),Au|=r}else t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Os(Nu,Au),Au|=n;else null!==s?(r=s.baseLanes|n,t.memoizedState=null):r=n,Os(Nu,Au),Au|=r;return _l(e,t,a,n),t.child}function Cl(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function xl(e,t,n,r,a){var s=Ns(n)?Rs:Ps.current;return s=As(t,s),ji(t,a),n=vo(e,t,n,r,s,a),r=bo(),null===e||wl?(ii&&r&&ni(t),t.flags|=1,_l(e,t,n,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Wl(e,t,a))}function Ol(e,t,n,r,a){if(Ns(n)){var s=!0;Us(t)}else s=!1;if(ji(t,a),null===t.stateNode)Hl(e,t),ll(t,n,r),cl(t,n,r,a),r=!0;else if(null===e){var i=t.stateNode,o=t.memoizedProps;i.props=o;var l=i.context,u=n.contextType;"object"==typeof u&&null!==u?u=Ri(u):u=As(t,u=Ns(n)?Rs:Ps.current);var c=n.getDerivedStateFromProps,d="function"==typeof c||"function"==typeof i.getSnapshotBeforeUpdate;d||"function"!=typeof i.UNSAFE_componentWillReceiveProps&&"function"!=typeof i.componentWillReceiveProps||(o!==r||l!==u)&&ul(t,i,r,u),Li=!1;var h=t.memoizedState;i.state=h,Hi(t,r,i,a),l=t.memoizedState,o!==r||h!==l||js.current||Li?("function"==typeof c&&(sl(t,n,c,r),l=t.memoizedState),(o=Li||ol(t,n,o,r,h,l,u))?(d||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||("function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount()),"function"==typeof i.componentDidMount&&(t.flags|=4194308)):("function"==typeof i.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),i.props=r,i.state=l,i.context=u,r=o):("function"==typeof i.componentDidMount&&(t.flags|=4194308),r=!1)}else{i=t.stateNode,Mi(e,t),o=t.memoizedProps,u=t.type===t.elementType?o:al(t.type,o),i.props=u,d=t.pendingProps,h=i.context,"object"==typeof(l=n.contextType)&&null!==l?l=Ri(l):l=As(t,l=Ns(n)?Rs:Ps.current);var f=n.getDerivedStateFromProps;(c="function"==typeof f||"function"==typeof i.getSnapshotBeforeUpdate)||"function"!=typeof i.UNSAFE_componentWillReceiveProps&&"function"!=typeof i.componentWillReceiveProps||(o!==d||h!==l)&&ul(t,i,r,l),Li=!1,h=t.memoizedState,i.state=h,Hi(t,r,i,a);var p=t.memoizedState;o!==d||h!==p||js.current||Li?("function"==typeof f&&(sl(t,n,f,r),p=t.memoizedState),(u=Li||ol(t,n,u,r,h,p,l)||!1)?(c||"function"!=typeof i.UNSAFE_componentWillUpdate&&"function"!=typeof i.componentWillUpdate||("function"==typeof i.componentWillUpdate&&i.componentWillUpdate(r,p,l),"function"==typeof i.UNSAFE_componentWillUpdate&&i.UNSAFE_componentWillUpdate(r,p,l)),"function"==typeof i.componentDidUpdate&&(t.flags|=4),"function"==typeof i.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!=typeof i.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!=typeof i.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),i.props=r,i.state=p,i.context=l,r=u):("function"!=typeof i.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!=typeof i.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Il(e,t,n,r,s,a)}function Il(e,t,n,r,a,s){Cl(e,t);var i=!!(128&t.flags);if(!r&&!i)return a&&Ms(t,n,!1),Wl(e,t,s);r=t.stateNode,bl.current=t;var o=i&&"function"!=typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&i?(t.child=Si(t,e.child,null,s),t.child=Si(t,null,o,s)):_l(e,t,o,s),t.memoizedState=r.state,a&&Ms(t,n,!0),t.child}function Pl(e){var t=e.stateNode;t.pendingContext?$s(0,t.pendingContext,t.pendingContext!==t.context):t.context&&$s(0,t.context,!1),Qi(e,t.containerInfo)}function jl(e,t,n,r,a){return mi(),gi(a),t.flags|=256,_l(e,t,n,r),t.child}var Rl,Al,Nl,Dl,$l={dehydrated:null,treeContext:null,retryLane:0};function Ll(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ul(e,t,n){var r,a=t.pendingProps,s=to.current,i=!1,o=!!(128&t.flags);if((r=o)||(r=(null===e||null!==e.memoizedState)&&!!(2&s)),r?(i=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(s|=1),Os(to,1&s),null===e)return di(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(1&t.mode?"$!"===e.data?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=a.children,e=a.fallback,i?(a=t.mode,i=t.child,o={mode:"hidden",children:o},1&a||null===i?i=Lc(o,a,0,null):(i.childLanes=0,i.pendingProps=o),e=$c(e,a,n,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=Ll(n),t.memoizedState=$l,e):Ml(t,o));if(null!==(s=e.memoizedState)&&null!==(r=s.dehydrated))return function(e,t,n,r,a,s,i){if(n)return 256&t.flags?(t.flags&=-257,Bl(e,t,i,r=hl(Error(oe(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(s=r.fallback,a=t.mode,r=Lc({mode:"visible",children:r.children},a,0,null),(s=$c(s,a,i,null)).flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,1&t.mode&&Si(t,e.child,null,i),t.child.memoizedState=Ll(i),t.memoizedState=$l,s);if(!(1&t.mode))return Bl(e,t,i,null);if("$!"===a.data){if(r=a.nextSibling&&a.nextSibling.dataset)var o=r.dgst;return r=o,Bl(e,t,i,r=hl(s=Error(oe(419)),r,void 0))}if(o=0!==(i&e.childLanes),wl||o){if(null!==(r=Pu)){switch(i&-i){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}0!==(a=0!==(a&(r.suspendedLanes|i))?0:a)&&a!==s.retryLane&&(s.retryLane=a,$i(e,a),rc(r,e,a,-1))}return gc(),Bl(e,t,i,r=hl(Error(oe(421))))}return"$?"===a.data?(t.flags|=128,t.child=e.child,t=Oc.bind(null,e),a._reactRetry=t,null):(e=s.treeContext,si=ds(a.nextSibling),ai=t,ii=!0,oi=null,null!==e&&(Gs[Ys++]=Xs,Gs[Ys++]=Zs,Gs[Ys++]=Qs,Xs=e.id,Zs=e.overflow,Qs=t),t=Ml(t,r.children),t.flags|=4096,t)}(e,t,o,a,r,s,n);if(i){i=a.fallback,o=t.mode,r=(s=e.child).sibling;var l={mode:"hidden",children:a.children};return 1&o||t.child===s?(a=Nc(s,l)).subtreeFlags=14680064&s.subtreeFlags:((a=t.child).childLanes=0,a.pendingProps=l,t.deletions=null),null!==r?i=Nc(r,i):(i=$c(i,o,n,null)).flags|=2,i.return=t,a.return=t,a.sibling=i,t.child=a,a=i,i=t.child,o=null===(o=e.child.memoizedState)?Ll(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~n,t.memoizedState=$l,a}return e=(i=e.child).sibling,a=Nc(i,{mode:"visible",children:a.children}),!(1&t.mode)&&(a.lanes=n),a.return=t,a.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=a,t.memoizedState=null,a}function Ml(e,t){return(t=Lc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Bl(e,t,n,r){return null!==r&&gi(r),Si(t,e.child,null,n),(e=Ml(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function zl(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Pi(e.return,t,n)}function Fl(e,t,n,r,a){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:a}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=a)}function ql(e,t,n){var r=t.pendingProps,a=r.revealOrder,s=r.tail;if(_l(e,t,r.children,n),2&(r=to.current))r=1&r|2,t.flags|=128;else{if(null!==e&&128&e.flags)e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&zl(e,n,t);else if(19===e.tag)zl(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Os(to,r),1&t.mode)switch(a){case"forwards":for(n=t.child,a=null;null!==n;)null!==(e=n.alternate)&&null===no(e)&&(a=n),n=n.sibling;null===(n=a)?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),Fl(t,!1,a,n,s);break;case"backwards":for(n=null,a=t.child,t.child=null;null!==a;){if(null!==(e=a.alternate)&&null===no(e)){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}Fl(t,!0,n,null,s);break;case"together":Fl(t,!1,null,null,void 0);break;default:t.memoizedState=null}else t.memoizedState=null;return t.child}function Hl(e,t){!(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Wl(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Lu|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(oe(153));if(null!==t.child){for(n=Nc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Nc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Vl(e,t){if(!ii)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Kl(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var a=e.child;null!==a;)n|=a.lanes|a.childLanes,r|=14680064&a.subtreeFlags,r|=14680064&a.flags,a.return=e,a=a.sibling;else for(a=e.child;null!==a;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags,r|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Jl(e,t,n){var r=t.pendingProps;switch(ri(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Kl(t),null;case 1:case 17:return Ns(t.type)&&Ds(),Kl(t),null;case 3:return r=t.stateNode,Xi(),xs(js),xs(Ps),ao(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(fi(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&!(256&t.flags)||(t.flags|=1024,null!==oi&&(oc(oi),oi=null))),Al(e,t),Kl(t),null;case 5:eo(t);var a=Yi(Gi.current);if(n=t.type,null!==e&&null!=t.stateNode)Nl(e,t,n,r,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(oe(166));return Kl(t),null}if(e=Yi(Ki.current),fi(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[ps]=t,r[ms]=s,e=!!(1&t.mode),n){case"dialog":za("cancel",r),za("close",r);break;case"iframe":case"object":case"embed":za("load",r);break;case"video":case"audio":for(a=0;a<La.length;a++)za(La[a],r);break;case"source":za("error",r);break;case"img":case"image":case"link":za("error",r),za("load",r);break;case"details":za("toggle",r);break;case"input":Xe(r,s),za("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},za("invalid",r);break;case"textarea":it(r,s),za("invalid",r)}for(var i in wt(n,s),a=null,s)if(s.hasOwnProperty(i)){var o=s[i];"children"===i?"string"==typeof o?r.textContent!==o&&(!0!==s.suppressHydrationWarning&&es(r.textContent,o,e),a=["children",o]):"number"==typeof o&&r.textContent!==""+o&&(!0!==s.suppressHydrationWarning&&es(r.textContent,o,e),a=["children",""+o]):ue.hasOwnProperty(i)&&null!=o&&"onScroll"===i&&za("scroll",r)}switch(n){case"input":Je(r),tt(r,s,!0);break;case"textarea":Je(r),lt(r);break;case"select":case"option":break;default:"function"==typeof s.onClick&&(r.onclick=ts)}r=a,t.updateQueue=r,null!==r&&(t.flags|=4)}else{i=9===a.nodeType?a:a.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ut(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=i.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"==typeof r.is?e=i.createElement(n,{is:r.is}):(e=i.createElement(n),"select"===n&&(i=e,r.multiple?i.multiple=!0:r.size&&(i.size=r.size))):e=i.createElementNS(e,n),e[ps]=t,e[ms]=r,Rl(e,t,!1,!1),t.stateNode=e;e:{switch(i=_t(n,r),n){case"dialog":za("cancel",e),za("close",e),a=r;break;case"iframe":case"object":case"embed":za("load",e),a=r;break;case"video":case"audio":for(a=0;a<La.length;a++)za(La[a],e);a=r;break;case"source":za("error",e),a=r;break;case"img":case"image":case"link":za("error",e),za("load",e),a=r;break;case"details":za("toggle",e),a=r;break;case"input":Xe(e,r),a=Qe(e,r),za("invalid",e);break;case"option":default:a=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},a=Me({},r,{value:void 0}),za("invalid",e);break;case"textarea":it(e,r),a=st(e,r),za("invalid",e)}for(s in wt(n,a),o=a)if(o.hasOwnProperty(s)){var l=o[s];"style"===s?vt(e,l):"dangerouslySetInnerHTML"===s?null!=(l=l?l.__html:void 0)&&ft(e,l):"children"===s?"string"==typeof l?("textarea"!==n||""!==l)&&pt(e,l):"number"==typeof l&&pt(e,""+l):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(ue.hasOwnProperty(s)?null!=l&&"onScroll"===s&&za("scroll",e):null!=l&&_e(e,s,l,i))}switch(n){case"input":Je(e),tt(e,r,!1);break;case"textarea":Je(e),lt(e);break;case"option":null!=r.value&&e.setAttribute("value",""+Ve(r.value));break;case"select":e.multiple=!!r.multiple,null!=(s=r.value)?at(e,!!r.multiple,s,!1):null!=r.defaultValue&&at(e,!!r.multiple,r.defaultValue,!0);break;default:"function"==typeof a.onClick&&(e.onclick=ts)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Kl(t),null;case 6:if(e&&null!=t.stateNode)Dl(e,t,e.memoizedProps,r);else{if("string"!=typeof r&&null===t.stateNode)throw Error(oe(166));if(n=Yi(Gi.current),Yi(Ki.current),fi(t)){if(r=t.stateNode,n=t.memoizedProps,r[ps]=t,(s=r.nodeValue!==n)&&null!==(e=ai))switch(e.tag){case 3:es(r.nodeValue,n,!!(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&es(r.nodeValue,n,!!(1&e.mode))}s&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[ps]=t,t.stateNode=r}return Kl(t),null;case 13:if(xs(to),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ii&&null!==si&&1&t.mode&&!(128&t.flags))pi(),mi(),t.flags|=98560,s=!1;else if(s=fi(t),null!==r&&null!==r.dehydrated){if(null===e){if(!s)throw Error(oe(318));if(!(s=null!==(s=t.memoizedState)?s.dehydrated:null))throw Error(oe(317));s[ps]=t}else mi(),!(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Kl(t),s=!1}else null!==oi&&(oc(oi),oi=null),s=!0;if(!s)return 65536&t.flags?t:null}return 128&t.flags?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,1&t.mode&&(null===e||1&to.current?0===Du&&(Du=3):gc())),null!==t.updateQueue&&(t.flags|=4),Kl(t),null);case 4:return Xi(),Al(e,t),null===e&&Ha(t.stateNode.containerInfo),Kl(t),null;case 10:return Ii(t.type._context),Kl(t),null;case 19:if(xs(to),null===(s=t.memoizedState))return Kl(t),null;if(r=!!(128&t.flags),null===(i=s.rendering))if(r)Vl(s,!1);else{if(0!==Du||null!==e&&128&e.flags)for(e=t.child;null!==e;){if(null!==(i=no(e))){for(t.flags|=128,Vl(s,!1),null!==(r=i.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(s=n).flags&=14680066,null===(i=s.alternate)?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=i.childLanes,s.lanes=i.lanes,s.child=i.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=i.memoizedProps,s.memoizedState=i.memoizedState,s.updateQueue=i.updateQueue,s.type=i.type,e=i.dependencies,s.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Os(to,1&to.current|2),t.child}e=e.sibling}null!==s.tail&&Zt()>qu&&(t.flags|=128,r=!0,Vl(s,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=no(i))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Vl(s,!0),null===s.tail&&"hidden"===s.tailMode&&!i.alternate&&!ii)return Kl(t),null}else 2*Zt()-s.renderingStartTime>qu&&1073741824!==n&&(t.flags|=128,r=!0,Vl(s,!1),t.lanes=4194304);s.isBackwards?(i.sibling=t.child,t.child=i):(null!==(n=s.last)?n.sibling=i:t.child=i,s.last=i)}return null!==s.tail?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=Zt(),t.sibling=null,n=to.current,Os(to,r?1&n|2:1&n),t):(Kl(t),null);case 22:case 23:return hc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&1&t.mode?!!(1073741824&Au)&&(Kl(t),6&t.subtreeFlags&&(t.flags|=8192)):Kl(t),null;case 24:case 25:return null}throw Error(oe(156,t.tag))}function Gl(e,t){switch(ri(t),t.tag){case 1:return Ns(t.type)&&Ds(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Xi(),xs(js),xs(Ps),ao(),65536&(e=t.flags)&&!(128&e)?(t.flags=-65537&e|128,t):null;case 5:return eo(t),null;case 13:if(xs(to),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(oe(340));mi()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return xs(to),null;case 4:return Xi(),null;case 10:return Ii(t.type._context),null;case 22:case 23:return hc(),null;default:return null}}Rl=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Al=function(){},Nl=function(e,t,n,r){var a=e.memoizedProps;if(a!==r){e=t.stateNode,Yi(Ki.current);var s,i=null;switch(n){case"input":a=Qe(e,a),r=Qe(e,r),i=[];break;case"select":a=Me({},a,{value:void 0}),r=Me({},r,{value:void 0}),i=[];break;case"textarea":a=st(e,a),r=st(e,r),i=[];break;default:"function"!=typeof a.onClick&&"function"==typeof r.onClick&&(e.onclick=ts)}for(u in wt(n,r),n=null,a)if(!r.hasOwnProperty(u)&&a.hasOwnProperty(u)&&null!=a[u])if("style"===u){var o=a[u];for(s in o)o.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(ue.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var l=r[u];if(o=null!=a?a[u]:void 0,r.hasOwnProperty(u)&&l!==o&&(null!=l||null!=o))if("style"===u)if(o){for(s in o)!o.hasOwnProperty(s)||l&&l.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in l)l.hasOwnProperty(s)&&o[s]!==l[s]&&(n||(n={}),n[s]=l[s])}else n||(i||(i=[]),i.push(u,n)),n=l;else"dangerouslySetInnerHTML"===u?(l=l?l.__html:void 0,o=o?o.__html:void 0,null!=l&&o!==l&&(i=i||[]).push(u,l)):"children"===u?"string"!=typeof l&&"number"!=typeof l||(i=i||[]).push(u,""+l):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(ue.hasOwnProperty(u)?(null!=l&&"onScroll"===u&&za("scroll",e),i||o===l||(i=[])):(i=i||[]).push(u,l))}n&&(i=i||[]).push("style",n);var u=i;(t.updateQueue=u)&&(t.flags|=4)}},Dl=function(e,t,n,r){n!==r&&(t.flags|=4)};var Yl=!1,Ql=!1,Xl="function"==typeof WeakSet?WeakSet:Set,Zl=null;function eu(e,t){var n=e.ref;if(null!==n)if("function"==typeof n)try{n(null)}catch(r){Tc(e,t,r)}else n.current=null}function tu(e,t,n){try{n()}catch(r){Tc(e,t,r)}}var nu=!1;function ru(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var a=r=r.next;do{if((a.tag&e)===e){var s=a.destroy;a.destroy=void 0,void 0!==s&&tu(t,n,s)}a=a.next}while(a!==r)}}function au(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function su(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"==typeof t?t(e):t.current=e}}function iu(e){var t=e.alternate;null!==t&&(e.alternate=null,iu(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[ps],delete t[ms],delete t[ys],delete t[vs],delete t[bs])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ou(e){return 5===e.tag||3===e.tag||4===e.tag}function lu(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ou(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function uu(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!=(n=n._reactRootContainer)||null!==t.onclick||(t.onclick=ts));else if(4!==r&&null!==(e=e.child))for(uu(e,t,n),e=e.sibling;null!==e;)uu(e,t,n),e=e.sibling}function cu(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cu(e,t,n),e=e.sibling;null!==e;)cu(e,t,n),e=e.sibling}var du=null,hu=!1;function fu(e,t,n){for(n=n.child;null!==n;)pu(e,t,n),n=n.sibling}function pu(e,t,n){if(ln&&"function"==typeof ln.onCommitFiberUnmount)try{ln.onCommitFiberUnmount(on,n)}catch(o){}switch(n.tag){case 5:Ql||eu(n,t);case 6:var r=du,a=hu;du=null,fu(e,t,n),hu=a,null!==(du=r)&&(hu?(e=du,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):du.removeChild(n.stateNode));break;case 18:null!==du&&(hu?(e=du,n=n.stateNode,8===e.nodeType?cs(e.parentNode,n):1===e.nodeType&&cs(e,n),Wn(e)):cs(du,n.stateNode));break;case 4:r=du,a=hu,du=n.stateNode.containerInfo,hu=!0,fu(e,t,n),du=r,hu=a;break;case 0:case 11:case 14:case 15:if(!Ql&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){a=r=r.next;do{var s=a,i=s.destroy;s=s.tag,void 0!==i&&(2&s||4&s)&&tu(n,t,i),a=a.next}while(a!==r)}fu(e,t,n);break;case 1:if(!Ql&&(eu(n,t),"function"==typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){Tc(n,t,o)}fu(e,t,n);break;case 21:fu(e,t,n);break;case 22:1&n.mode?(Ql=(r=Ql)||null!==n.memoizedState,fu(e,t,n),Ql=r):fu(e,t,n);break;default:fu(e,t,n)}}function mu(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Xl),t.forEach(function(t){var r=Ic.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}}function gu(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var a=n[r];try{var s=e,i=t,o=i;e:for(;null!==o;){switch(o.tag){case 5:du=o.stateNode,hu=!1;break e;case 3:case 4:du=o.stateNode.containerInfo,hu=!0;break e}o=o.return}if(null===du)throw Error(oe(160));pu(s,i,a),du=null,hu=!1;var l=a.alternate;null!==l&&(l.return=null),a.return=null}catch(u){Tc(a,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)yu(t,e),t=t.sibling}function yu(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(gu(t,e),vu(e),4&r){try{ru(3,e,e.return),au(3,e)}catch(m){Tc(e,e.return,m)}try{ru(5,e,e.return)}catch(m){Tc(e,e.return,m)}}break;case 1:gu(t,e),vu(e),512&r&&null!==n&&eu(n,n.return);break;case 5:if(gu(t,e),vu(e),512&r&&null!==n&&eu(n,n.return),32&e.flags){var a=e.stateNode;try{pt(a,"")}catch(m){Tc(e,e.return,m)}}if(4&r&&null!=(a=e.stateNode)){var s=e.memoizedProps,i=null!==n?n.memoizedProps:s,o=e.type,l=e.updateQueue;if(e.updateQueue=null,null!==l)try{"input"===o&&"radio"===s.type&&null!=s.name&&Ze(a,s),_t(o,i);var u=_t(o,s);for(i=0;i<l.length;i+=2){var c=l[i],d=l[i+1];"style"===c?vt(a,d):"dangerouslySetInnerHTML"===c?ft(a,d):"children"===c?pt(a,d):_e(a,c,d,u)}switch(o){case"input":et(a,s);break;case"textarea":ot(a,s);break;case"select":var h=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!s.multiple;var f=s.value;null!=f?at(a,!!s.multiple,f,!1):h!==!!s.multiple&&(null!=s.defaultValue?at(a,!!s.multiple,s.defaultValue,!0):at(a,!!s.multiple,s.multiple?[]:"",!1))}a[ms]=s}catch(m){Tc(e,e.return,m)}}break;case 6:if(gu(t,e),vu(e),4&r){if(null===e.stateNode)throw Error(oe(162));a=e.stateNode,s=e.memoizedProps;try{a.nodeValue=s}catch(m){Tc(e,e.return,m)}}break;case 3:if(gu(t,e),vu(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Wn(t.containerInfo)}catch(m){Tc(e,e.return,m)}break;case 4:default:gu(t,e),vu(e);break;case 13:gu(t,e),vu(e),8192&(a=e.child).flags&&(s=null!==a.memoizedState,a.stateNode.isHidden=s,!s||null!==a.alternate&&null!==a.alternate.memoizedState||(Fu=Zt())),4&r&&mu(e);break;case 22:if(c=null!==n&&null!==n.memoizedState,1&e.mode?(Ql=(u=Ql)||c,gu(t,e),Ql=u):gu(t,e),vu(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!c&&1&e.mode)for(Zl=e,c=e.child;null!==c;){for(d=Zl=c;null!==Zl;){switch(f=(h=Zl).child,h.tag){case 0:case 11:case 14:case 15:ru(4,h,h.return);break;case 1:eu(h,h.return);var p=h.stateNode;if("function"==typeof p.componentWillUnmount){r=h,n=h.return;try{t=r,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(m){Tc(r,n,m)}}break;case 5:eu(h,h.return);break;case 22:if(null!==h.memoizedState){Su(d);continue}}null!==f?(f.return=h,Zl=f):Su(d)}c=c.sibling}e:for(c=null,d=e;;){if(5===d.tag){if(null===c){c=d;try{a=d.stateNode,u?"function"==typeof(s=a.style).setProperty?s.setProperty("display","none","important"):s.display="none":(o=d.stateNode,i=null!=(l=d.memoizedProps.style)&&l.hasOwnProperty("display")?l.display:null,o.style.display=yt("display",i))}catch(m){Tc(e,e.return,m)}}}else if(6===d.tag){if(null===c)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(m){Tc(e,e.return,m)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;c===d&&(c=null),d=d.return}c===d&&(c=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:gu(t,e),vu(e),4&r&&mu(e);case 21:}}function vu(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(ou(n)){var r=n;break e}n=n.return}throw Error(oe(160))}switch(r.tag){case 5:var a=r.stateNode;32&r.flags&&(pt(a,""),r.flags&=-33),cu(e,lu(e),a);break;case 3:case 4:var s=r.stateNode.containerInfo;uu(e,lu(e),s);break;default:throw Error(oe(161))}}catch(i){Tc(e,e.return,i)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function bu(e,t,n){Zl=e,wu(e)}function wu(e,t,n){for(var r=!!(1&e.mode);null!==Zl;){var a=Zl,s=a.child;if(22===a.tag&&r){var i=null!==a.memoizedState||Yl;if(!i){var o=a.alternate,l=null!==o&&null!==o.memoizedState||Ql;o=Yl;var u=Ql;if(Yl=i,(Ql=l)&&!u)for(Zl=a;null!==Zl;)l=(i=Zl).child,22===i.tag&&null!==i.memoizedState?ku(a):null!==l?(l.return=i,Zl=l):ku(a);for(;null!==s;)Zl=s,wu(s),s=s.sibling;Zl=a,Yl=o,Ql=u}_u(e)}else 8772&a.subtreeFlags&&null!==s?(s.return=a,Zl=s):_u(e)}}function _u(e){for(;null!==Zl;){var t=Zl;if(8772&t.flags){var n=t.alternate;try{if(8772&t.flags)switch(t.tag){case 0:case 11:case 15:Ql||au(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Ql)if(null===n)r.componentDidMount();else{var a=t.elementType===t.type?n.memoizedProps:al(t.type,n.memoizedProps);r.componentDidUpdate(a,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;null!==s&&Wi(t,s,r);break;case 3:var i=t.updateQueue;if(null!==i){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Wi(t,i,n)}break;case 5:var o=t.stateNode;if(null===n&&4&t.flags){n=o;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var c=u.memoizedState;if(null!==c){var d=c.dehydrated;null!==d&&Wn(d)}}}break;default:throw Error(oe(163))}Ql||512&t.flags&&su(t)}catch(h){Tc(t,t.return,h)}}if(t===e){Zl=null;break}if(null!==(n=t.sibling)){n.return=t.return,Zl=n;break}Zl=t.return}}function Su(e){for(;null!==Zl;){var t=Zl;if(t===e){Zl=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Zl=n;break}Zl=t.return}}function ku(e){for(;null!==Zl;){var t=Zl;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{au(4,t)}catch(l){Tc(t,n,l)}break;case 1:var r=t.stateNode;if("function"==typeof r.componentDidMount){var a=t.return;try{r.componentDidMount()}catch(l){Tc(t,a,l)}}var s=t.return;try{su(t)}catch(l){Tc(t,s,l)}break;case 5:var i=t.return;try{su(t)}catch(l){Tc(t,i,l)}}}catch(l){Tc(t,t.return,l)}if(t===e){Zl=null;break}var o=t.sibling;if(null!==o){o.return=t.return,Zl=o;break}Zl=t.return}}var Eu,Tu=Math.ceil,Cu=Se.ReactCurrentDispatcher,xu=Se.ReactCurrentOwner,Ou=Se.ReactCurrentBatchConfig,Iu=0,Pu=null,ju=null,Ru=0,Au=0,Nu=Cs(0),Du=0,$u=null,Lu=0,Uu=0,Mu=0,Bu=null,zu=null,Fu=0,qu=1/0,Hu=null,Wu=!1,Vu=null,Ku=null,Ju=!1,Gu=null,Yu=0,Qu=0,Xu=null,Zu=-1,ec=0;function tc(){return 6&Iu?Zt():-1!==Zu?Zu:Zu=Zt()}function nc(e){return 1&e.mode?2&Iu&&0!==Ru?Ru&-Ru:null!==yi.transition?(0===ec&&(ec=vn()),ec):0!==(e=Sn)?e:e=void 0===(e=window.event)?16:Zn(e.type):1}function rc(e,t,n,r){if(50<Qu)throw Qu=0,Xu=null,Error(oe(185));wn(e,n,r),2&Iu&&e===Pu||(e===Pu&&(!(2&Iu)&&(Uu|=n),4===Du&&lc(e,Ru)),ac(e,r),1===n&&0===Iu&&!(1&t.mode)&&(qu=Zt()+500,zs&&Hs()))}function ac(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,a=e.expirationTimes,s=e.pendingLanes;0<s;){var i=31-un(s),o=1<<i,l=a[i];-1===l?0!==(o&n)&&0===(o&r)||(a[i]=gn(o,t)):l<=t&&(e.expiredLanes|=o),s&=~o}}(e,t);var r=mn(e,e===Pu?Ru:0);if(0===r)null!==n&&Yt(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Yt(n),1===t)0===e.tag?function(e){zs=!0,qs(e)}(uc.bind(null,e)):qs(uc.bind(null,e)),ls(function(){!(6&Iu)&&Hs()}),n=null;else{switch(kn(r)){case 1:n=tn;break;case 4:n=nn;break;case 16:default:n=rn;break;case 536870912:n=sn}n=Pc(n,sc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function sc(e,t){if(Zu=-1,ec=0,6&Iu)throw Error(oe(327));var n=e.callbackNode;if(kc()&&e.callbackNode!==n)return null;var r=mn(e,e===Pu?Ru:0);if(0===r)return null;if(30&r||0!==(r&e.expiredLanes)||t)t=yc(e,r);else{t=r;var a=Iu;Iu|=2;var s=mc();for(Pu===e&&Ru===t||(Hu=null,qu=Zt()+500,fc(e,t));;)try{bc();break}catch(o){pc(e,o)}Oi(),Cu.current=s,Iu=a,null!==ju?t=0:(Pu=null,Ru=0,t=Du)}if(0!==t){if(2===t&&(0!==(a=yn(e))&&(r=a,t=ic(e,a))),1===t)throw n=$u,fc(e,0),lc(e,r),ac(e,Zt()),n;if(6===t)lc(e,r);else{if(a=e.current.alternate,!(30&r||function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var a=n[r],s=a.getSnapshot;a=a.value;try{if(!ua(s(),a))return!1}catch(i){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(a)||(t=yc(e,r),2===t&&(s=yn(e),0!==s&&(r=s,t=ic(e,s))),1!==t)))throw n=$u,fc(e,0),lc(e,r),ac(e,Zt()),n;switch(e.finishedWork=a,e.finishedLanes=r,t){case 0:case 1:throw Error(oe(345));case 2:case 5:Sc(e,zu,Hu);break;case 3:if(lc(e,r),(130023424&r)===r&&10<(t=Fu+500-Zt())){if(0!==mn(e,0))break;if(((a=e.suspendedLanes)&r)!==r){tc(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=ss(Sc.bind(null,e,zu,Hu),t);break}Sc(e,zu,Hu);break;case 4:if(lc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,a=-1;0<r;){var i=31-un(r);s=1<<i,(i=t[i])>a&&(a=i),r&=~s}if(r=a,10<(r=(120>(r=Zt()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Tu(r/1960))-r)){e.timeoutHandle=ss(Sc.bind(null,e,zu,Hu),r);break}Sc(e,zu,Hu);break;default:throw Error(oe(329))}}}return ac(e,Zt()),e.callbackNode===n?sc.bind(null,e):null}function ic(e,t){var n=Bu;return e.current.memoizedState.isDehydrated&&(fc(e,t).flags|=256),2!==(e=yc(e,t))&&(t=zu,zu=n,null!==t&&oc(t)),e}function oc(e){null===zu?zu=e:zu.push.apply(zu,e)}function lc(e,t){for(t&=~Mu,t&=~Uu,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-un(t),r=1<<n;e[n]=-1,t&=~r}}function uc(e){if(6&Iu)throw Error(oe(327));kc();var t=mn(e,0);if(!(1&t))return ac(e,Zt()),null;var n=yc(e,t);if(0!==e.tag&&2===n){var r=yn(e);0!==r&&(t=r,n=ic(e,r))}if(1===n)throw n=$u,fc(e,0),lc(e,t),ac(e,Zt()),n;if(6===n)throw Error(oe(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Sc(e,zu,Hu),ac(e,Zt()),null}function cc(e,t){var n=Iu;Iu|=1;try{return e(t)}finally{0===(Iu=n)&&(qu=Zt()+500,zs&&Hs())}}function dc(e){null!==Gu&&0===Gu.tag&&!(6&Iu)&&kc();var t=Iu;Iu|=1;var n=Ou.transition,r=Sn;try{if(Ou.transition=null,Sn=1,e)return e()}finally{Sn=r,Ou.transition=n,!(6&(Iu=t))&&Hs()}}function hc(){Au=Nu.current,xs(Nu)}function fc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,is(n)),null!==ju)for(n=ju.return;null!==n;){var r=n;switch(ri(r),r.tag){case 1:null!=(r=r.type.childContextTypes)&&Ds();break;case 3:Xi(),xs(js),xs(Ps),ao();break;case 5:eo(r);break;case 4:Xi();break;case 13:case 19:xs(to);break;case 10:Ii(r.type._context);break;case 22:case 23:hc()}n=n.return}if(Pu=e,ju=e=Nc(e.current,null),Ru=Au=t,Du=0,$u=null,Mu=Uu=Lu=0,zu=Bu=null,null!==Ai){for(t=0;t<Ai.length;t++)if(null!==(r=(n=Ai[t]).interleaved)){n.interleaved=null;var a=r.next,s=n.pending;if(null!==s){var i=s.next;s.next=a,r.next=i}n.pending=r}Ai=null}return e}function pc(e,t){for(;;){var n=ju;try{if(Oi(),so.current=el,ho){for(var r=lo.memoizedState;null!==r;){var a=r.queue;null!==a&&(a.pending=null),r=r.next}ho=!1}if(oo=0,co=uo=lo=null,fo=!1,po=0,xu.current=null,null===n||null===n.return){Du=1,$u=t,ju=null;break}e:{var s=e,i=n.return,o=n,l=t;if(t=Ru,o.flags|=32768,null!==l&&"object"==typeof l&&"function"==typeof l.then){var u=l,c=o,d=c.tag;if(!(1&c.mode||0!==d&&11!==d&&15!==d)){var h=c.alternate;h?(c.updateQueue=h.updateQueue,c.memoizedState=h.memoizedState,c.lanes=h.lanes):(c.updateQueue=null,c.memoizedState=null)}var f=yl(i);if(null!==f){f.flags&=-257,vl(f,i,o,0,t),1&f.mode&&gl(s,u,t),l=u;var p=(t=f).updateQueue;if(null===p){var m=new Set;m.add(l),t.updateQueue=m}else p.add(l);break e}if(!(1&t)){gl(s,u,t),gc();break e}l=Error(oe(426))}else if(ii&&1&o.mode){var g=yl(i);if(null!==g){!(65536&g.flags)&&(g.flags|=256),vl(g,i,o,0,t),gi(dl(l,o));break e}}s=l=dl(l,o),4!==Du&&(Du=2),null===Bu?Bu=[s]:Bu.push(s),s=i;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t,qi(s,pl(0,l,t));break e;case 1:o=l;var y=s.type,v=s.stateNode;if(!(128&s.flags||"function"!=typeof y.getDerivedStateFromError&&(null===v||"function"!=typeof v.componentDidCatch||null!==Ku&&Ku.has(v)))){s.flags|=65536,t&=-t,s.lanes|=t,qi(s,ml(s,o,t));break e}}s=s.return}while(null!==s)}_c(n)}catch(b){t=b,ju===n&&null!==n&&(ju=n=n.return);continue}break}}function mc(){var e=Cu.current;return Cu.current=el,null===e?el:e}function gc(){0!==Du&&3!==Du&&2!==Du||(Du=4),null===Pu||!(268435455&Lu)&&!(268435455&Uu)||lc(Pu,Ru)}function yc(e,t){var n=Iu;Iu|=2;var r=mc();for(Pu===e&&Ru===t||(Hu=null,fc(e,t));;)try{vc();break}catch(a){pc(e,a)}if(Oi(),Iu=n,Cu.current=r,null!==ju)throw Error(oe(261));return Pu=null,Ru=0,Du}function vc(){for(;null!==ju;)wc(ju)}function bc(){for(;null!==ju&&!Qt();)wc(ju)}function wc(e){var t=Eu(e.alternate,e,Au);e.memoizedProps=e.pendingProps,null===t?_c(e):ju=t,xu.current=null}function _c(e){var t=e;do{var n=t.alternate;if(e=t.return,32768&t.flags){if(null!==(n=Gl(n,t)))return n.flags&=32767,void(ju=n);if(null===e)return Du=6,void(ju=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}else if(null!==(n=Jl(n,t,Au)))return void(ju=n);if(null!==(t=t.sibling))return void(ju=t);ju=t=e}while(null!==t);0===Du&&(Du=5)}function Sc(e,t,n){var r=Sn,a=Ou.transition;try{Ou.transition=null,Sn=1,function(e,t,n,r){do{kc()}while(null!==Gu);if(6&Iu)throw Error(oe(327));n=e.finishedWork;var a=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(oe(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var a=31-un(n),s=1<<a;t[a]=0,r[a]=-1,e[a]=-1,n&=~s}}(e,s),e===Pu&&(ju=Pu=null,Ru=0),!(2064&n.subtreeFlags)&&!(2064&n.flags)||Ju||(Ju=!0,Pc(rn,function(){return kc(),null})),s=!!(15990&n.flags),!!(15990&n.subtreeFlags)||s){s=Ou.transition,Ou.transition=null;var i=Sn;Sn=1;var o=Iu;Iu|=4,xu.current=null,function(e,t){if(ns=Kn,ma(e=pa())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var a=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch(w){n=null;break e}var i=0,o=-1,l=-1,u=0,c=0,d=e,h=null;t:for(;;){for(var f;d!==n||0!==a&&3!==d.nodeType||(o=i+a),d!==s||0!==r&&3!==d.nodeType||(l=i+r),3===d.nodeType&&(i+=d.nodeValue.length),null!==(f=d.firstChild);)h=d,d=f;for(;;){if(d===e)break t;if(h===n&&++u===a&&(o=i),h===s&&++c===r&&(l=i),null!==(f=d.nextSibling))break;h=(d=h).parentNode}d=f}n=-1===o||-1===l?null:{start:o,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(rs={focusedElem:e,selectionRange:n},Kn=!1,Zl=t;null!==Zl;)if(e=(t=Zl).child,1028&t.subtreeFlags&&null!==e)e.return=t,Zl=e;else for(;null!==Zl;){t=Zl;try{var p=t.alternate;if(1024&t.flags)switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==p){var m=p.memoizedProps,g=p.memoizedState,y=t.stateNode,v=y.getSnapshotBeforeUpdate(t.elementType===t.type?m:al(t.type,m),g);y.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(oe(163))}}catch(w){Tc(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,Zl=e;break}Zl=t.return}p=nu,nu=!1}(e,n),yu(n,e),ga(rs),Kn=!!ns,rs=ns=null,e.current=n,bu(n),Xt(),Iu=o,Sn=i,Ou.transition=s}else e.current=n;if(Ju&&(Ju=!1,Gu=e,Yu=a),s=e.pendingLanes,0===s&&(Ku=null),function(e){if(ln&&"function"==typeof ln.onCommitFiberRoot)try{ln.onCommitFiberRoot(on,e,void 0,!(128&~e.current.flags))}catch(t){}}(n.stateNode),ac(e,Zt()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)a=t[n],r(a.value,{componentStack:a.stack,digest:a.digest});if(Wu)throw Wu=!1,e=Vu,Vu=null,e;!!(1&Yu)&&0!==e.tag&&kc(),s=e.pendingLanes,1&s?e===Xu?Qu++:(Qu=0,Xu=e):Qu=0,Hs()}(e,t,n,r)}finally{Ou.transition=a,Sn=r}return null}function kc(){if(null!==Gu){var e=kn(Yu),t=Ou.transition,n=Sn;try{if(Ou.transition=null,Sn=16>e?16:e,null===Gu)var r=!1;else{if(e=Gu,Gu=null,Yu=0,6&Iu)throw Error(oe(331));var a=Iu;for(Iu|=4,Zl=e.current;null!==Zl;){var s=Zl,i=s.child;if(16&Zl.flags){var o=s.deletions;if(null!==o){for(var l=0;l<o.length;l++){var u=o[l];for(Zl=u;null!==Zl;){var c=Zl;switch(c.tag){case 0:case 11:case 15:ru(8,c,s)}var d=c.child;if(null!==d)d.return=c,Zl=d;else for(;null!==Zl;){var h=(c=Zl).sibling,f=c.return;if(iu(c),c===u){Zl=null;break}if(null!==h){h.return=f,Zl=h;break}Zl=f}}}var p=s.alternate;if(null!==p){var m=p.child;if(null!==m){p.child=null;do{var g=m.sibling;m.sibling=null,m=g}while(null!==m)}}Zl=s}}if(2064&s.subtreeFlags&&null!==i)i.return=s,Zl=i;else e:for(;null!==Zl;){if(2048&(s=Zl).flags)switch(s.tag){case 0:case 11:case 15:ru(9,s,s.return)}var y=s.sibling;if(null!==y){y.return=s.return,Zl=y;break e}Zl=s.return}}var v=e.current;for(Zl=v;null!==Zl;){var b=(i=Zl).child;if(2064&i.subtreeFlags&&null!==b)b.return=i,Zl=b;else e:for(i=v;null!==Zl;){if(2048&(o=Zl).flags)try{switch(o.tag){case 0:case 11:case 15:au(9,o)}}catch(_){Tc(o,o.return,_)}if(o===i){Zl=null;break e}var w=o.sibling;if(null!==w){w.return=o.return,Zl=w;break e}Zl=o.return}}if(Iu=a,Hs(),ln&&"function"==typeof ln.onPostCommitFiberRoot)try{ln.onPostCommitFiberRoot(on,e)}catch(_){}r=!0}return r}finally{Sn=n,Ou.transition=t}}return!1}function Ec(e,t,n){e=zi(e,t=pl(0,t=dl(n,t),1),1),t=tc(),null!==e&&(wn(e,1,t),ac(e,t))}function Tc(e,t,n){if(3===e.tag)Ec(e,e,n);else for(;null!==t;){if(3===t.tag){Ec(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"==typeof t.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===Ku||!Ku.has(r))){t=zi(t,e=ml(t,e=dl(n,e),1),1),e=tc(),null!==t&&(wn(t,1,e),ac(t,e));break}}t=t.return}}function Cc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=tc(),e.pingedLanes|=e.suspendedLanes&n,Pu===e&&(Ru&n)===n&&(4===Du||3===Du&&(130023424&Ru)===Ru&&500>Zt()-Fu?fc(e,0):Mu|=n),ac(e,t)}function xc(e,t){0===t&&(1&e.mode?(t=fn,!(130023424&(fn<<=1))&&(fn=4194304)):t=1);var n=tc();null!==(e=$i(e,t))&&(wn(e,t,n),ac(e,n))}function Oc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),xc(e,n)}function Ic(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,a=e.memoizedState;null!==a&&(n=a.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(oe(314))}null!==r&&r.delete(t),xc(e,n)}function Pc(e,t){return Gt(e,t)}function jc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rc(e,t,n,r){return new jc(e,t,n,r)}function Ac(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Nc(e,t){var n=e.alternate;return null===n?((n=Rc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Dc(e,t,n,r,a,s){var i=2;if(r=e,"function"==typeof e)Ac(e)&&(i=1);else if("string"==typeof e)i=5;else e:switch(e){case Te:return $c(n.children,a,s,t);case Ce:i=8,a|=8;break;case xe:return(e=Rc(12,n,t,2|a)).elementType=xe,e.lanes=s,e;case je:return(e=Rc(13,n,t,a)).elementType=je,e.lanes=s,e;case Re:return(e=Rc(19,n,t,a)).elementType=Re,e.lanes=s,e;case De:return Lc(n,a,s,t);default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case Oe:i=10;break e;case Ie:i=9;break e;case Pe:i=11;break e;case Ae:i=14;break e;case Ne:i=16,r=null;break e}throw Error(oe(130,null==e?e:typeof e,""))}return(t=Rc(i,n,t,a)).elementType=e,t.type=r,t.lanes=s,t}function $c(e,t,n,r){return(e=Rc(7,e,r,t)).lanes=n,e}function Lc(e,t,n,r){return(e=Rc(22,e,r,t)).elementType=De,e.lanes=n,e.stateNode={isHidden:!1},e}function Uc(e,t,n){return(e=Rc(6,e,null,t)).lanes=n,e}function Mc(e,t,n){return(t=Rc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Bc(e,t,n,r,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=bn(0),this.expirationTimes=bn(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=bn(0),this.identifierPrefix=r,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function zc(e,t,n,r,a,s,i,o,l){return e=new Bc(e,t,n,o,l),1===t?(t=1,!0===s&&(t|=8)):t=0,s=Rc(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ui(s),e}function Fc(e){if(!e)return Is;e:{if(Ht(e=e._reactInternals)!==e||1!==e.tag)throw Error(oe(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ns(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(oe(171))}if(1===e.tag){var n=e.type;if(Ns(n))return Ls(e,n,t)}return t}function qc(e,t,n,r,a,s,i,o,l){return(e=zc(n,r,!0,e,0,s,0,o,l)).context=Fc(null),n=e.current,(s=Bi(r=tc(),a=nc(n))).callback=null!=t?t:null,zi(n,s,a),e.current.lanes=a,wn(e,a,r),ac(e,r),e}function Hc(e,t,n,r){var a=t.current,s=tc(),i=nc(a);return n=Fc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Bi(s,i)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=zi(a,t,i))&&(rc(e,a,i,s),Fi(e,a,i)),i}function Wc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Vc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Kc(e,t){Vc(e,t),(e=e.alternate)&&Vc(e,t)}Eu=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||js.current)wl=!0;else{if(0===(e.lanes&n)&&!(128&t.flags))return wl=!1,function(e,t,n){switch(t.tag){case 3:Pl(t),mi();break;case 5:Zi(t);break;case 1:Ns(t.type)&&Us(t);break;case 4:Qi(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,a=t.memoizedProps.value;Os(Ei,r._currentValue),r._currentValue=a;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Os(to,1&to.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Ul(e,t,n):(Os(to,1&to.current),null!==(e=Wl(e,t,n))?e.sibling:null);Os(to,1&to.current);break;case 19:if(r=0!==(n&t.childLanes),128&e.flags){if(r)return ql(e,t,n);t.flags|=128}if(null!==(a=t.memoizedState)&&(a.rendering=null,a.tail=null,a.lastEffect=null),Os(to,to.current),r)break;return null;case 22:case 23:return t.lanes=0,Tl(e,t,n)}return Wl(e,t,n)}(e,t,n);wl=!!(131072&e.flags)}else wl=!1,ii&&1048576&t.flags&&ti(t,Js,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Hl(e,t),e=t.pendingProps;var a=As(t,Ps.current);ji(t,n),a=vo(null,t,r,e,a,n);var s=bo();return t.flags|=1,"object"==typeof a&&null!==a&&"function"==typeof a.render&&void 0===a.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ns(r)?(s=!0,Us(t)):s=!1,t.memoizedState=null!==a.state&&void 0!==a.state?a.state:null,Ui(t),a.updater=il,t.stateNode=a,a._reactInternals=t,cl(t,r,e,n),t=Il(null,t,r,!0,s,n)):(t.tag=0,ii&&s&&ni(t),_l(null,t,a,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Hl(e,t),e=t.pendingProps,r=(a=r._init)(r._payload),t.type=r,a=t.tag=function(e){if("function"==typeof e)return Ac(e)?1:0;if(null!=e){if((e=e.$$typeof)===Pe)return 11;if(e===Ae)return 14}return 2}(r),e=al(r,e),a){case 0:t=xl(null,t,r,e,n);break e;case 1:t=Ol(null,t,r,e,n);break e;case 11:t=Sl(null,t,r,e,n);break e;case 14:t=kl(null,t,r,al(r.type,e),n);break e}throw Error(oe(306,r,""))}return t;case 0:return r=t.type,a=t.pendingProps,xl(e,t,r,a=t.elementType===r?a:al(r,a),n);case 1:return r=t.type,a=t.pendingProps,Ol(e,t,r,a=t.elementType===r?a:al(r,a),n);case 3:e:{if(Pl(t),null===e)throw Error(oe(387));r=t.pendingProps,a=(s=t.memoizedState).element,Mi(e,t),Hi(t,r,null,n);var i=t.memoizedState;if(r=i.element,s.isDehydrated){if(s={element:r,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},t.updateQueue.baseState=s,t.memoizedState=s,256&t.flags){t=jl(e,t,r,n,a=dl(Error(oe(423)),t));break e}if(r!==a){t=jl(e,t,r,n,a=dl(Error(oe(424)),t));break e}for(si=ds(t.stateNode.containerInfo.firstChild),ai=t,ii=!0,oi=null,n=ki(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(mi(),r===a){t=Wl(e,t,n);break e}_l(e,t,r,n)}t=t.child}return t;case 5:return Zi(t),null===e&&di(t),r=t.type,a=t.pendingProps,s=null!==e?e.memoizedProps:null,i=a.children,as(r,a)?i=null:null!==s&&as(r,s)&&(t.flags|=32),Cl(e,t),_l(e,t,i,n),t.child;case 6:return null===e&&di(t),null;case 13:return Ul(e,t,n);case 4:return Qi(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Si(t,null,r,n):_l(e,t,r,n),t.child;case 11:return r=t.type,a=t.pendingProps,Sl(e,t,r,a=t.elementType===r?a:al(r,a),n);case 7:return _l(e,t,t.pendingProps,n),t.child;case 8:case 12:return _l(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,a=t.pendingProps,s=t.memoizedProps,i=a.value,Os(Ei,r._currentValue),r._currentValue=i,null!==s)if(ua(s.value,i)){if(s.children===a.children&&!js.current){t=Wl(e,t,n);break e}}else for(null!==(s=t.child)&&(s.return=t);null!==s;){var o=s.dependencies;if(null!==o){i=s.child;for(var l=o.firstContext;null!==l;){if(l.context===r){if(1===s.tag){(l=Bi(-1,n&-n)).tag=2;var u=s.updateQueue;if(null!==u){var c=(u=u.shared).pending;null===c?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),Pi(s.return,n,t),o.lanes|=n;break}l=l.next}}else if(10===s.tag)i=s.type===t.type?null:s.child;else if(18===s.tag){if(null===(i=s.return))throw Error(oe(341));i.lanes|=n,null!==(o=i.alternate)&&(o.lanes|=n),Pi(i,n,t),i=s.sibling}else i=s.child;if(null!==i)i.return=s;else for(i=s;null!==i;){if(i===t){i=null;break}if(null!==(s=i.sibling)){s.return=i.return,i=s;break}i=i.return}s=i}_l(e,t,a.children,n),t=t.child}return t;case 9:return a=t.type,r=t.pendingProps.children,ji(t,n),r=r(a=Ri(a)),t.flags|=1,_l(e,t,r,n),t.child;case 14:return a=al(r=t.type,t.pendingProps),kl(e,t,r,a=al(r.type,a),n);case 15:return El(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:al(r,a),Hl(e,t),t.tag=1,Ns(r)?(e=!0,Us(t)):e=!1,ji(t,n),ll(t,r,a),cl(t,r,a,n),Il(null,t,r,!0,e,n);case 19:return ql(e,t,n);case 22:return Tl(e,t,n)}throw Error(oe(156,t.tag))};var Jc="function"==typeof reportError?reportError:function(e){};function Gc(e){this._internalRoot=e}function Yc(e){this._internalRoot=e}function Qc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Xc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zc(){}function ed(e,t,n,r,a){var s=n._reactRootContainer;if(s){var i=s;if("function"==typeof a){var o=a;a=function(){var e=Wc(i);o.call(e)}}Hc(t,i,e,a)}else i=function(e,t,n,r,a){if(a){if("function"==typeof r){var s=r;r=function(){var e=Wc(i);s.call(e)}}var i=qc(t,r,e,0,null,!1,0,"",Zc);return e._reactRootContainer=i,e[gs]=i.current,Ha(8===e.nodeType?e.parentNode:e),dc(),i}for(;a=e.lastChild;)e.removeChild(a);if("function"==typeof r){var o=r;r=function(){var e=Wc(l);o.call(e)}}var l=zc(e,0,!1,null,0,!1,0,"",Zc);return e._reactRootContainer=l,e[gs]=l.current,Ha(8===e.nodeType?e.parentNode:e),dc(function(){Hc(t,l,n,r)}),l}(n,t,e,a,r);return Wc(i)}Yc.prototype.render=Gc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(oe(409));Hc(e,t,null,null)},Yc.prototype.unmount=Gc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;dc(function(){Hc(null,e,null,null)}),t[gs]=null}},Yc.prototype.unstable_scheduleHydration=function(e){if(e){var t=xn();e={blockedOn:null,target:e,priority:t};for(var n=0;n<$n.length&&0!==t&&t<$n[n].priority;n++);$n.splice(n,0,e),0===n&&Bn(e)}},En=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=pn(t.pendingLanes);0!==n&&(_n(t,1|n),ac(t,Zt()),!(6&Iu)&&(qu=Zt()+500,Hs()))}break;case 13:dc(function(){var t=$i(e,1);if(null!==t){var n=tc();rc(t,e,1,n)}}),Kc(e,1)}},Tn=function(e){if(13===e.tag){var t=$i(e,134217728);if(null!==t)rc(t,e,134217728,tc());Kc(e,134217728)}},Cn=function(e){if(13===e.tag){var t=nc(e),n=$i(e,t);if(null!==n)rc(n,e,t,tc());Kc(e,t)}},xn=function(){return Sn},On=function(e,t){var n=Sn;try{return Sn=e,t()}finally{Sn=n}},Et=function(e,t,n){switch(t){case"input":if(et(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var a=ks(r);if(!a)throw Error(oe(90));Ge(r),et(r,a)}}}break;case"textarea":ot(e,n);break;case"select":null!=(t=n.value)&&at(e,!!n.multiple,t,!1)}},Pt=cc,jt=dc;var td={usingClientEntryPoint:!1,Events:[_s,Ss,ks,Ot,It,cc]},nd={findFiberByHostInstance:ws,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},rd={bundleType:nd.bundleType,version:nd.version,rendererPackageName:nd.rendererPackageName,rendererConfig:nd.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Se.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Kt(e))?null:e.stateNode},findFiberByHostInstance:nd.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ad=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ad.isDisabled&&ad.supportsFiber)try{on=ad.inject(rd),ln=ad}catch(ht){}}te.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=td,te.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Qc(t))throw Error(oe(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:Ee,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},te.createRoot=function(e,t){if(!Qc(e))throw Error(oe(299));var n=!1,r="",a=Jc;return null!=t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(a=t.onRecoverableError)),t=zc(e,1,!1,null,0,n,0,r,a),e[gs]=t.current,Ha(8===e.nodeType?e.parentNode:e),new Gc(t)},te.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(oe(188));throw e=Object.keys(e).join(","),Error(oe(268,e))}return e=null===(e=Kt(t))?null:e.stateNode},te.flushSync=function(e){return dc(e)},te.hydrate=function(e,t,n){if(!Xc(t))throw Error(oe(200));return ed(null,e,t,!0,n)},te.hydrateRoot=function(e,t,n){if(!Qc(e))throw Error(oe(405));var r=null!=n&&n.hydratedSources||null,a=!1,s="",i=Jc;if(null!=n&&(!0===n.unstable_strictMode&&(a=!0),void 0!==n.identifierPrefix&&(s=n.identifierPrefix),void 0!==n.onRecoverableError&&(i=n.onRecoverableError)),t=qc(t,null,e,1,null!=n?n:null,a,0,s,i),e[gs]=t.current,Ha(e),r)for(e=0;e<r.length;e++)a=(a=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,a]:t.mutableSourceEagerHydrationData.push(n,a);return new Yc(t)},te.render=function(e,t,n){if(!Xc(t))throw Error(oe(200));return ed(null,e,t,!1,n)},te.unmountComponentAtNode=function(e){if(!Xc(e))throw Error(oe(40));return!!e._reactRootContainer&&(dc(function(){ed(null,null,e,!1,function(){e._reactRootContainer=null,e[gs]=null})}),!0)},te.unstable_batchedUpdates=cc,te.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Xc(n))throw Error(oe(200));if(null==e||void 0===e._reactInternals)throw Error(oe(38));return ed(e,t,n,!1,r)},te.version="18.3.1-next-f1338f8080-20240426",function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){}}(),ee.exports=te;var sd=ee.exports,id=sd;Z.createRoot=id.createRoot,Z.hydrateRoot=id.hydrateRoot;const od=()=>{},ld=e=>{},ud=(e,t={})=>{},cd=Object.freeze(Object.defineProperty({__proto__:null,captureException:ud,initSentry:od,setUser:ld},Symbol.toStringTag,{value:"Module"})),dd={},hd=function(e,t,n){let r=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const e=document.querySelector("meta[property=csp-nonce]"),n=(null==e?void 0:e.nonce)||(null==e?void 0:e.getAttribute("nonce"));r=Promise.allSettled(t.map(e=>{if((e=function(e){return"/gogobus/"+e}(e))in dd)return;dd[e]=!0;const t=e.endsWith(".css"),r=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${r}`))return;const a=document.createElement("link");return a.rel=t?"stylesheet":"modulepreload",t||(a.as="script"),a.crossOrigin="",a.href=e,n&&a.setAttribute("nonce",n),document.head.appendChild(a),t?new Promise((t,n)=>{a.addEventListener("load",t),a.addEventListener("error",()=>n(new Error(`Unable to preload CSS for ${e}`)))}):void 0}))}function a(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return r.then(t=>{for(const e of t||[])"rejected"===e.status&&a(e.reason);return e().catch(a)})},fd=e=>{if(!e)return e;if("string"==typeof e)return e.replace(/password["\s:=]+[^,\s}]+/gi,"password: [REDACTED]").replace(/token["\s:=]+[^,\s}]+/gi,"token: [REDACTED]").replace(/key["\s:=]+[^,\s}]+/gi,"key: [REDACTED]").replace(/secret["\s:=]+[^,\s}]+/gi,"secret: [REDACTED]");if("object"==typeof e){const t=Array.isArray(e)?[]:{};for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)){const r=n.toLowerCase();r.includes("password")||r.includes("token")||r.includes("secret")||r.includes("key")||r.includes("auth")?t[n]="[REDACTED]":t[n]=fd(e[n])}return t}return e},pd=(e,t=null)=>{},md=(e,t=null)=>{t&&fd(t)},gd=(e,t=null)=>{t&&fd(t);t instanceof Error&&hd(async()=>{const{captureException:e}=await Promise.resolve().then(()=>cd);return{captureException:e}},void 0).then(({captureException:e})=>{e(t)}).catch(()=>{})},yd=(e,t={})=>{window.gtag&&window.gtag("event",e,{...t,timestamp:(new Date).toISOString()})},vd=(e="email")=>{yd("signup_completed",{method:e,event_category:"engagement",event_label:"User Registration"})},bd=(e="email")=>{yd("login",{method:e,event_category:"engagement"})},wd=e=>{yd("booking_completed",{booking_id:e.id,total_amount:e.total_amount,payment_method:e.payment_method,event_category:"booking",value:e.total_amount,currency:"BWP"})},_d={BASE_URL:"/gogobus/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_GOOGLE_AI_API_KEY:"AIzaSyDeHmlwvIvw3764l_Cftv9kYWDUbHbH02A"},Sd={VITE_SUPABASE_URL:"Supabase project URL",VITE_SUPABASE_ANON_KEY:"Supabase anonymous key"},kd={VITE_SENTRY_DSN:"Sentry DSN for error tracking",VITE_GA4_MEASUREMENT_ID:"Google Analytics 4 Measurement ID",VITE_DPO_COMPANY_TOKEN:"DPO Pay company token",VITE_DPO_SERVICE_TYPE:"DPO Pay service type",VITE_ORANGE_MERCHANT_KEY:"Orange Money merchant key"},Ed=()=>{const e=[],t=[];for(const[n,r]of Object.entries(Sd)){const t=_d[n];t&&""!==t.trim()||e.push(`Missing required environment variable: ${n} (${r})`)}for(const[n,r]of Object.entries(kd)){const e=_d[n];e&&""!==e.trim()||t.push(`Missing recommended environment variable: ${n} (${r})`)}return{valid:0===e.length,errors:e,warnings:t}},Td=e=>{let t=100;return t-=20*e.errors.length,t-=5*e.warnings.length,Math.max(0,Math.min(100,t))},Cd=()=>{const e=(()=>{const e=Ed();return{ready:e.valid,score:Td(e),errors:e.errors,warnings:e.warnings,checks:{environment:e.valid,supabase:!1,monitoring:!1,analytics:!1,payments:!1}}})();e.errors.length>0&&gd(0,{errors:e.errors}),e.warnings.length>0&&md(0,{warnings:e.warnings})};
/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */
function xd(){return xd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},xd.apply(this,arguments)}var Od,Id;(Id=Od||(Od={})).Pop="POP",Id.Push="PUSH",Id.Replace="REPLACE";const Pd="popstate";function jd(e){return void 0===e&&(e={}),function(e,t,n,r){void 0===r&&(r={});let{window:a=document.defaultView,v5Compat:s=!1}=r,i=a.history,o=Od.Pop,l=null,u=c();null==u&&(u=0,i.replaceState(xd({},i.state,{idx:u}),""));function c(){return(i.state||{idx:null}).idx}function d(){o=Od.Pop;let e=c(),t=null==e?null:e-u;u=e,l&&l({action:o,location:m.location,delta:t})}function h(e,t){o=Od.Push;let r=Dd(m.location,e,t);n&&n(r,e),u=c()+1;let d=Nd(r,u),h=m.createHref(r);try{i.pushState(d,"",h)}catch(f){if(f instanceof DOMException&&"DataCloneError"===f.name)throw f;a.location.assign(h)}s&&l&&l({action:o,location:m.location,delta:1})}function f(e,t){o=Od.Replace;let r=Dd(m.location,e,t);n&&n(r,e),u=c();let a=Nd(r,u),d=m.createHref(r);i.replaceState(a,"",d),s&&l&&l({action:o,location:m.location,delta:0})}function p(e){let t="null"!==a.location.origin?a.location.origin:a.location.href,n="string"==typeof e?e:$d(e);return n=n.replace(/ $/,"%20"),Rd(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}let m={get action(){return o},get location(){return e(a,i)},listen(e){if(l)throw new Error("A history only accepts one active listener");return a.addEventListener(Pd,d),l=e,()=>{a.removeEventListener(Pd,d),l=null}},createHref:e=>t(a,e),createURL:p,encodeLocation(e){let t=p(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:h,replace:f,go:e=>i.go(e)};return m}(function(e,t){let{pathname:n="/",search:r="",hash:a=""}=Ld(e.location.hash.substr(1));return n.startsWith("/")||n.startsWith(".")||(n="/"+n),Dd("",{pathname:n,search:r,hash:a},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){let n=e.document.querySelector("base"),r="";if(n&&n.getAttribute("href")){let t=e.location.href,n=t.indexOf("#");r=-1===n?t:t.slice(0,n)}return r+"#"+("string"==typeof t?t:$d(t))},function(e,t){Ad("/"===e.pathname.charAt(0),"relative pathnames are not supported in hash history.push("+JSON.stringify(t)+")")},e)}function Rd(e,t){if(!1===e||null==e)throw new Error(t)}function Ad(e,t){if(!e)try{throw new Error(t)}catch(n){}}function Nd(e,t){return{usr:e.state,key:e.key,idx:t}}function Dd(e,t,n,r){return void 0===n&&(n=null),xd({pathname:"string"==typeof e?e:e.pathname,search:"",hash:""},"string"==typeof t?Ld(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function $d(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function Ld(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}var Ud,Md;function Bd(e,t,n){return void 0===n&&(n="/"),function(e,t,n){let r="string"==typeof t?Ld(t):t,a=eh(r.pathname||"/",n);if(null==a)return null;let s=zd(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every((e,n)=>e===t[n]);return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(s);let i=null;for(let o=0;null==i&&o<s.length;++o){let e=Zd(a);i=Qd(s[o],e)}return i}(e,t,n)}function zd(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");let a=(e,a,s)=>{let i={relativePath:void 0===s?e.path||"":s,caseSensitive:!0===e.caseSensitive,childrenIndex:a,route:e};i.relativePath.startsWith("/")&&(Rd(i.relativePath.startsWith(r),'Absolute route path "'+i.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),i.relativePath=i.relativePath.slice(r.length));let o=oh([r,i.relativePath]),l=n.concat(i);e.children&&e.children.length>0&&(Rd(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+o+'".'),zd(e.children,t,l,o)),(null!=e.path||e.index)&&t.push({path:o,score:Yd(o,e.index),routesMeta:l})};return e.forEach((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let r of Fd(e.path))a(e,t,r);else a(e,t)}),t}function Fd(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,a=n.endsWith("?"),s=n.replace(/\?$/,"");if(0===r.length)return a?[s,""]:[s];let i=Fd(r.join("/")),o=[];return o.push(...i.map(e=>""===e?s:[s,e].join("/"))),a&&o.push(...i),o.map(t=>e.startsWith("/")&&""===t?"/":t)}(Md=Ud||(Ud={})).data="data",Md.deferred="deferred",Md.redirect="redirect",Md.error="error";const qd=/^:[\w-]+$/,Hd=3,Wd=2,Vd=1,Kd=10,Jd=-2,Gd=e=>"*"===e;function Yd(e,t){let n=e.split("/"),r=n.length;return n.some(Gd)&&(r+=Jd),t&&(r+=Wd),n.filter(e=>!Gd(e)).reduce((e,t)=>e+(qd.test(t)?Hd:""===t?Vd:Kd),r)}function Qd(e,t,n){let{routesMeta:r}=e,a={},s="/",i=[];for(let o=0;o<r.length;++o){let e=r[o],n=o===r.length-1,l="/"===s?t:t.slice(s.length)||"/",u=Xd({path:e.relativePath,caseSensitive:e.caseSensitive,end:n},l),c=e.route;if(!u)return null;Object.assign(a,u.params),i.push({params:a,pathname:oh([s,u.pathname]),pathnameBase:lh(oh([s,u.pathnameBase])),route:c}),"/"!==u.pathnameBase&&(s=oh([s,u.pathnameBase]))}return i}function Xd(e,t){"string"==typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);Ad("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)"));e.endsWith("*")?(r.push({paramName:"*"}),a+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?a+="\\/*$":""!==e&&"/"!==e&&(a+="(?:(?=\\/|$))");let s=new RegExp(a,t?void 0:"i");return[s,r]}(e.path,e.caseSensitive,e.end),a=t.match(n);if(!a)return null;let s=a[0],i=s.replace(/(.)\/+$/,"$1"),o=a.slice(1);return{params:r.reduce((e,t,n)=>{let{paramName:r,isOptional:a}=t;if("*"===r){let e=o[n]||"";i=s.slice(0,s.length-e.length).replace(/(.)\/+$/,"$1")}const l=o[n];return e[r]=a&&!l?void 0:(l||"").replace(/%2F/g,"/"),e},{}),pathname:s,pathnameBase:i,pattern:e}}function Zd(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return Ad(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function eh(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}const th=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function nh(e,t){void 0===t&&(t="/");let n,{pathname:r,search:a="",hash:s=""}="string"==typeof e?Ld(e):e;if(r)if(i=r,th.test(i))n=r;else{if(r.includes("//")){let e=r;r=r.replace(/\/\/+/g,"/"),Ad(!1,"Pathnames cannot have embedded double slashes - normalizing "+e+" -> "+r)}n=r.startsWith("/")?rh(r.substring(1),"/"):rh(r,t)}else n=t;var i;return{pathname:n,search:uh(a),hash:ch(s)}}function rh(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)}),n.length>1?n.join("/"):"/"}function ah(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function sh(e,t){let n=function(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}(e);return t?n.map((e,t)=>t===n.length-1?e.pathname:e.pathnameBase):n.map(e=>e.pathnameBase)}function ih(e,t,n,r){let a;void 0===r&&(r=!1),"string"==typeof e?a=Ld(e):(a=xd({},e),Rd(!a.pathname||!a.pathname.includes("?"),ah("?","pathname","search",a)),Rd(!a.pathname||!a.pathname.includes("#"),ah("#","pathname","hash",a)),Rd(!a.search||!a.search.includes("#"),ah("#","search","hash",a)));let s,i=""===e||""===a.pathname,o=i?"/":a.pathname;if(null==o)s=n;else{let e=t.length-1;if(!r&&o.startsWith("..")){let t=o.split("/");for(;".."===t[0];)t.shift(),e-=1;a.pathname=t.join("/")}s=e>=0?t[e]:"/"}let l=nh(a,s),u=o&&"/"!==o&&o.endsWith("/"),c=(i||"."===o)&&n.endsWith("/");return l.pathname.endsWith("/")||!u&&!c||(l.pathname+="/"),l}const oh=e=>e.join("/").replace(/\/\/+/g,"/"),lh=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),uh=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",ch=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";const dh=["post","put","patch","delete"];new Set(dh);const hh=["get",...dh];
/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */
function fh(){return fh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},fh.apply(this,arguments)}new Set(hh);const ph=F.createContext(null),mh=F.createContext(null),gh=F.createContext(null),yh=F.createContext(null),vh=F.createContext({outlet:null,matches:[],isDataRoute:!1}),bh=F.createContext(null);function wh(){return null!=F.useContext(yh)}function _h(){return wh()||Rd(!1),F.useContext(yh).location}function Sh(e){F.useContext(gh).static||F.useLayoutEffect(e)}function kh(){let{isDataRoute:e}=F.useContext(vh);return e?function(){let{router:e}=function(){let e=F.useContext(ph);return e||Rd(!1),e}(jh.UseNavigateStable),t=Ah(Rh.UseNavigateStable),n=F.useRef(!1);return Sh(()=>{n.current=!0}),F.useCallback(function(r,a){void 0===a&&(a={}),n.current&&("number"==typeof r?e.navigate(r):e.navigate(r,fh({fromRouteId:t},a)))},[e,t])}():function(){wh()||Rd(!1);let e=F.useContext(ph),{basename:t,future:n,navigator:r}=F.useContext(gh),{matches:a}=F.useContext(vh),{pathname:s}=_h(),i=JSON.stringify(sh(a,n.v7_relativeSplatPath)),o=F.useRef(!1);return Sh(()=>{o.current=!0}),F.useCallback(function(n,a){if(void 0===a&&(a={}),!o.current)return;if("number"==typeof n)return void r.go(n);let l=ih(n,JSON.parse(i),s,"path"===a.relative);null==e&&"/"!==t&&(l.pathname="/"===l.pathname?t:oh([t,l.pathname])),(a.replace?r.replace:r.push)(l,a.state,a)},[t,r,i,s,e])}()}function Eh(){let{matches:e}=F.useContext(vh),t=e[e.length-1];return t?t.params:{}}function Th(e,t){let{relative:n}=void 0===t?{}:t,{future:r}=F.useContext(gh),{matches:a}=F.useContext(vh),{pathname:s}=_h(),i=JSON.stringify(sh(a,r.v7_relativeSplatPath));return F.useMemo(()=>ih(e,JSON.parse(i),s,"path"===n),[e,i,s,n])}function Ch(e,t){return function(e,t,n,r){wh()||Rd(!1);let{navigator:a}=F.useContext(gh),{matches:s}=F.useContext(vh),i=s[s.length-1],o=i?i.params:{};!i||i.pathname;let l=i?i.pathnameBase:"/";i&&i.route;let u,c=_h();if(t){var d;let e="string"==typeof t?Ld(t):t;"/"===l||(null==(d=e.pathname)?void 0:d.startsWith(l))||Rd(!1),u=e}else u=c;let h=u.pathname||"/",f=h;if("/"!==l){let e=l.replace(/^\//,"").split("/");f="/"+h.replace(/^\//,"").split("/").slice(e.length).join("/")}let p=Bd(e,{pathname:f}),m=function(e,t,n,r){var a;void 0===t&&(t=[]);void 0===n&&(n=null);void 0===r&&(r=null);if(null==e){var s;if(!n)return null;if(n.errors)e=n.matches;else{if(!(null!=(s=r)&&s.v7_partialHydration&&0===t.length&&!n.initialized&&n.matches.length>0))return null;e=n.matches}}let i=e,o=null==(a=n)?void 0:a.errors;if(null!=o){let e=i.findIndex(e=>e.route.id&&void 0!==(null==o?void 0:o[e.route.id]));e>=0||Rd(!1),i=i.slice(0,Math.min(i.length,e+1))}let l=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let c=0;c<i.length;c++){let e=i[c];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(u=c),e.route.id){let{loaderData:t,errors:r}=n,a=e.route.loader&&void 0===t[e.route.id]&&(!r||void 0===r[e.route.id]);if(e.route.lazy||a){l=!0,i=u>=0?i.slice(0,u+1):[i[0]];break}}}return i.reduceRight((e,r,a)=>{let s,c=!1,d=null,h=null;var f;n&&(s=o&&r.route.id?o[r.route.id]:void 0,d=r.route.errorElement||Oh,l&&(u<0&&0===a?(Nh[f="route-fallback"]||(Nh[f]=!0),c=!0,h=null):u===a&&(c=!0,h=r.route.hydrateFallbackElement||null)));let p=t.concat(i.slice(0,a+1)),m=()=>{let t;return t=s?d:c?h:r.route.Component?F.createElement(r.route.Component,null):r.route.element?r.route.element:e,F.createElement(Ph,{match:r,routeContext:{outlet:e,matches:p,isDataRoute:null!=n},children:t})};return n&&(r.route.ErrorBoundary||r.route.errorElement||0===a)?F.createElement(Ih,{location:n.location,revalidation:n.revalidation,component:d,error:s,children:m(),routeContext:{outlet:null,matches:p,isDataRoute:!0}}):m()},null)}(p&&p.map(e=>Object.assign({},e,{params:Object.assign({},o,e.params),pathname:oh([l,a.encodeLocation?a.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?l:oh([l,a.encodeLocation?a.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})),s,n,r);if(t&&m)return F.createElement(yh.Provider,{value:{location:fh({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:Od.Pop}},m);return m}(e,t)}function xh(){let e=function(){var e;let t=F.useContext(bh),n=function(){let e=F.useContext(mh);return e||Rd(!1),e}(),r=Ah();if(void 0!==t)return t;return null==(e=n.errors)?void 0:e[r]}(),t=function(e){return null!=e&&"number"==typeof e.status&&"string"==typeof e.statusText&&"boolean"==typeof e.internal&&"data"in e}(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return F.createElement(F.Fragment,null,F.createElement("h2",null,"Unexpected Application Error!"),F.createElement("h3",{style:{fontStyle:"italic"}},t),n?F.createElement("pre",{style:r},n):null,null)}const Oh=F.createElement(xh,null);class Ih extends F.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){}render(){return void 0!==this.state.error?F.createElement(vh.Provider,{value:this.props.routeContext},F.createElement(bh.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Ph(e){let{routeContext:t,match:n,children:r}=e,a=F.useContext(ph);return a&&a.static&&a.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=n.route.id),F.createElement(vh.Provider,{value:t},r)}var jh=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(jh||{}),Rh=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Rh||{});function Ah(e){let t=function(){let e=F.useContext(vh);return e||Rd(!1),e}(),n=t.matches[t.matches.length-1];return n.route.id||Rd(!1),n.route.id}const Nh={};function Dh(e){let{to:t,replace:n,state:r,relative:a}=e;wh()||Rd(!1);let{future:s,static:i}=F.useContext(gh),{matches:o}=F.useContext(vh),{pathname:l}=_h(),u=kh(),c=ih(t,sh(o,s.v7_relativeSplatPath),l,"path"===a),d=JSON.stringify(c);return F.useEffect(()=>u(JSON.parse(d),{replace:n,state:r,relative:a}),[u,d,a,n,r]),null}function $h(e){Rd(!1)}function Lh(e){let{basename:t="/",children:n=null,location:r,navigationType:a=Od.Pop,navigator:s,static:i=!1,future:o}=e;wh()&&Rd(!1);let l=t.replace(/^\/*/,"/"),u=F.useMemo(()=>({basename:l,navigator:s,static:i,future:fh({v7_relativeSplatPath:!1},o)}),[l,o,s,i]);"string"==typeof r&&(r=Ld(r));let{pathname:c="/",search:d="",hash:h="",state:f=null,key:p="default"}=r,m=F.useMemo(()=>{let e=eh(c,l);return null==e?null:{location:{pathname:e,search:d,hash:h,state:f,key:p},navigationType:a}},[l,c,d,h,f,p,a]);return null==m?null:F.createElement(gh.Provider,{value:u},F.createElement(yh.Provider,{children:n,value:m}))}function Uh(e){let{children:t,location:n}=e;return Ch(Mh(t),n)}function Mh(e,t){void 0===t&&(t=[]);let n=[];return F.Children.forEach(e,(e,r)=>{if(!F.isValidElement(e))return;let a=[...t,r];if(e.type===F.Fragment)return void n.push.apply(n,Mh(e.props.children,a));e.type!==$h&&Rd(!1),e.props.index&&e.props.children&&Rd(!1);let s={id:e.props.id||a.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(s.children=Mh(e.props.children,a)),n.push(s)}),n}
/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Bh(){return Bh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Bh.apply(this,arguments)}function zh(e){return void 0===e&&(e=""),new URLSearchParams("string"==typeof e||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(e=>[n,e]):[[n,r]])},[]))}new Promise(()=>{});const Fh=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"];try{window.__reactRouterVersion="6"}catch(Jw){}const qh=H.startTransition;function Hh(e){let{basename:t,children:n,future:r,window:a}=e,s=F.useRef();null==s.current&&(s.current=jd({window:a,v5Compat:!0}));let i=s.current,[o,l]=F.useState({action:i.action,location:i.location}),{v7_startTransition:u}=r||{},c=F.useCallback(e=>{u&&qh?qh(()=>l(e)):l(e)},[l,u]);return F.useLayoutEffect(()=>i.listen(c),[i,c]),F.useEffect(()=>{return null==(e=r)||e.v7_startTransition,void(null==e||e.v7_relativeSplatPath);var e},[r]),F.createElement(Lh,{basename:t,children:n,location:o.location,navigationType:o.action,navigator:i,future:r})}const Wh="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement,Vh=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Kh=F.forwardRef(function(e,t){let n,{onClick:r,relative:a,reloadDocument:s,replace:i,state:o,target:l,to:u,preventScrollReset:c,viewTransition:d}=e,h=function(e,t){if(null==e)return{};var n,r,a={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,Fh),{basename:f}=F.useContext(gh),p=!1;if("string"==typeof u&&Vh.test(u)&&(n=u,Wh))try{let e=new URL(window.location.href),t=u.startsWith("//")?new URL(e.protocol+u):new URL(u),n=eh(t.pathname,f);t.origin===e.origin&&null!=n?u=n+t.search+t.hash:p=!0}catch(Jw){}let m=function(e,t){let{relative:n}=void 0===t?{}:t;wh()||Rd(!1);let{basename:r,navigator:a}=F.useContext(gh),{hash:s,pathname:i,search:o}=Th(e,{relative:n}),l=i;return"/"!==r&&(l="/"===i?r:oh([r,i])),a.createHref({pathname:l,search:o,hash:s})}(u,{relative:a}),g=function(e,t){let{target:n,replace:r,state:a,preventScrollReset:s,relative:i,viewTransition:o}=void 0===t?{}:t,l=kh(),u=_h(),c=Th(e,{relative:i});return F.useCallback(t=>{if(function(e,t){return!(0!==e.button||t&&"_self"!==t||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e))}(t,n)){t.preventDefault();let n=void 0!==r?r:$d(u)===$d(c);l(e,{replace:n,state:a,preventScrollReset:s,relative:i,viewTransition:o})}},[u,l,c,r,a,n,e,s,i,o])}(u,{replace:i,state:o,target:l,preventScrollReset:c,relative:a,viewTransition:d});return F.createElement("a",Bh({},h,{href:n||m,onClick:p||s?r:function(e){r&&r(e),e.defaultPrevented||g(e)},ref:t,target:l}))});var Jh,Gh,Yh,Qh;function Xh(e){let t=F.useRef(zh(e)),n=F.useRef(!1),r=_h(),a=F.useMemo(()=>function(e,t){let n=zh(e);return t&&t.forEach((e,r)=>{n.has(r)||t.getAll(r).forEach(e=>{n.append(r,e)})}),n}(r.search,n.current?null:t.current),[r.search]),s=kh(),i=F.useCallback((e,t)=>{const r=zh("function"==typeof e?e(a):e);n.current=!0,s("?"+r,t)},[s,a]);return[a,i]}(Gh=Jh||(Jh={})).UseScrollRestoration="useScrollRestoration",Gh.UseSubmit="useSubmit",Gh.UseSubmitFetcher="useSubmitFetcher",Gh.UseFetcher="useFetcher",Gh.useViewTransitionState="useViewTransitionState",(Qh=Yh||(Yh={})).UseFetcher="useFetcher",Qh.UseFetchers="useFetchers",Qh.UseScrollRestoration="useScrollRestoration";const Zh=F.createContext(),ef=()=>{const e=F.useContext(Zh);if(!e)throw new Error("useTheme must be used within a ThemeProvider");return e},tf=({children:e})=>{fetch("http://127.0.0.1:7244/ingest/c4c33fba-1ee4-4b2f-aa1a-ed506c7c702f",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({location:"ThemeContext.jsx:13",message:"ThemeProvider initializing",data:{},timestamp:Date.now(),sessionId:"debug-session",runId:"run1",hypothesisId:"B"})}).catch(()=>{});const[t,n]=F.useState(()=>{fetch("http://127.0.0.1:7244/ingest/c4c33fba-1ee4-4b2f-aa1a-ed506c7c702f",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({location:"ThemeContext.jsx:14",message:"ThemeProvider useState initializer",data:{},timestamp:Date.now(),sessionId:"debug-session",runId:"run1",hypothesisId:"B"})}).catch(()=>{});try{return localStorage.getItem("gogobus_theme")||"light"}catch(e){return fetch("http://127.0.0.1:7244/ingest/c4c33fba-1ee4-4b2f-aa1a-ed506c7c702f",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({location:"ThemeContext.jsx:17",message:"Error accessing localStorage",data:{errorMessage:null==e?void 0:e.message},timestamp:Date.now(),sessionId:"debug-session",runId:"run1",hypothesisId:"B"})}).catch(()=>{}),"light"}});F.useEffect(()=>{document.body.classList.toggle("dark-mode","dark"===t),localStorage.setItem("gogobus_theme",t)},[t]);const r={theme:t,toggleTheme:()=>{n(e=>"light"===e?"dark":"light")},isDark:"dark"===t};return X.jsx(Zh.Provider,{value:r,children:e})};function nf(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n}function rf(e,t,n,r){return new(n||(n=Promise))(function(a,s){function i(e){try{l(r.next(e))}catch(Jw){s(Jw)}}function o(e){try{l(r.throw(e))}catch(Jw){s(Jw)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(i,o)}l((r=r.apply(e,t||[])).next())})}"function"==typeof SuppressedError&&SuppressedError;class af extends Error{constructor(e,t="FunctionsError",n){super(e),this.name=t,this.context=n}}class sf extends af{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class of extends af{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class lf extends af{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var uf,cf;(cf=uf||(uf={})).Any="any",cf.ApNortheast1="ap-northeast-1",cf.ApNortheast2="ap-northeast-2",cf.ApSouth1="ap-south-1",cf.ApSoutheast1="ap-southeast-1",cf.ApSoutheast2="ap-southeast-2",cf.CaCentral1="ca-central-1",cf.EuCentral1="eu-central-1",cf.EuWest1="eu-west-1",cf.EuWest2="eu-west-2",cf.EuWest3="eu-west-3",cf.SaEast1="sa-east-1",cf.UsEast1="us-east-1",cf.UsWest1="us-west-1",cf.UsWest2="us-west-2";class df{constructor(e,{headers:t={},customFetch:n,region:r=uf.Any}={}){this.url=e,this.headers=t,this.region=r,this.fetch=(e=>e?(...t)=>e(...t):(...e)=>fetch(...e))(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return rf(this,arguments,void 0,function*(e,t={}){var n;let r,a;try{const{headers:s,method:i,body:o,signal:l,timeout:u}=t;let c={},{region:d}=t;d||(d=this.region);const h=new URL(`${this.url}/${e}`);let f;d&&"any"!==d&&(c["x-region"]=d,h.searchParams.set("forceFunctionRegion",d)),o&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)?"undefined"!=typeof Blob&&o instanceof Blob||o instanceof ArrayBuffer?(c["Content-Type"]="application/octet-stream",f=o):"string"==typeof o?(c["Content-Type"]="text/plain",f=o):"undefined"!=typeof FormData&&o instanceof FormData?f=o:(c["Content-Type"]="application/json",f=JSON.stringify(o)):f=!o||"string"==typeof o||"undefined"!=typeof Blob&&o instanceof Blob||o instanceof ArrayBuffer||"undefined"!=typeof FormData&&o instanceof FormData?o:JSON.stringify(o);let p=l;u&&(a=new AbortController,r=setTimeout(()=>a.abort(),u),l?(p=a.signal,l.addEventListener("abort",()=>a.abort())):p=a.signal);const m=yield this.fetch(h.toString(),{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},c),this.headers),s),body:f,signal:p}).catch(e=>{throw new sf(e)}),g=m.headers.get("x-relay-error");if(g&&"true"===g)throw new of(m);if(!m.ok)throw new lf(m);let y,v=(null!==(n=m.headers.get("Content-Type"))&&void 0!==n?n:"text/plain").split(";")[0].trim();return y="application/json"===v?yield m.json():"application/octet-stream"===v||"application/pdf"===v?yield m.blob():"text/event-stream"===v?m:"multipart/form-data"===v?yield m.formData():yield m.text(),{data:y,error:null,response:m}}catch(s){return{data:null,error:s,response:s instanceof lf||s instanceof of?s.context:void 0}}finally{r&&clearTimeout(r)}})}}var hf=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}},ff=class{constructor(e){var t,n;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=null!==(t=e.shouldThrowOnError)&&void 0!==t&&t,this.signal=e.signal,this.isMaybeSingle=null!==(n=e.isMaybeSingle)&&void 0!==n&&n,e.fetch?this.fetch=e.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){var n=this;void 0===this.schema||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),"GET"!==this.method&&"HEAD"!==this.method&&this.headers.set("Content-Type","application/json");let r=(0,this.fetch)(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async e=>{let t=null,r=null,a=null,s=e.status,i=e.statusText;if(e.ok){var o,l;if("HEAD"!==n.method){var u;const t=await e.text();""===t||(r="text/csv"===n.headers.get("Accept")||n.headers.get("Accept")&&(null===(u=n.headers.get("Accept"))||void 0===u?void 0:u.includes("application/vnd.pgrst.plan+text"))?t:JSON.parse(t))}const c=null===(o=n.headers.get("Prefer"))||void 0===o?void 0:o.match(/count=(exact|planned|estimated)/),d=null===(l=e.headers.get("content-range"))||void 0===l?void 0:l.split("/");c&&d&&d.length>1&&(a=parseInt(d[1])),n.isMaybeSingle&&"GET"===n.method&&Array.isArray(r)&&(r.length>1?(t={code:"PGRST116",details:`Results contain ${r.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},r=null,a=null,s=406,i="Not Acceptable"):r=1===r.length?r[0]:null)}else{var c;const a=await e.text();try{t=JSON.parse(a),Array.isArray(t)&&404===e.status&&(r=[],t=null,s=200,i="OK")}catch(d){404===e.status&&""===a?(s=204,i="No Content"):t={message:a}}if(t&&n.isMaybeSingle&&(null==t||null===(c=t.details)||void 0===c?void 0:c.includes("0 rows"))&&(t=null,s=200,i="OK"),t&&n.shouldThrowOnError)throw new hf(t)}return{error:t,data:r,count:a,status:s,statusText:i}});return this.shouldThrowOnError||(r=r.catch(e=>{var t;let n="";const r=null==e?void 0:e.cause;if(r){var a,s,i,o;const t=null!==(a=null==r?void 0:r.message)&&void 0!==a?a:"",l=null!==(s=null==r?void 0:r.code)&&void 0!==s?s:"";n=`${null!==(i=null==e?void 0:e.name)&&void 0!==i?i:"FetchError"}: ${null==e?void 0:e.message}`,n+=`\n\nCaused by: ${null!==(o=null==r?void 0:r.name)&&void 0!==o?o:"Error"}: ${t}`,l&&(n+=` (${l})`),(null==r?void 0:r.stack)&&(n+=`\n${r.stack}`)}else{var l;n=null!==(l=null==e?void 0:e.stack)&&void 0!==l?l:""}return{error:{message:`${null!==(t=null==e?void 0:e.name)&&void 0!==t?t:"FetchError"}: ${null==e?void 0:e.message}`,details:n,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),r.then(e,t)}returns(){return this}overrideTypes(){return this}},pf=class extends ff{select(e){let t=!1;const n=(null!=e?e:"*").split("").map(e=>/\s/.test(e)&&!t?"":('"'===e&&(t=!t),e)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:t=!0,nullsFirst:n,foreignTable:r,referencedTable:a=r}={}){const s=a?`${a}.order`:"order",i=this.url.searchParams.get(s);return this.url.searchParams.set(s,`${i?`${i},`:""}${e}.${t?"asc":"desc"}${void 0===n?"":n?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:n=t}={}){const r=void 0===n?"limit":`${n}.limit`;return this.url.searchParams.set(r,`${e}`),this}range(e,t,{foreignTable:n,referencedTable:r=n}={}){const a=void 0===r?"offset":`${r}.offset`,s=void 0===r?"limit":`${r}.limit`;return this.url.searchParams.set(a,`${e}`),this.url.searchParams.set(s,""+(t-e+1)),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return"GET"===this.method?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:t=!1,settings:n=!1,buffers:r=!1,wal:a=!1,format:s="text"}={}){var i;const o=[e?"analyze":null,t?"verbose":null,n?"settings":null,r?"buffers":null,a?"wal":null].filter(Boolean).join("|"),l=null!==(i=this.headers.get("Accept"))&&void 0!==i?i:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${s}; for="${l}"; options=${o};`),this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};const mf=new RegExp("[,()]");var gf=class extends pf{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}regexMatch(e,t){return this.url.searchParams.append(e,`match.${t}`),this}regexIMatch(e,t){return this.url.searchParams.append(e,`imatch.${t}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}isDistinct(e,t){return this.url.searchParams.append(e,`isdistinct.${t}`),this}in(e,t){const n=Array.from(new Set(t)).map(e=>"string"==typeof e&&mf.test(e)?`"${e}"`:`${e}`).join(",");return this.url.searchParams.append(e,`in.(${n})`),this}notIn(e,t){const n=Array.from(new Set(t)).map(e=>"string"==typeof e&&mf.test(e)?`"${e}"`:`${e}`).join(",");return this.url.searchParams.append(e,`not.in.(${n})`),this}contains(e,t){return"string"==typeof t?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return"string"==typeof t?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return"string"==typeof t?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:n,type:r}={}){let a="";"plain"===r?a="pl":"phrase"===r?a="ph":"websearch"===r&&(a="w");const s=void 0===n?"":`(${n})`;return this.url.searchParams.append(e,`${a}fts${s}.${t}`),this}match(e){return Object.entries(e).forEach(([e,t])=>{this.url.searchParams.append(e,`eq.${t}`)}),this}not(e,t,n){return this.url.searchParams.append(e,`not.${t}.${n}`),this}or(e,{foreignTable:t,referencedTable:n=t}={}){const r=n?`${n}.or`:"or";return this.url.searchParams.append(r,`(${e})`),this}filter(e,t,n){return this.url.searchParams.append(e,`${t}.${n}`),this}},yf=class{constructor(e,{headers:t={},schema:n,fetch:r}){this.url=e,this.headers=new Headers(t),this.schema=n,this.fetch=r}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(e,t){const{head:n=!1,count:r}=null!=t?t:{},a=n?"HEAD":"GET";let s=!1;const i=(null!=e?e:"*").split("").map(e=>/\s/.test(e)&&!s?"":('"'===e&&(s=!s),e)).join(""),{url:o,headers:l}=this.cloneRequestState();return o.searchParams.set("select",i),r&&l.append("Prefer",`count=${r}`),new gf({method:a,url:o,headers:l,schema:this.schema,fetch:this.fetch})}insert(e,{count:t,defaultToNull:n=!0}={}){var r;const{url:a,headers:s}=this.cloneRequestState();if(t&&s.append("Prefer",`count=${t}`),n||s.append("Prefer","missing=default"),Array.isArray(e)){const t=e.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(t.length>0){const e=[...new Set(t)].map(e=>`"${e}"`);a.searchParams.set("columns",e.join(","))}}return new gf({method:"POST",url:a,headers:s,schema:this.schema,body:e,fetch:null!==(r=this.fetch)&&void 0!==r?r:fetch})}upsert(e,{onConflict:t,ignoreDuplicates:n=!1,count:r,defaultToNull:a=!0}={}){var s;const{url:i,headers:o}=this.cloneRequestState();if(o.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),void 0!==t&&i.searchParams.set("on_conflict",t),r&&o.append("Prefer",`count=${r}`),a||o.append("Prefer","missing=default"),Array.isArray(e)){const t=e.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(t.length>0){const e=[...new Set(t)].map(e=>`"${e}"`);i.searchParams.set("columns",e.join(","))}}return new gf({method:"POST",url:i,headers:o,schema:this.schema,body:e,fetch:null!==(s=this.fetch)&&void 0!==s?s:fetch})}update(e,{count:t}={}){var n;const{url:r,headers:a}=this.cloneRequestState();return t&&a.append("Prefer",`count=${t}`),new gf({method:"PATCH",url:r,headers:a,schema:this.schema,body:e,fetch:null!==(n=this.fetch)&&void 0!==n?n:fetch})}delete({count:e}={}){var t;const{url:n,headers:r}=this.cloneRequestState();return e&&r.append("Prefer",`count=${e}`),new gf({method:"DELETE",url:n,headers:r,schema:this.schema,fetch:null!==(t=this.fetch)&&void 0!==t?t:fetch})}},vf=class e{constructor(e,{headers:t={},schema:n,fetch:r}={}){this.url=e,this.headers=new Headers(t),this.schemaName=n,this.fetch=r}from(e){if(!e||"string"!=typeof e||""===e.trim())throw new Error("Invalid relation name: relation must be a non-empty string.");return new yf(new URL(`${this.url}/${e}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new e(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(e,t={},{head:n=!1,get:r=!1,count:a}={}){var s;let i;const o=new URL(`${this.url}/rpc/${e}`);let l;const u=e=>null!==e&&"object"==typeof e&&(!Array.isArray(e)||e.some(u)),c=n&&Object.values(t).some(u);c?(i="POST",l=t):n||r?(i=n?"HEAD":"GET",Object.entries(t).filter(([e,t])=>void 0!==t).map(([e,t])=>[e,Array.isArray(t)?`{${t.join(",")}}`:`${t}`]).forEach(([e,t])=>{o.searchParams.append(e,t)})):(i="POST",l=t);const d=new Headers(this.headers);return c?d.set("Prefer",a?`count=${a},return=minimal`:"return=minimal"):a&&d.set("Prefer",`count=${a}`),new gf({method:i,url:o,headers:d,schema:this.schemaName,body:l,fetch:null!==(s=this.fetch)&&void 0!==s?s:fetch})}};class bf{constructor(){}static detectEnvironment(){var e;if("undefined"!=typeof WebSocket)return{type:"native",constructor:WebSocket};if("undefined"!=typeof globalThis&&void 0!==globalThis.WebSocket)return{type:"native",constructor:globalThis.WebSocket};if("undefined"!=typeof global&&void 0!==global.WebSocket)return{type:"native",constructor:global.WebSocket};if("undefined"!=typeof globalThis&&void 0!==globalThis.WebSocketPair&&void 0===globalThis.WebSocket)return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if("undefined"!=typeof globalThis&&globalThis.EdgeRuntime||"undefined"!=typeof navigator&&(null===(e=navigator.userAgent)||void 0===e?void 0:e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const t=globalThis.process;if(t){const e=t.versions;if(e&&e.node){const t=e.node,n=parseInt(t.replace(/^v/,"").split(".")[0]);return n>=22?void 0!==globalThis.WebSocket?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${n} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${n} detected without native WebSocket support.`,workaround:'For Node.js < 22, install "ws" package and provide it via the transport option:\nimport ws from "ws"\nnew RealtimeClient(url, { transport: ws })'}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+=`\n\nSuggested solution: ${e.workaround}`),new Error(t)}static createWebSocket(e,t){return new(this.getWebSocketConstructor())(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return"native"===e.type||"ws"===e.type}catch(e){return!1}}}const wf="1.0.0",_f=wf,Sf=1e4;var kf,Ef,Tf,Cf,xf,Of,If,Pf,jf,Rf,Af;(Ef=kf||(kf={}))[Ef.connecting=0]="connecting",Ef[Ef.open=1]="open",Ef[Ef.closing=2]="closing",Ef[Ef.closed=3]="closed",(Cf=Tf||(Tf={})).closed="closed",Cf.errored="errored",Cf.joined="joined",Cf.joining="joining",Cf.leaving="leaving",(Of=xf||(xf={})).close="phx_close",Of.error="phx_error",Of.join="phx_join",Of.reply="phx_reply",Of.leave="phx_leave",Of.access_token="access_token",(If||(If={})).websocket="websocket",(jf=Pf||(Pf={})).Connecting="connecting",jf.Open="open",jf.Closing="closing",jf.Closed="closed";class Nf{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=null!=e?e:[]}encode(e,t){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&"string"==typeof e.payload.event)return t(this._binaryEncodeUserBroadcastPush(e));let n=[e.join_ref,e.ref,e.topic,e.event,e.payload];return t(JSON.stringify(n))}_binaryEncodeUserBroadcastPush(e){var t;return this._isArrayBuffer(null===(t=e.payload)||void 0===t?void 0:t.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var t,n;const r=null!==(n=null===(t=e.payload)||void 0===t?void 0:t.payload)&&void 0!==n?n:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,r)}_encodeJsonUserBroadcastPush(e){var t,n;const r=null!==(n=null===(t=e.payload)||void 0===t?void 0:t.payload)&&void 0!==n?n:{},a=(new TextEncoder).encode(JSON.stringify(r)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,a)}_encodeUserBroadcastPush(e,t,n){var r,a;const s=e.topic,i=null!==(r=e.ref)&&void 0!==r?r:"",o=null!==(a=e.join_ref)&&void 0!==a?a:"",l=e.payload.event,u=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},c=0===Object.keys(u).length?"":JSON.stringify(u);if(o.length>255)throw new Error(`joinRef length ${o.length} exceeds maximum of 255`);if(i.length>255)throw new Error(`ref length ${i.length} exceeds maximum of 255`);if(s.length>255)throw new Error(`topic length ${s.length} exceeds maximum of 255`);if(l.length>255)throw new Error(`userEvent length ${l.length} exceeds maximum of 255`);if(c.length>255)throw new Error(`metadata length ${c.length} exceeds maximum of 255`);const d=this.USER_BROADCAST_PUSH_META_LENGTH+o.length+i.length+s.length+l.length+c.length,h=new ArrayBuffer(this.HEADER_LENGTH+d);let f=new DataView(h),p=0;f.setUint8(p++,this.KINDS.userBroadcastPush),f.setUint8(p++,o.length),f.setUint8(p++,i.length),f.setUint8(p++,s.length),f.setUint8(p++,l.length),f.setUint8(p++,c.length),f.setUint8(p++,t),Array.from(o,e=>f.setUint8(p++,e.charCodeAt(0))),Array.from(i,e=>f.setUint8(p++,e.charCodeAt(0))),Array.from(s,e=>f.setUint8(p++,e.charCodeAt(0))),Array.from(l,e=>f.setUint8(p++,e.charCodeAt(0))),Array.from(c,e=>f.setUint8(p++,e.charCodeAt(0)));var m=new Uint8Array(h.byteLength+n.byteLength);return m.set(new Uint8Array(h),0),m.set(new Uint8Array(n),h.byteLength),m.buffer}decode(e,t){if(this._isArrayBuffer(e)){return t(this._binaryDecode(e))}if("string"==typeof e){const n=JSON.parse(e),[r,a,s,i,o]=n;return t({join_ref:r,ref:a,topic:s,event:i,payload:o})}return t({})}_binaryDecode(e){const t=new DataView(e),n=t.getUint8(0),r=new TextDecoder;if(n===this.KINDS.userBroadcast)return this._decodeUserBroadcast(e,t,r)}_decodeUserBroadcast(e,t,n){const r=t.getUint8(1),a=t.getUint8(2),s=t.getUint8(3),i=t.getUint8(4);let o=this.HEADER_LENGTH+4;const l=n.decode(e.slice(o,o+r));o+=r;const u=n.decode(e.slice(o,o+a));o+=a;const c=n.decode(e.slice(o,o+s));o+=s;const d=e.slice(o,e.byteLength),h=i===this.JSON_ENCODING?JSON.parse(n.decode(d)):d,f={type:this.BROADCAST_EVENT,event:u,payload:h};return s>0&&(f.meta=JSON.parse(c)),{join_ref:null,ref:null,topic:l,event:this.BROADCAST_EVENT,payload:f}}_isArrayBuffer(e){var t;return e instanceof ArrayBuffer||"ArrayBuffer"===(null===(t=null==e?void 0:e.constructor)||void 0===t?void 0:t.name)}_pick(e,t){return e&&"object"==typeof e?Object.fromEntries(Object.entries(e).filter(([e])=>t.includes(e))):{}}}class Df{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}(Af=Rf||(Rf={})).abstime="abstime",Af.bool="bool",Af.date="date",Af.daterange="daterange",Af.float4="float4",Af.float8="float8",Af.int2="int2",Af.int4="int4",Af.int4range="int4range",Af.int8="int8",Af.int8range="int8range",Af.json="json",Af.jsonb="jsonb",Af.money="money",Af.numeric="numeric",Af.oid="oid",Af.reltime="reltime",Af.text="text",Af.time="time",Af.timestamp="timestamp",Af.timestamptz="timestamptz",Af.timetz="timetz",Af.tsrange="tsrange",Af.tstzrange="tstzrange";const $f=(e,t,n={})=>{var r;const a=null!==(r=n.skipTypes)&&void 0!==r?r:[];return t?Object.keys(t).reduce((n,r)=>(n[r]=Lf(r,e,t,a),n),{}):{}},Lf=(e,t,n,r)=>{const a=t.find(t=>t.name===e),s=null==a?void 0:a.type,i=n[e];return s&&!r.includes(s)?Uf(s,i):Mf(i)},Uf=(e,t)=>{if("_"===e.charAt(0)){const n=e.slice(1,e.length);return qf(t,n)}switch(e){case Rf.bool:return Bf(t);case Rf.float4:case Rf.float8:case Rf.int2:case Rf.int4:case Rf.int8:case Rf.numeric:case Rf.oid:return zf(t);case Rf.json:case Rf.jsonb:return Ff(t);case Rf.timestamp:return Hf(t);case Rf.abstime:case Rf.date:case Rf.daterange:case Rf.int4range:case Rf.int8range:case Rf.money:case Rf.reltime:case Rf.text:case Rf.time:case Rf.timestamptz:case Rf.timetz:case Rf.tsrange:case Rf.tstzrange:default:return Mf(t)}},Mf=e=>e,Bf=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},zf=e=>{if("string"==typeof e){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},Ff=e=>{if("string"==typeof e)try{return JSON.parse(e)}catch(t){return e}return e},qf=(e,t)=>{if("string"!=typeof e)return e;const n=e.length-1,r=e[n];if("{"===e[0]&&"}"===r){let r;const s=e.slice(1,n);try{r=JSON.parse("["+s+"]")}catch(a){r=s?s.split(","):[]}return r.map(e=>Uf(t,e))}return e},Hf=e=>"string"==typeof e?e.replace(" ","T"):e,Wf=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),""===t.pathname||"/"===t.pathname?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class Vf{constructor(e,t,n={},r=1e4){this.channel=e,this.event=t,this.payload=n,this.timeout=r,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var n;return this._hasReceived(e)&&t(null===(n=this.receivedResp)||void 0===n?void 0:n.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);this.channel._on(this.refEvent,{},e=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=e,this._matchReceive(e)}),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(t=>t.status===e).forEach(e=>e.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Kf,Jf,Gf,Yf,Qf,Xf,Zf,ep;(Jf=Kf||(Kf={})).SYNC="sync",Jf.JOIN="join",Jf.LEAVE="leave";class tp{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(null==t?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},e=>{const{onJoin:t,onLeave:n,onSync:r}=this.caller;this.joinRef=this.channel._joinRef(),this.state=tp.syncState(this.state,e,t,n),this.pendingDiffs.forEach(e=>{this.state=tp.syncDiff(this.state,e,t,n)}),this.pendingDiffs=[],r()}),this.channel._on(n.diff,{},e=>{const{onJoin:t,onLeave:n,onSync:r}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(e):(this.state=tp.syncDiff(this.state,e,t,n),r())}),this.onJoin((e,t,n)=>{this.channel._trigger("presence",{event:"join",key:e,currentPresences:t,newPresences:n})}),this.onLeave((e,t,n)=>{this.channel._trigger("presence",{event:"leave",key:e,currentPresences:t,leftPresences:n})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,n,r){const a=this.cloneDeep(e),s=this.transformState(t),i={},o={};return this.map(a,(e,t)=>{s[e]||(o[e]=t)}),this.map(s,(e,t)=>{const n=a[e];if(n){const r=t.map(e=>e.presence_ref),a=n.map(e=>e.presence_ref),s=t.filter(e=>a.indexOf(e.presence_ref)<0),l=n.filter(e=>r.indexOf(e.presence_ref)<0);s.length>0&&(i[e]=s),l.length>0&&(o[e]=l)}else i[e]=t}),this.syncDiff(a,{joins:i,leaves:o},n,r)}static syncDiff(e,t,n,r){const{joins:a,leaves:s}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return n||(n=()=>{}),r||(r=()=>{}),this.map(a,(t,r)=>{var a;const s=null!==(a=e[t])&&void 0!==a?a:[];if(e[t]=this.cloneDeep(r),s.length>0){const n=e[t].map(e=>e.presence_ref),r=s.filter(e=>n.indexOf(e.presence_ref)<0);e[t].unshift(...r)}n(t,s,r)}),this.map(s,(t,n)=>{let a=e[t];if(!a)return;const s=n.map(e=>e.presence_ref);a=a.filter(e=>s.indexOf(e.presence_ref)<0),e[t]=a,r(t,a,n),0===a.length&&delete e[t]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(n=>t(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,n)=>{const r=e[n];return t[n]="metas"in r?r.metas.map(e=>(e.presence_ref=e.phx_ref,delete e.phx_ref,delete e.phx_ref_prev,e)):r,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}(Yf=Gf||(Gf={})).ALL="*",Yf.INSERT="INSERT",Yf.UPDATE="UPDATE",Yf.DELETE="DELETE",(Xf=Qf||(Qf={})).BROADCAST="broadcast",Xf.PRESENCE="presence",Xf.POSTGRES_CHANGES="postgres_changes",Xf.SYSTEM="system",(ep=Zf||(Zf={})).SUBSCRIBED="SUBSCRIBED",ep.TIMED_OUT="TIMED_OUT",ep.CLOSED="CLOSED",ep.CHANNEL_ERROR="CHANNEL_ERROR";class np{constructor(e,t={config:{}},n){var r,a;if(this.topic=e,this.params=t,this.socket=n,this.bindings={},this.state=Tf.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new Vf(this,xf.join,this.params,this.timeout),this.rejoinTimer=new Df(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Tf.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(e=>e.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Tf.closed,this.socket._remove(this)}),this._onError(e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,e),this.state=Tf.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Tf.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,e),this.state=Tf.errored,this.rejoinTimer.scheduleTimeout())}),this._on(xf.reply,{},(e,t)=>{this._trigger(this._replyEventName(t),e)}),this.presence=new tp(this),this.broadcastEndpointURL=Wf(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(null===(a=null===(r=this.params.config)||void 0===r?void 0:r.broadcast)||void 0===a?void 0:a.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,t=this.timeout){var n,r,a;if(this.socket.isConnected()||this.socket.connect(),this.state==Tf.closed){const{config:{broadcast:s,presence:i,private:o}}=this.params,l=null!==(r=null===(n=this.bindings.postgres_changes)||void 0===n?void 0:n.map(e=>e.filter))&&void 0!==r?r:[],u=!!this.bindings[Qf.PRESENCE]&&this.bindings[Qf.PRESENCE].length>0||!0===(null===(a=this.params.config.presence)||void 0===a?void 0:a.enabled),c={},d={broadcast:s,presence:Object.assign(Object.assign({},i),{enabled:u}),postgres_changes:l,private:o};this.socket.accessTokenValue&&(c.access_token=this.socket.accessTokenValue),this._onError(t=>null==e?void 0:e(Zf.CHANNEL_ERROR,t)),this._onClose(()=>null==e?void 0:e(Zf.CLOSED)),this.updateJoinPayload(Object.assign({config:d},c)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:t})=>{var n;if(this.socket._isManualToken()||this.socket.setAuth(),void 0!==t){const r=this.bindings.postgres_changes,a=null!==(n=null==r?void 0:r.length)&&void 0!==n?n:0,s=[];for(let n=0;n<a;n++){const a=r[n],{filter:{event:i,schema:o,table:l,filter:u}}=a,c=t&&t[n];if(!(c&&c.event===i&&np.isFilterValueEqual(c.schema,o)&&np.isFilterValueEqual(c.table,l)&&np.isFilterValueEqual(c.filter,u)))return this.unsubscribe(),this.state=Tf.errored,void(null==e||e(Zf.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes")));s.push(Object.assign(Object.assign({},a),{id:c.id}))}return this.bindings.postgres_changes=s,void(e&&e(Zf.SUBSCRIBED))}null==e||e(Zf.SUBSCRIBED)}).receive("error",t=>{this.state=Tf.errored,null==e||e(Zf.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(t).join(", ")||"error")))}).receive("timeout",()=>{null==e||e(Zf.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,n){return this.state===Tf.joined&&e===Qf.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(e,t,n)}async httpSend(e,t,n={}){var r;if(null==t)return Promise.reject("Payload is required for httpSend()");const a={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(a.Authorization=`Bearer ${this.socket.accessTokenValue}`);const s={method:"POST",headers:a,body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:t,private:this.private}]})},i=await this._fetchWithTimeout(this.broadcastEndpointURL,s,null!==(r=n.timeout)&&void 0!==r?r:this.timeout);if(202===i.status)return{success:!0};let o=i.statusText;try{const e=await i.json();o=e.error||e.message||o}catch(l){}return Promise.reject(new Error(o))}async send(e,t={}){var n,r;if(this._canPush()||"broadcast"!==e.type)return new Promise(n=>{var r,a,s;const i=this._push(e.type,e,t.timeout||this.timeout);"broadcast"!==e.type||(null===(s=null===(a=null===(r=this.params)||void 0===r?void 0:r.config)||void 0===a?void 0:a.broadcast)||void 0===s?void 0:s.ack)||n("ok"),i.receive("ok",()=>n("ok")),i.receive("error",()=>n("error")),i.receive("timeout",()=>n("timed out"))});{const{event:s,payload:i}=e,o={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(o.Authorization=`Bearer ${this.socket.accessTokenValue}`);const l={method:"POST",headers:o,body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:i,private:this.private}]})};try{const e=await this._fetchWithTimeout(this.broadcastEndpointURL,l,null!==(n=t.timeout)&&void 0!==n?n:this.timeout);return await(null===(r=e.body)||void 0===r?void 0:r.cancel()),e.ok?"ok":"error"}catch(a){return"AbortError"===a.name?"timed out":"error"}}}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Tf.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(xf.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(r=>{n=new Vf(this,xf.leave,{},e),n.receive("ok",()=>{t(),r("ok")}).receive("timeout",()=>{t(),r("timed out")}).receive("error",()=>{r("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{null==n||n.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Tf.closed,this.bindings={}}async _fetchWithTimeout(e,t,n){const r=new AbortController,a=setTimeout(()=>r.abort(),n),s=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:r.signal}));return clearTimeout(a),s}_push(e,t,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let r=new Vf(this,e,t,n);return this._canPush()?r.send():this._addToPushBuffer(r),r}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>100){const e=this.pushBuffer.shift();e&&(e.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${e.event}`,e.payload))}}_onMessage(e,t,n){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,n){var r,a;const s=e.toLocaleLowerCase(),{close:i,error:o,leave:l,join:u}=xf;if(n&&[i,o,l,u].indexOf(s)>=0&&n!==this._joinRef())return;let c=this._onMessage(s,t,n);if(t&&!c)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(s)?null===(r=this.bindings.postgres_changes)||void 0===r||r.filter(e=>{var t,n,r;return"*"===(null===(t=e.filter)||void 0===t?void 0:t.event)||(null===(r=null===(n=e.filter)||void 0===n?void 0:n.event)||void 0===r?void 0:r.toLocaleLowerCase())===s}).map(e=>e.callback(c,n)):null===(a=this.bindings[s])||void 0===a||a.filter(e=>{var n,r,a,i,o,l,u,c;if(["broadcast","presence","postgres_changes"].includes(s)){if("id"in e){const s=e.id,l=null===(n=e.filter)||void 0===n?void 0:n.event;return s&&(null===(r=t.ids)||void 0===r?void 0:r.includes(s))&&("*"===l||(null==l?void 0:l.toLocaleLowerCase())===(null===(a=t.data)||void 0===a?void 0:a.type.toLocaleLowerCase()))&&(!(null===(i=e.filter)||void 0===i?void 0:i.table)||e.filter.table===(null===(o=t.data)||void 0===o?void 0:o.table))}{const n=null===(u=null===(l=null==e?void 0:e.filter)||void 0===l?void 0:l.event)||void 0===u?void 0:u.toLocaleLowerCase();return"*"===n||n===(null===(c=null==t?void 0:t.event)||void 0===c?void 0:c.toLocaleLowerCase())}}return e.type.toLocaleLowerCase()===s}).map(e=>{if("object"==typeof c&&"ids"in c){const e=c.data,{schema:t,table:n,commit_timestamp:r,type:a,errors:s}=e,i={schema:t,table:n,commit_timestamp:r,eventType:a,new:{},old:{},errors:s};c=Object.assign(Object.assign({},i),this._getPayloadRecords(e))}e.callback(c,n)})}_isClosed(){return this.state===Tf.closed}_isJoined(){return this.state===Tf.joined}_isJoining(){return this.state===Tf.joining}_isLeaving(){return this.state===Tf.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,n){const r=e.toLocaleLowerCase(),a={type:r,filter:t,callback:n};return this.bindings[r]?this.bindings[r].push(a):this.bindings[r]=[a],this}_off(e,t){const n=e.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(e=>{var r;return!((null===(r=e.type)||void 0===r?void 0:r.toLocaleLowerCase())===n&&np.isEqual(e.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}static isFilterValueEqual(e,t){return(null!=e?e:void 0)===(null!=t?t:void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(xf.close,{},e)}_onError(e){this._on(xf.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Tf.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return"INSERT"!==e.type&&"UPDATE"!==e.type||(t.new=$f(e.columns,e.record)),"UPDATE"!==e.type&&"DELETE"!==e.type||(t.old=$f(e.columns,e.old_record)),t}}const rp=()=>{},ap=25e3,sp=10,ip=100,op=[1e3,2e3,5e3,1e4];class lp{constructor(e,t){var n;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Sf,this.transport=null,this.heartbeatIntervalMs=ap,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=rp,this.ref=0,this.reconnectTimer=null,this.vsn=_f,this.logger=rp,this.conn=null,this.sendBuffer=[],this.serializer=new Nf,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=e=>e?(...t)=>e(...t):(...e)=>fetch(...e),!(null===(n=null==t?void 0:t.params)||void 0===n?void 0:n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint=`${e}/${If.websocket}`,this.httpEndpoint=Wf(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(null==t?void 0:t.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||null!==this.conn&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=bf.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const t=e.message;if(t.includes("Node.js"))throw new Error(`${t}\n\nTo use Realtime in Node.js, you need to provide a WebSocket implementation:\n\nOption 1: Use Node.js 22+ which has native WebSocket support\nOption 2: Install and provide the "ws" package:\n\n  npm install ws\n\n  import ws from "ws"\n  const client = new RealtimeClient(url, {\n    ...options,\n    transport: ws\n  })`);throw new Error(`WebSocket not available: ${t}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},"function"==typeof this.conn.close&&(e?this.conn.close(e,null!=t?t:""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return 0===this.channels.length&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(e=>e.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,n){this.logger(e,t,n)}connectionState(){switch(this.conn&&this.conn.readyState){case kf.connecting:return Pf.Connecting;case kf.open:return Pf.Open;case kf.closing:return Pf.Closing;default:return Pf.Closed}}isConnected(){return this.connectionState()===Pf.Open}isConnecting(){return"connecting"===this._connectionState}isDisconnecting(){return"disconnecting"===this._connectionState}channel(e,t={config:{}}){const n=`realtime:${e}`,r=this.getChannels().find(e=>e.topic===n);if(r)return r;{const n=new np(`realtime:${e}`,t,this);return this.channels.push(n),n}}push(e){const{topic:t,event:n,payload:r,ref:a}=e,s=()=>{this.encode(e,e=>{var t;null===(t=this.conn)||void 0===t||t.send(e)})};this.log("push",`${t} ${n} (${a})`,r),this.isConnected()?s():this.sendBuffer.push(s)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(Jw){this.log("error","error in heartbeat callback",Jw)}return this._wasManualDisconnect=!1,null===(e=this.conn)||void 0===e||e.close(1e3,"heartbeat timeout"),void setTimeout(()=>{var e;this.isConnected()||null===(e=this.reconnectTimer)||void 0===e||e.scheduleTimeout()},ip)}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(Jw){this.log("error","error in heartbeat callback",Jw)}this._setAuthSafely("heartbeat")}else try{this.heartbeatCallback("disconnected")}catch(Jw){this.log("error","error in heartbeat callback",Jw)}}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(t=>t.topic===e&&(t._isJoined()||t._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,e=>{if("phoenix"===e.topic&&"phx_reply"===e.event&&e.ref&&e.ref===this.pendingHeartbeatRef){const t=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback("ok"===e.payload.status?"ok":"error",t)}catch(Jw){this.log("error","error in heartbeat callback",Jw)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:t,event:n,payload:r,ref:a}=e,s=a?`(${a})`:"",i=r.status||"";this.log("receive",`${i} ${t} ${n} ${s}`.trim(),r),this.channels.filter(e=>e._isMember(t)).forEach(e=>e._trigger(n,r,a)),this._triggerStateCallbacks("message",e)})}_clearTimer(e){var t;"heartbeat"===e&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):"reconnect"===e&&(null===(t=this.reconnectTimer)||void 0===t||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e),this.conn.readyState===kf.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===kf.open||this.conn.readyState===kf.connecting)try{this.conn.close()}catch(Jw){this.log("error","Error closing connection",Jw)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`);(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(e=>{this.log("error","error waiting for auth on connect",e),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=e=>{this.log("worker","worker error",e.message),this._terminateWorker()},this.workerRef.onmessage=e=>{"keepAlive"===e.data.event&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||null===(t=this.reconnectTimer)||void 0===t||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(xf.error))}_appendParams(e,t){if(0===Object.keys(t).length)return e;const n=e.match(/\?/)?"&":"?";return`${e}${n}${new URLSearchParams(t)}`}_workerObjectUrl(e){let t;if(e)t=e;else{const e=new Blob(['\n  addEventListener("message", (e) => {\n    if (e.data.event === "start") {\n      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);\n    }\n  });'],{type:"application/javascript"});t=URL.createObjectURL(e)}return t}_setConnectionState(e,t=!1){this._connectionState=e,"connecting"===e?this._wasManualDisconnect=!1:"disconnecting"===e&&(this._wasManualDisconnect=t)}async _performAuth(e=null){let t,n=!1;if(e)t=e,n=!0;else if(this.accessToken)try{t=await this.accessToken()}catch(Jw){this.log("error","Error fetching access token from callback",Jw),t=this.accessTokenValue}else t=this.accessTokenValue;n?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(e=>{const n={access_token:t,version:"realtime-js/2.90.1"};t&&e.updateJoinPayload(n),e.joinedOnce&&e._isJoined()&&e._push(xf.access_token,{access_token:t})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this._isManualToken()||this.setAuth().catch(t=>{this.log("error",`Error setting auth in ${e}`,t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(n=>{try{n(t)}catch(Jw){this.log("error",`error in ${e} callback`,Jw)}})}catch(Jw){this.log("error",`error triggering ${e} callbacks`,Jw)}}_setupReconnectionTimer(){this.reconnectTimer=new Df(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},sp)},this.reconnectAfterMs)}_initializeOptions(e){var t,n,r,a,s,i,o,l,u,c,d,h;switch(this.transport=null!==(t=null==e?void 0:e.transport)&&void 0!==t?t:null,this.timeout=null!==(n=null==e?void 0:e.timeout)&&void 0!==n?n:Sf,this.heartbeatIntervalMs=null!==(r=null==e?void 0:e.heartbeatIntervalMs)&&void 0!==r?r:ap,this.worker=null!==(a=null==e?void 0:e.worker)&&void 0!==a&&a,this.accessToken=null!==(s=null==e?void 0:e.accessToken)&&void 0!==s?s:null,this.heartbeatCallback=null!==(i=null==e?void 0:e.heartbeatCallback)&&void 0!==i?i:rp,this.vsn=null!==(o=null==e?void 0:e.vsn)&&void 0!==o?o:_f,(null==e?void 0:e.params)&&(this.params=e.params),(null==e?void 0:e.logger)&&(this.logger=e.logger),((null==e?void 0:e.logLevel)||(null==e?void 0:e.log_level))&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=null!==(l=null==e?void 0:e.reconnectAfterMs)&&void 0!==l?l:e=>op[e-1]||1e4,this.vsn){case wf:this.encode=null!==(u=null==e?void 0:e.encode)&&void 0!==u?u:(e,t)=>t(JSON.stringify(e)),this.decode=null!==(c=null==e?void 0:e.decode)&&void 0!==c?c:(e,t)=>t(JSON.parse(e));break;case"2.0.0":this.encode=null!==(d=null==e?void 0:e.encode)&&void 0!==d?d:this.serializer.encode.bind(this.serializer),this.decode=null!==(h=null==e?void 0:e.decode)&&void 0!==h?h:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if("undefined"!=typeof window&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=null==e?void 0:e.workerUrl}}}var up=class extends Error{constructor(e,t){var n;super(e),this.name="IcebergError",this.status=t.status,this.icebergType=t.icebergType,this.icebergCode=t.icebergCode,this.details=t.details,this.isCommitStateUnknown="CommitStateUnknownException"===t.icebergType||[500,502,504].includes(t.status)&&!0===(null==(n=t.icebergType)?void 0:n.includes("CommitState"))}isNotFound(){return 404===this.status}isConflict(){return 409===this.status}isAuthenticationTimeout(){return 419===this.status}};function cp(e){const t=e.fetchImpl??globalThis.fetch;return{async request({method:n,path:r,query:a,body:s,headers:i}){const o=function(e,t,n){const r=new URL(t,e);if(n)for(const[a,s]of Object.entries(n))void 0!==s&&r.searchParams.set(a,s);return r.toString()}(e.baseUrl,r,a),l=await async function(e){return e&&"none"!==e.type?"bearer"===e.type?{Authorization:`Bearer ${e.token}`}:"header"===e.type?{[e.name]:e.value}:"custom"===e.type?await e.getHeaders():{}:{}}(e.auth),u=await t(o,{method:n,headers:{...s?{"Content-Type":"application/json"}:{},...l,...i},body:s?JSON.stringify(s):void 0}),c=await u.text(),d=(u.headers.get("content-type")||"").includes("application/json"),h=d&&c?JSON.parse(c):c;if(!u.ok){const e=d?h:void 0,t=null==e?void 0:e.error;throw new up((null==t?void 0:t.message)??`Request failed with status ${u.status}`,{status:u.status,icebergType:null==t?void 0:t.type,icebergCode:null==t?void 0:t.code,details:e})}return{status:u.status,headers:u.headers,data:h}}}}function dp(e){return e.join("")}var hp=class{constructor(e,t=""){this.client=e,this.prefix=t}async listNamespaces(e){const t=e?{parent:dp(e.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:t})).data.namespaces.map(e=>({namespace:e}))}async createNamespace(e,t){const n={namespace:e.namespace,properties:null==t?void 0:t.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:n})).data}async dropNamespace(e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${dp(e.namespace)}`})}async loadNamespaceMetadata(e){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${dp(e.namespace)}`})).data.properties}}async namespaceExists(e){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${dp(e.namespace)}`}),!0}catch(t){if(t instanceof up&&404===t.status)return!1;throw t}}async createNamespaceIfNotExists(e,t){try{return await this.createNamespace(e,t)}catch(n){if(n instanceof up&&409===n.status)return;throw n}}};function fp(e){return e.join("")}var pp=class{constructor(e,t="",n){this.client=e,this.prefix=t,this.accessDelegation=n}async listTables(e){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${fp(e.namespace)}/tables`})).data.identifiers}async createTable(e,t){const n={};this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation);return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${fp(e.namespace)}/tables`,body:t,headers:n})).data.metadata}async updateTable(e,t){const n=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${fp(e.namespace)}/tables/${e.name}`,body:t});return{"metadata-location":n.data["metadata-location"],metadata:n.data.metadata}}async dropTable(e,t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${fp(e.namespace)}/tables/${e.name}`,query:{purgeRequested:String((null==t?void 0:t.purge)??!1)}})}async loadTable(e){const t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${fp(e.namespace)}/tables/${e.name}`,headers:t})).data.metadata}async tableExists(e){const t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${fp(e.namespace)}/tables/${e.name}`,headers:t}),!0}catch(n){if(n instanceof up&&404===n.status)return!1;throw n}}async createTableIfNotExists(e,t){try{return await this.createTable(e,t)}catch(n){if(n instanceof up&&409===n.status)return await this.loadTable({namespace:e.namespace,name:t.name});throw n}}},mp=class{constructor(e){var t;let n="v1";e.catalogName&&(n+=`/${e.catalogName}`);const r=e.baseUrl.endsWith("/")?e.baseUrl:`${e.baseUrl}/`;this.client=cp({baseUrl:r,auth:e.auth,fetchImpl:e.fetch}),this.accessDelegation=null==(t=e.accessDelegation)?void 0:t.join(","),this.namespaceOps=new hp(this.client,n),this.tableOps=new pp(this.client,n,this.accessDelegation)}async listNamespaces(e){return this.namespaceOps.listNamespaces(e)}async createNamespace(e,t){return this.namespaceOps.createNamespace(e,t)}async dropNamespace(e){await this.namespaceOps.dropNamespace(e)}async loadNamespaceMetadata(e){return this.namespaceOps.loadNamespaceMetadata(e)}async listTables(e){return this.tableOps.listTables(e)}async createTable(e,t){return this.tableOps.createTable(e,t)}async updateTable(e,t){return this.tableOps.updateTable(e,t)}async dropTable(e,t){await this.tableOps.dropTable(e,t)}async loadTable(e){return this.tableOps.loadTable(e)}async namespaceExists(e){return this.namespaceOps.namespaceExists(e)}async tableExists(e){return this.tableOps.tableExists(e)}async createNamespaceIfNotExists(e,t){return this.namespaceOps.createNamespaceIfNotExists(e,t)}async createTableIfNotExists(e,t){return this.tableOps.createTableIfNotExists(e,t)}},gp=class extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}};function yp(e){return"object"==typeof e&&null!==e&&"__isStorageError"in e}var vp=class extends gp{constructor(e,t,n){super(e),this.name="StorageApiError",this.status=t,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},bp=class extends gp{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}};const wp=e=>e?(...t)=>e(...t):(...e)=>fetch(...e),_p=e=>{if(Array.isArray(e))return e.map(e=>_p(e));if("function"==typeof e||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([e,n])=>{const r=e.replace(/([-_][a-z])/gi,e=>e.toUpperCase().replace(/[-_]/g,""));t[r]=_p(n)}),t};function Sp(e){return(Sp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function kp(e){var t=function(e,t){if("object"!=Sp(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=Sp(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Sp(t)?t:t+""}function Ep(e,t,n){return(t=kp(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Tp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Cp(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Tp(Object(n),!0).forEach(function(t){Ep(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Tp(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}const xp=e=>{var t;return e.msg||e.message||e.error_description||("string"==typeof e.error?e.error:null===(t=e.error)||void 0===t?void 0:t.message)||JSON.stringify(e)},Op=async(e,t,n)=>{e instanceof await Response&&!(null==n?void 0:n.noResolveJson)?e.json().then(n=>{const r=e.status||500,a=(null==n?void 0:n.statusCode)||r+"";t(new vp(xp(n),r,a))}).catch(e=>{t(new bp(xp(e),e))}):t(new bp(xp(e),e))},Ip=(e,t,n,r)=>{const a={method:e,headers:(null==t?void 0:t.headers)||{}};return"GET"!==e&&r?((e=>{if("object"!=typeof e||null===e)return!1;const t=Object.getPrototypeOf(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||Symbol.toStringTag in e||Symbol.iterator in e)})(r)?(a.headers=Cp({"Content-Type":"application/json"},null==t?void 0:t.headers),a.body=JSON.stringify(r)):a.body=r,(null==t?void 0:t.duplex)&&(a.duplex=t.duplex),Cp(Cp({},a),n)):a};async function Pp(e,t,n,r,a,s){return new Promise((i,o)=>{e(n,Ip(t,r,a,s)).then(e=>{if(!e.ok)throw e;return(null==r?void 0:r.noResolveJson)?e:e.json()}).then(e=>i(e)).catch(e=>Op(e,o,r))})}async function jp(e,t,n,r){return Pp(e,"GET",t,n,r)}async function Rp(e,t,n,r,a){return Pp(e,"POST",t,r,a,n)}async function Ap(e,t,n,r,a){return Pp(e,"PUT",t,r,a,n)}async function Np(e,t,n,r,a){return Pp(e,"DELETE",t,r,a,n)}var Dp=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}async execute(){try{return{data:(await this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(yp(e))return{data:null,error:e};throw e}}};let $p;$p=Symbol.toStringTag;var Lp=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t,this[$p]="BlobDownloadBuilder",this.promise=null}asStream(){return new Dp(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.getPromise().then(e,t)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){try{return{data:await(await this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(yp(e))return{data:null,error:e};throw e}}};const Up={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Mp={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var Bp=class{constructor(e,t={},n,r){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.bucketId=n,this.fetch=wp(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(e,t,n,r){var a=this;try{let s;const i=Cp(Cp({},Mp),r);let o=Cp(Cp({},a.headers),"POST"===e&&{"x-upsert":String(i.upsert)});const l=i.metadata;"undefined"!=typeof Blob&&n instanceof Blob?(s=new FormData,s.append("cacheControl",i.cacheControl),l&&s.append("metadata",a.encodeMetadata(l)),s.append("",n)):"undefined"!=typeof FormData&&n instanceof FormData?(s=n,s.has("cacheControl")||s.append("cacheControl",i.cacheControl),l&&!s.has("metadata")&&s.append("metadata",a.encodeMetadata(l))):(s=n,o["cache-control"]=`max-age=${i.cacheControl}`,o["content-type"]=i.contentType,l&&(o["x-metadata"]=a.toBase64(a.encodeMetadata(l))),("undefined"!=typeof ReadableStream&&s instanceof ReadableStream||s&&"object"==typeof s&&"pipe"in s&&"function"==typeof s.pipe)&&!i.duplex&&(i.duplex="half")),(null==r?void 0:r.headers)&&(o=Cp(Cp({},o),r.headers));const u=a._removeEmptyFolders(t),c=a._getFinalPath(u),d=await("PUT"==e?Ap:Rp)(a.fetch,`${a.url}/object/${c}`,s,Cp({headers:o},(null==i?void 0:i.duplex)?{duplex:i.duplex}:{}));return{data:{path:u,id:d.Id,fullPath:d.Key},error:null}}catch(s){if(a.shouldThrowOnError)throw s;if(yp(s))return{data:null,error:s};throw s}}async upload(e,t,n){return this.uploadOrUpdate("POST",e,t,n)}async uploadToSignedUrl(e,t,n,r){var a=this;const s=a._removeEmptyFolders(e),i=a._getFinalPath(s),o=new URL(a.url+`/object/upload/sign/${i}`);o.searchParams.set("token",t);try{let e;const t=Cp({upsert:Mp.upsert},r),i=Cp(Cp({},a.headers),{"x-upsert":String(t.upsert)});return"undefined"!=typeof Blob&&n instanceof Blob?(e=new FormData,e.append("cacheControl",t.cacheControl),e.append("",n)):"undefined"!=typeof FormData&&n instanceof FormData?(e=n,e.append("cacheControl",t.cacheControl)):(e=n,i["cache-control"]=`max-age=${t.cacheControl}`,i["content-type"]=t.contentType),{data:{path:s,fullPath:(await Ap(a.fetch,o.toString(),e,{headers:i})).Key},error:null}}catch(l){if(a.shouldThrowOnError)throw l;if(yp(l))return{data:null,error:l};throw l}}async createSignedUploadUrl(e,t){var n=this;try{let r=n._getFinalPath(e);const a=Cp({},n.headers);(null==t?void 0:t.upsert)&&(a["x-upsert"]="true");const s=await Rp(n.fetch,`${n.url}/object/upload/sign/${r}`,{},{headers:a}),i=new URL(n.url+s.url),o=i.searchParams.get("token");if(!o)throw new gp("No token returned by API");return{data:{signedUrl:i.toString(),path:e,token:o},error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(yp(r))return{data:null,error:r};throw r}}async update(e,t,n){return this.uploadOrUpdate("PUT",e,t,n)}async move(e,t,n){var r=this;try{return{data:await Rp(r.fetch,`${r.url}/object/move`,{bucketId:r.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null==n?void 0:n.destinationBucket},{headers:r.headers}),error:null}}catch(a){if(r.shouldThrowOnError)throw a;if(yp(a))return{data:null,error:a};throw a}}async copy(e,t,n){var r=this;try{return{data:{path:(await Rp(r.fetch,`${r.url}/object/copy`,{bucketId:r.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null==n?void 0:n.destinationBucket},{headers:r.headers})).Key},error:null}}catch(a){if(r.shouldThrowOnError)throw a;if(yp(a))return{data:null,error:a};throw a}}async createSignedUrl(e,t,n){var r=this;try{let a=r._getFinalPath(e),s=await Rp(r.fetch,`${r.url}/object/sign/${a}`,Cp({expiresIn:t},(null==n?void 0:n.transform)?{transform:n.transform}:{}),{headers:r.headers});const i=(null==n?void 0:n.download)?`&download=${!0===n.download?"":n.download}`:"";return s={signedUrl:encodeURI(`${r.url}${s.signedURL}${i}`)},{data:s,error:null}}catch(a){if(r.shouldThrowOnError)throw a;if(yp(a))return{data:null,error:a};throw a}}async createSignedUrls(e,t,n){var r=this;try{const a=await Rp(r.fetch,`${r.url}/object/sign/${r.bucketId}`,{expiresIn:t,paths:e},{headers:r.headers}),s=(null==n?void 0:n.download)?`&download=${!0===n.download?"":n.download}`:"";return{data:a.map(e=>Cp(Cp({},e),{},{signedUrl:e.signedURL?encodeURI(`${r.url}${e.signedURL}${s}`):null})),error:null}}catch(a){if(r.shouldThrowOnError)throw a;if(yp(a))return{data:null,error:a};throw a}}download(e,t){const n=void 0!==(null==t?void 0:t.transform)?"render/image/authenticated":"object",r=this.transformOptsToQueryString((null==t?void 0:t.transform)||{}),a=r?`?${r}`:"",s=this._getFinalPath(e);return new Lp(()=>jp(this.fetch,`${this.url}/${n}/${s}${a}`,{headers:this.headers,noResolveJson:!0}),this.shouldThrowOnError)}async info(e){var t=this;const n=t._getFinalPath(e);try{return{data:_p(await jp(t.fetch,`${t.url}/object/info/${n}`,{headers:t.headers})),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(yp(r))return{data:null,error:r};throw r}}async exists(e){var t=this;const n=t._getFinalPath(e);try{return await async function(e,t,n,r){return Pp(e,"HEAD",t,Cp(Cp({},n),{},{noResolveJson:!0}),r)}(t.fetch,`${t.url}/object/${n}`,{headers:t.headers}),{data:!0,error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(yp(r)&&r instanceof bp){const e=r.originalError;if([400,404].includes(null==e?void 0:e.status))return{data:!1,error:r}}throw r}}getPublicUrl(e,t){const n=this._getFinalPath(e),r=[],a=(null==t?void 0:t.download)?`download=${!0===t.download?"":t.download}`:"";""!==a&&r.push(a);const s=void 0!==(null==t?void 0:t.transform)?"render/image":"object",i=this.transformOptsToQueryString((null==t?void 0:t.transform)||{});""!==i&&r.push(i);let o=r.join("&");return""!==o&&(o=`?${o}`),{data:{publicUrl:encodeURI(`${this.url}/${s}/public/${n}${o}`)}}}async remove(e){var t=this;try{return{data:await Np(t.fetch,`${t.url}/object/${t.bucketId}`,{prefixes:e},{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(yp(n))return{data:null,error:n};throw n}}async list(e,t,n){var r=this;try{const a=Cp(Cp(Cp({},Up),t),{},{prefix:e||""});return{data:await Rp(r.fetch,`${r.url}/object/list/${r.bucketId}`,a,{headers:r.headers},n),error:null}}catch(a){if(r.shouldThrowOnError)throw a;if(yp(a))return{data:null,error:a};throw a}}async listV2(e,t){var n=this;try{const r=Cp({},e);return{data:await Rp(n.fetch,`${n.url}/object/list-v2/${n.bucketId}`,r,{headers:n.headers},t),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(yp(r))return{data:null,error:r};throw r}}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return"undefined"!=typeof Buffer?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}};const zp="2.90.1",Fp={"X-Client-Info":`storage-js/${zp}`};var qp=class{constructor(e,t={},n,r){this.shouldThrowOnError=!1;const a=new URL(e);(null==r?void 0:r.useNewHostname)&&/supabase\.(co|in|red)$/.test(a.hostname)&&!a.hostname.includes("storage.supabase.")&&(a.hostname=a.hostname.replace("supabase.","storage.supabase.")),this.url=a.href.replace(/\/$/,""),this.headers=Cp(Cp({},Fp),t),this.fetch=wp(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(e){var t=this;try{const n=t.listBucketOptionsToQueryString(e);return{data:await jp(t.fetch,`${t.url}/bucket${n}`,{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(yp(n))return{data:null,error:n};throw n}}async getBucket(e){var t=this;try{return{data:await jp(t.fetch,`${t.url}/bucket/${e}`,{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(yp(n))return{data:null,error:n};throw n}}async createBucket(e,t={public:!1}){var n=this;try{return{data:await Rp(n.fetch,`${n.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(yp(r))return{data:null,error:r};throw r}}async updateBucket(e,t){var n=this;try{return{data:await Ap(n.fetch,`${n.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(yp(r))return{data:null,error:r};throw r}}async emptyBucket(e){var t=this;try{return{data:await Rp(t.fetch,`${t.url}/bucket/${e}/empty`,{},{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(yp(n))return{data:null,error:n};throw n}}async deleteBucket(e){var t=this;try{return{data:await Np(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(yp(n))return{data:null,error:n};throw n}}listBucketOptionsToQueryString(e){const t={};return e&&("limit"in e&&(t.limit=String(e.limit)),"offset"in e&&(t.offset=String(e.offset)),e.search&&(t.search=e.search),e.sortColumn&&(t.sortColumn=e.sortColumn),e.sortOrder&&(t.sortOrder=e.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}},Hp=class{constructor(e,t={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Cp(Cp({},Fp),t),this.fetch=wp(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(e){var t=this;try{return{data:await Rp(t.fetch,`${t.url}/bucket`,{name:e},{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(yp(n))return{data:null,error:n};throw n}}async listBuckets(e){var t=this;try{const n=new URLSearchParams;void 0!==(null==e?void 0:e.limit)&&n.set("limit",e.limit.toString()),void 0!==(null==e?void 0:e.offset)&&n.set("offset",e.offset.toString()),(null==e?void 0:e.sortColumn)&&n.set("sortColumn",e.sortColumn),(null==e?void 0:e.sortOrder)&&n.set("sortOrder",e.sortOrder),(null==e?void 0:e.search)&&n.set("search",e.search);const r=n.toString(),a=r?`${t.url}/bucket?${r}`:`${t.url}/bucket`;return{data:await jp(t.fetch,a,{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(yp(n))return{data:null,error:n};throw n}}async deleteBucket(e){var t=this;try{return{data:await Np(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(yp(n))return{data:null,error:n};throw n}}from(e){var t=this;if(!(e=>!(!e||"string"!=typeof e)&&!(0===e.length||e.length>100)&&e.trim()===e&&!e.includes("/")&&!e.includes("\\")&&/^[\w!.\*'() &$@=;:+,?-]+$/.test(e))(e))throw new gp("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const n=new mp({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:async()=>t.headers},fetch:this.fetch}),r=this.shouldThrowOnError;return new Proxy(n,{get(e,t){const n=e[t];return"function"!=typeof n?n:async(...t)=>{try{return{data:await n.apply(e,t),error:null}}catch(a){if(r)throw a;return{data:null,error:a}}}}})}};const Wp={"X-Client-Info":`storage-js/${zp}`,"Content-Type":"application/json"};var Vp=class extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function Kp(e){return"object"==typeof e&&null!==e&&"__isStorageVectorsError"in e}var Jp=class extends Vp{constructor(e,t,n){super(e),this.name="StorageVectorsApiError",this.status=t,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},Gp=class extends Vp{constructor(e,t){super(e),this.name="StorageVectorsUnknownError",this.originalError=t}};const Yp=e=>e?(...t)=>e(...t):(...e)=>fetch(...e),Qp=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Xp=(e,t,n,r)=>{const a={method:e,headers:(null==t?void 0:t.headers)||{}};return r?((e=>{if("object"!=typeof e||null===e)return!1;const t=Object.getPrototypeOf(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||Symbol.toStringTag in e||Symbol.iterator in e)})(r)?(a.headers=Cp({"Content-Type":"application/json"},null==t?void 0:t.headers),a.body=JSON.stringify(r)):a.body=r,Cp(Cp({},a),n)):a};async function Zp(e,t,n,r,a,s){return new Promise((i,o)=>{e(n,Xp(t,r,a,s)).then(e=>{if(!e.ok)throw e;if(null==r?void 0:r.noResolveJson)return e;const t=e.headers.get("content-type");return t&&t.includes("application/json")?e.json():{}}).then(e=>i(e)).catch(e=>(async(e,t,n)=>{if(e&&"object"==typeof e&&"status"in e&&"ok"in e&&"number"==typeof e.status&&!(null==n?void 0:n.noResolveJson)){const n=e.status||500,r=e;if("function"==typeof r.json)r.json().then(e=>{const r=(null==e?void 0:e.statusCode)||(null==e?void 0:e.code)||n+"";t(new Jp(Qp(e),n,r))}).catch(()=>{const e=n+"";t(new Jp(r.statusText||`HTTP ${n} error`,n,e))});else{const e=n+"";t(new Jp(r.statusText||`HTTP ${n} error`,n,e))}}else t(new Gp(Qp(e),e))})(e,o,r))})}async function em(e,t,n,r,a){return Zp(e,"POST",t,r,a,n)}var tm=class{constructor(e,t={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Cp(Cp({},Wp),t),this.fetch=Yp(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(e){var t=this;try{return{data:await em(t.fetch,`${t.url}/CreateIndex`,e,{headers:t.headers})||{},error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Kp(n))return{data:null,error:n};throw n}}async getIndex(e,t){var n=this;try{return{data:await em(n.fetch,`${n.url}/GetIndex`,{vectorBucketName:e,indexName:t},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Kp(r))return{data:null,error:r};throw r}}async listIndexes(e){var t=this;try{return{data:await em(t.fetch,`${t.url}/ListIndexes`,e,{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Kp(n))return{data:null,error:n};throw n}}async deleteIndex(e,t){var n=this;try{return{data:await em(n.fetch,`${n.url}/DeleteIndex`,{vectorBucketName:e,indexName:t},{headers:n.headers})||{},error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Kp(r))return{data:null,error:r};throw r}}},nm=class{constructor(e,t={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Cp(Cp({},Wp),t),this.fetch=Yp(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(e){var t=this;try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:await em(t.fetch,`${t.url}/PutVectors`,e,{headers:t.headers})||{},error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Kp(n))return{data:null,error:n};throw n}}async getVectors(e){var t=this;try{return{data:await em(t.fetch,`${t.url}/GetVectors`,e,{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Kp(n))return{data:null,error:n};throw n}}async listVectors(e){var t=this;try{if(void 0!==e.segmentCount){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(void 0!==e.segmentIndex&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error("segmentIndex must be between 0 and "+(e.segmentCount-1))}return{data:await em(t.fetch,`${t.url}/ListVectors`,e,{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Kp(n))return{data:null,error:n};throw n}}async queryVectors(e){var t=this;try{return{data:await em(t.fetch,`${t.url}/QueryVectors`,e,{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Kp(n))return{data:null,error:n};throw n}}async deleteVectors(e){var t=this;try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:await em(t.fetch,`${t.url}/DeleteVectors`,e,{headers:t.headers})||{},error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Kp(n))return{data:null,error:n};throw n}}},rm=class{constructor(e,t={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Cp(Cp({},Wp),t),this.fetch=Yp(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(e){var t=this;try{return{data:await em(t.fetch,`${t.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{},error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Kp(n))return{data:null,error:n};throw n}}async getBucket(e){var t=this;try{return{data:await em(t.fetch,`${t.url}/GetVectorBucket`,{vectorBucketName:e},{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Kp(n))return{data:null,error:n};throw n}}async listBuckets(e={}){var t=this;try{return{data:await em(t.fetch,`${t.url}/ListVectorBuckets`,e,{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Kp(n))return{data:null,error:n};throw n}}async deleteBucket(e){var t=this;try{return{data:await em(t.fetch,`${t.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{},error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Kp(n))return{data:null,error:n};throw n}}},am=class extends rm{constructor(e,t={}){super(e,t.headers||{},t.fetch)}from(e){return new sm(this.url,this.headers,e,this.fetch)}async createBucket(e){return(()=>super.createBucket)().call(this,e)}async getBucket(e){return(()=>super.getBucket)().call(this,e)}async listBuckets(e={}){return(()=>super.listBuckets)().call(this,e)}async deleteBucket(e){return(()=>super.deleteBucket)().call(this,e)}},sm=class extends tm{constructor(e,t,n,r){super(e,t,r),this.vectorBucketName=n}async createIndex(e){return(()=>super.createIndex)().call(this,Cp(Cp({},e),{},{vectorBucketName:this.vectorBucketName}))}async listIndexes(e={}){return(()=>super.listIndexes)().call(this,Cp(Cp({},e),{},{vectorBucketName:this.vectorBucketName}))}async getIndex(e){return(()=>super.getIndex)().call(this,this.vectorBucketName,e)}async deleteIndex(e){return(()=>super.deleteIndex)().call(this,this.vectorBucketName,e)}index(e){return new im(this.url,this.headers,this.vectorBucketName,e,this.fetch)}},im=class extends nm{constructor(e,t,n,r,a){super(e,t,a),this.vectorBucketName=n,this.indexName=r}async putVectors(e){var t=this;return(()=>super.putVectors)().call(t,Cp(Cp({},e),{},{vectorBucketName:t.vectorBucketName,indexName:t.indexName}))}async getVectors(e){var t=this;return(()=>super.getVectors)().call(t,Cp(Cp({},e),{},{vectorBucketName:t.vectorBucketName,indexName:t.indexName}))}async listVectors(e={}){var t=this;return(()=>super.listVectors)().call(t,Cp(Cp({},e),{},{vectorBucketName:t.vectorBucketName,indexName:t.indexName}))}async queryVectors(e){var t=this;return(()=>super.queryVectors)().call(t,Cp(Cp({},e),{},{vectorBucketName:t.vectorBucketName,indexName:t.indexName}))}async deleteVectors(e){var t=this;return(()=>super.deleteVectors)().call(t,Cp(Cp({},e),{},{vectorBucketName:t.vectorBucketName,indexName:t.indexName}))}},om=class extends qp{constructor(e,t={},n,r){super(e,t,n,r)}from(e){return new Bp(this.url,this.headers,e,this.fetch)}get vectors(){return new am(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new Hp(this.url+"/iceberg",this.headers,this.fetch)}};const lm="2.90.1",um=3e4,cm=9e4,dm={"X-Client-Info":`gotrue-js/${lm}`},hm="X-Supabase-Api-Version",fm={timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"},pm=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i;class mm extends Error{constructor(e,t,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=n}}function gm(e){return"object"==typeof e&&null!==e&&"__isAuthError"in e}class ym extends mm{constructor(e,t,n){super(e,t,n),this.name="AuthApiError",this.status=t,this.code=n}}class vm extends mm{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class bm extends mm{constructor(e,t,n,r){super(e,n,r),this.name=t,this.status=n}}class wm extends bm{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}class _m extends bm{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Sm extends bm{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class km extends bm{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Em extends bm{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Tm extends bm{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class Cm extends bm{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function xm(e){return gm(e)&&"AuthRetryableFetchError"===e.name}class Om extends bm{constructor(e,t,n){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=n}}class Im extends bm{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Pm="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),jm=" \t\n\r=".split(""),Rm=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<jm.length;t+=1)e[jm[t].charCodeAt(0)]=-2;for(let t=0;t<Pm.length;t+=1)e[Pm[t].charCodeAt(0)]=t;return e})();function Am(e,t,n){if(null!==e)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const e=t.queue>>t.queuedBits-6&63;n(Pm[e]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const e=t.queue>>t.queuedBits-6&63;n(Pm[e]),t.queuedBits-=6}}function Nm(e,t,n){const r=Rm[e];if(!(r>-1)){if(-2===r)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8}function Dm(e){const t=[],n=e=>{t.push(String.fromCodePoint(e))},r={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},s=e=>{!function(e,t,n){if(0===t.utf8seq){if(e<=127)return void n(e);for(let n=1;n<6;n+=1)if(!(e>>7-n&1)){t.utf8seq=n;break}if(2===t.utf8seq)t.codepoint=31&e;else if(3===t.utf8seq)t.codepoint=15&e;else{if(4!==t.utf8seq)throw new Error("Invalid UTF-8 sequence");t.codepoint=7&e}t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|63&e,t.utf8seq-=1,0===t.utf8seq&&n(t.codepoint)}}(e,r,n)};for(let i=0;i<e.length;i+=1)Nm(e.charCodeAt(i),a,s);return t.join("")}function $m(e,t){if(!(e<=127)){if(e<=2047)return t(192|e>>6),void t(128|63&e);if(e<=65535)return t(224|e>>12),t(128|e>>6&63),void t(128|63&e);if(e<=1114111)return t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),void t(128|63&e);throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}t(e)}function Lm(e){const t=[],n={queue:0,queuedBits:0},r=e=>{t.push(e)};for(let a=0;a<e.length;a+=1)Nm(e.charCodeAt(a),n,r);return new Uint8Array(t)}function Um(e){const t=[];return function(e,t){for(let n=0;n<e.length;n+=1){let r=e.charCodeAt(n);if(r>55295&&r<=56319){const t=1024*(r-55296)&65535;r=65536+(e.charCodeAt(n+1)-56320&65535|t),n+=1}$m(r,t)}}(e,e=>t.push(e)),new Uint8Array(t)}function Mm(e){const t=[],n={queue:0,queuedBits:0},r=e=>{t.push(e)};return e.forEach(e=>Am(e,n,r)),Am(null,n,r),t.join("")}const Bm=()=>"undefined"!=typeof window&&"undefined"!=typeof document,zm={tested:!1,writable:!1},Fm=()=>{if(!Bm())return!1;try{if("object"!=typeof globalThis.localStorage)return!1}catch(Jw){return!1}if(zm.tested)return zm.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),zm.tested=!0,zm.writable=!0}catch(Jw){zm.tested=!0,zm.writable=!1}return zm.writable};const qm=e=>e?(...t)=>e(...t):(...e)=>fetch(...e),Hm=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},Wm=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch(r){return n}},Vm=async(e,t)=>{await e.removeItem(t)};class Km{constructor(){this.promise=new Km.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}function Jm(e){const t=e.split(".");if(3!==t.length)throw new Im("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!pm.test(t[n]))throw new Im("JWT not in base64url format");return{header:JSON.parse(Dm(t[0])),payload:JSON.parse(Dm(t[1])),signature:Lm(t[2]),raw:{header:t[0],payload:t[1]}}}function Gm(e){return("0"+e.toString(16)).substr(-2)}async function Ym(e){if(!("undefined"!=typeof crypto&&void 0!==crypto.subtle&&"undefined"!=typeof TextEncoder))return e;const t=await async function(e){const t=(new TextEncoder).encode(e),n=await crypto.subtle.digest("SHA-256",t),r=new Uint8Array(n);return Array.from(r).map(e=>String.fromCharCode(e)).join("")}(e);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Qm(e,t,n=!1){const r=function(){const e=new Uint32Array(56);if("undefined"==typeof crypto){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",t=e.length;let n="";for(let r=0;r<56;r++)n+=e.charAt(Math.floor(Math.random()*t));return n}return crypto.getRandomValues(e),Array.from(e,Gm).join("")}();let a=r;n&&(a+="/PASSWORD_RECOVERY"),await Hm(e,`${t}-code-verifier`,a);const s=await Ym(r);return[s,r===s?"plain":"s256"]}Km.promiseConstructor=Promise;const Xm=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;const Zm=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function eg(e){if(!Zm.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function tg(){return new Proxy({},{get:(e,t)=>{if("__isUserNotAvailableProxy"===t)return!0;if("symbol"==typeof t){const e=t.toString();if("Symbol(Symbol.toPrimitive)"===e||"Symbol(Symbol.toStringTag)"===e||"Symbol(util.inspect.custom)"===e)return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function ng(e){return JSON.parse(JSON.stringify(e))}const rg=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),ag=[502,503,504];async function sg(e){var t,n;if(!("object"==typeof(n=e)&&null!==n&&"status"in n&&"ok"in n&&"json"in n&&"function"==typeof n.json))throw new Cm(rg(e),0);if(ag.includes(e.status))throw new Cm(rg(e),e.status);let r,a;try{r=await e.json()}catch(Jw){throw new vm(rg(Jw),Jw)}const s=function(e){const t=e.headers.get(hm);if(!t)return null;if(!t.match(Xm))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch(Jw){return null}}(e);if(s&&s.getTime()>=fm.timestamp&&"object"==typeof r&&r&&"string"==typeof r.code?a=r.code:"object"==typeof r&&r&&"string"==typeof r.error_code&&(a=r.error_code),a){if("weak_password"===a)throw new Om(rg(r),e.status,(null===(t=r.weak_password)||void 0===t?void 0:t.reasons)||[]);if("session_not_found"===a)throw new wm}else if("object"==typeof r&&r&&"object"==typeof r.weak_password&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((e,t)=>e&&"string"==typeof t,!0))throw new Om(rg(r),e.status,r.weak_password.reasons);throw new ym(rg(r),e.status||500,a)}async function ig(e,t,n,r){var a;const s=Object.assign({},null==r?void 0:r.headers);s[hm]||(s[hm]=fm.name),(null==r?void 0:r.jwt)&&(s.Authorization=`Bearer ${r.jwt}`);const i=null!==(a=null==r?void 0:r.query)&&void 0!==a?a:{};(null==r?void 0:r.redirectTo)&&(i.redirect_to=r.redirectTo);const o=Object.keys(i).length?"?"+new URLSearchParams(i).toString():"",l=await async function(e,t,n,r,a,s){const i=((e,t,n,r)=>{const a={method:e,headers:(null==t?void 0:t.headers)||{}};return"GET"===e?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},null==t?void 0:t.headers),a.body=JSON.stringify(r),Object.assign(Object.assign({},a),n))})(t,r,a,s);let o;try{o=await e(n,Object.assign({},i))}catch(Jw){throw new Cm(rg(Jw),0)}o.ok||await sg(o);if(null==r?void 0:r.noResolveJson)return o;try{return await o.json()}catch(Jw){await sg(Jw)}}(e,t,n+o,{headers:s,noResolveJson:null==r?void 0:r.noResolveJson},{},null==r?void 0:r.body);return(null==r?void 0:r.xform)?null==r?void 0:r.xform(l):{data:Object.assign({},l),error:null}}function og(e){var t;let n=null;var r;(function(e){return e.access_token&&e.refresh_token&&e.expires_in})(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=(r=e.expires_in,Math.round(Date.now()/1e3)+r)));return{data:{session:n,user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function lg(e){const t=og(e);return!t.error&&e.weak_password&&"object"==typeof e.weak_password&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&"string"==typeof e.weak_password.message&&e.weak_password.reasons.reduce((e,t)=>e&&"string"==typeof t,!0)&&(t.data.weak_password=e.weak_password),t}function ug(e){var t;return{data:{user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function cg(e){return{data:e,error:null}}function dg(e){const{action_link:t,email_otp:n,hashed_token:r,redirect_to:a,verification_type:s}=e,i=nf(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]);return{data:{properties:{action_link:t,email_otp:n,hashed_token:r,redirect_to:a,verification_type:s},user:Object.assign({},i)},error:null}}function hg(e){return e}const fg=["global","local","others"];class pg{constructor({url:e="",headers:t={},fetch:n}){this.url=e,this.headers=t,this.fetch=qm(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,t=fg[0]){if(fg.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${fg.join(", ")}`);try{return await ig(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(gm(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,t={}){try{return await ig(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:ug})}catch(n){if(gm(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:t}=e,n=nf(e,["options"]),r=Object.assign(Object.assign({},n),t);return"newEmail"in n&&(r.new_email=null==n?void 0:n.newEmail,delete r.newEmail),await ig(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:r,headers:this.headers,xform:dg,redirectTo:null==t?void 0:t.redirectTo})}catch(t){if(gm(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await ig(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:ug})}catch(t){if(gm(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,n,r,a,s,i,o;try{const l={nextPage:null,lastPage:0,total:0},u=await ig(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:null!==(n=null===(t=null==e?void 0:e.page)||void 0===t?void 0:t.toString())&&void 0!==n?n:"",per_page:null!==(a=null===(r=null==e?void 0:e.perPage)||void 0===r?void 0:r.toString())&&void 0!==a?a:""},xform:hg});if(u.error)throw u.error;const c=await u.json(),d=null!==(s=u.headers.get("x-total-count"))&&void 0!==s?s:0,h=null!==(o=null===(i=u.headers.get("link"))||void 0===i?void 0:i.split(","))&&void 0!==o?o:[];return h.length>0&&(h.forEach(e=>{const t=parseInt(e.split(";")[0].split("=")[1].substring(0,1)),n=JSON.parse(e.split(";")[1].split("=")[1]);l[`${n}Page`]=t}),l.total=parseInt(d)),{data:Object.assign(Object.assign({},c),l),error:null}}catch(l){if(gm(l))return{data:{users:[]},error:l};throw l}}async getUserById(e){eg(e);try{return await ig(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:ug})}catch(t){if(gm(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){eg(e);try{return await ig(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:ug})}catch(n){if(gm(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,t=!1){eg(e);try{return await ig(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:ug})}catch(n){if(gm(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){eg(e.userId);try{const{data:t,error:n}=await ig(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:e=>({data:{factors:e},error:null})});return{data:t,error:n}}catch(t){if(gm(t))return{data:null,error:t};throw t}}async _deleteFactor(e){eg(e.userId),eg(e.id);try{return{data:await ig(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(gm(t))return{data:null,error:t};throw t}}async _listOAuthClients(e){var t,n,r,a,s,i,o;try{const l={nextPage:null,lastPage:0,total:0},u=await ig(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:null!==(n=null===(t=null==e?void 0:e.page)||void 0===t?void 0:t.toString())&&void 0!==n?n:"",per_page:null!==(a=null===(r=null==e?void 0:e.perPage)||void 0===r?void 0:r.toString())&&void 0!==a?a:""},xform:hg});if(u.error)throw u.error;const c=await u.json(),d=null!==(s=u.headers.get("x-total-count"))&&void 0!==s?s:0,h=null!==(o=null===(i=u.headers.get("link"))||void 0===i?void 0:i.split(","))&&void 0!==o?o:[];return h.length>0&&(h.forEach(e=>{const t=parseInt(e.split(";")[0].split("=")[1].substring(0,1)),n=JSON.parse(e.split(";")[1].split("=")[1]);l[`${n}Page`]=t}),l.total=parseInt(d)),{data:Object.assign(Object.assign({},c),l),error:null}}catch(l){if(gm(l))return{data:{clients:[]},error:l};throw l}}async _createOAuthClient(e){try{return await ig(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:e=>({data:e,error:null})})}catch(t){if(gm(t))return{data:null,error:t};throw t}}async _getOAuthClient(e){try{return await ig(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:e=>({data:e,error:null})})}catch(t){if(gm(t))return{data:null,error:t};throw t}}async _updateOAuthClient(e,t){try{return await ig(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:t,headers:this.headers,xform:e=>({data:e,error:null})})}catch(n){if(gm(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(e){try{return await ig(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(t){if(gm(t))return{data:null,error:t};throw t}}async _regenerateOAuthClientSecret(e){try{return await ig(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:e=>({data:e,error:null})})}catch(t){if(gm(t))return{data:null,error:t};throw t}}}function mg(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}const gg=!!(globalThis&&Fm()&&globalThis.localStorage&&"true"===globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug"));class yg extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class vg extends yg{}async function bg(e,t,n){const r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort()},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,0===t?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async r=>{if(!r){if(0===t)throw new vg(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(gg)try{await globalThis.navigator.locks.query()}catch(Jw){}return await n()}try{return await n()}finally{}}))}function wg(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function _g(e){const t=(new TextEncoder).encode(e);return"0x"+Array.from(t,e=>e.toString(16).padStart(2,"0")).join("")}class Sg extends Error{constructor({message:e,code:t,cause:n,name:r}){var a;super(e,{cause:n}),this.__isWebAuthnError=!0,this.name=null!==(a=null!=r?r:n instanceof Error?n.name:void 0)&&void 0!==a?a:"Unknown Error",this.code=t}}class kg extends Sg{constructor(e,t){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t,message:e}),this.name="WebAuthnUnknownError",this.originalError=t}}function Eg({error:e,options:t}){var n,r,a;const{publicKey:s}=t;if(!s)throw Error("options was missing required publicKey property");if("AbortError"===e.name){if(t.signal instanceof AbortSignal)return new Sg({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if("ConstraintError"===e.name){if(!0===(null===(n=s.authenticatorSelection)||void 0===n?void 0:n.requireResidentKey))return new Sg({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if("conditional"===t.mediation&&"required"===(null===(r=s.authenticatorSelection)||void 0===r?void 0:r.userVerification))return new Sg({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if("required"===(null===(a=s.authenticatorSelection)||void 0===a?void 0:a.userVerification))return new Sg({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if("InvalidStateError"===e.name)return new Sg({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if("NotAllowedError"===e.name)return new Sg({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if("NotSupportedError"===e.name){return 0===s.pubKeyCredParams.filter(e=>"public-key"===e.type).length?new Sg({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new Sg({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e})}if("SecurityError"===e.name){const t=window.location.hostname;if(!jg(t))return new Sg({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e});if(s.rp.id!==t)return new Sg({message:`The RP ID "${s.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else if("TypeError"===e.name){if(s.user.id.byteLength<1||s.user.id.byteLength>64)return new Sg({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if("UnknownError"===e.name)return new Sg({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Sg({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function Tg({error:e,options:t}){const{publicKey:n}=t;if(!n)throw Error("options was missing required publicKey property");if("AbortError"===e.name){if(t.signal instanceof AbortSignal)return new Sg({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if("NotAllowedError"===e.name)return new Sg({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if("SecurityError"===e.name){const t=window.location.hostname;if(!jg(t))return new Sg({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e});if(n.rpId!==t)return new Sg({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else if("UnknownError"===e.name)return new Sg({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Sg({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}const Cg=new class{createNewAbortSignal(){if(this.controller){const e=new Error("Cancelling existing WebAuthn API call for new one");e.name="AbortError",this.controller.abort(e)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}};function xg(e){if(!e)throw new Error("Credential creation options are required");if("undefined"!=typeof PublicKeyCredential&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&"function"==typeof PublicKeyCredential.parseCreationOptionsFromJSON)return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:n,excludeCredentials:r}=e,a=nf(e,["challenge","user","excludeCredentials"]),s=Lm(t).buffer,i=Object.assign(Object.assign({},n),{id:Lm(n.id).buffer}),o=Object.assign(Object.assign({},a),{challenge:s,user:i});if(r&&r.length>0){o.excludeCredentials=new Array(r.length);for(let e=0;e<r.length;e++){const t=r[e];o.excludeCredentials[e]=Object.assign(Object.assign({},t),{id:Lm(t.id).buffer,type:t.type||"public-key",transports:t.transports})}}return o}function Og(e){if(!e)throw new Error("Credential request options are required");if("undefined"!=typeof PublicKeyCredential&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&"function"==typeof PublicKeyCredential.parseRequestOptionsFromJSON)return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:n}=e,r=nf(e,["challenge","allowCredentials"]),a=Lm(t).buffer,s=Object.assign(Object.assign({},r),{challenge:a});if(n&&n.length>0){s.allowCredentials=new Array(n.length);for(let e=0;e<n.length;e++){const t=n[e];s.allowCredentials[e]=Object.assign(Object.assign({},t),{id:Lm(t.id).buffer,type:t.type||"public-key",transports:t.transports})}}return s}function Ig(e){var t;if("toJSON"in e&&"function"==typeof e.toJSON)return e.toJSON();const n=e;return{id:e.id,rawId:e.id,response:{attestationObject:Mm(new Uint8Array(e.response.attestationObject)),clientDataJSON:Mm(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:null!==(t=n.authenticatorAttachment)&&void 0!==t?t:void 0}}function Pg(e){var t;if("toJSON"in e&&"function"==typeof e.toJSON)return e.toJSON();const n=e,r=e.getClientExtensionResults(),a=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:Mm(new Uint8Array(a.authenticatorData)),clientDataJSON:Mm(new Uint8Array(a.clientDataJSON)),signature:Mm(new Uint8Array(a.signature)),userHandle:a.userHandle?Mm(new Uint8Array(a.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:null!==(t=n.authenticatorAttachment)&&void 0!==t?t:void 0}}function jg(e){return"localhost"===e||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function Rg(){var e,t;return!!(Bm()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&"function"==typeof(null===(e=null===navigator||void 0===navigator?void 0:navigator.credentials)||void 0===e?void 0:e.create)&&"function"==typeof(null===(t=null===navigator||void 0===navigator?void 0:navigator.credentials)||void 0===t?void 0:t.get))}const Ag={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},Ng={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Dg(...e){const t=e=>null!==e&&"object"==typeof e&&!Array.isArray(e),n=e=>e instanceof ArrayBuffer||ArrayBuffer.isView(e),r={};for(const a of e)if(a)for(const e in a){const s=a[e];if(void 0!==s)if(Array.isArray(s))r[e]=s;else if(n(s))r[e]=s;else if(t(s)){const n=r[e];t(n)?r[e]=Dg(n,s):r[e]=Dg(s)}else r[e]=s}return r}class $g{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:t,friendlyName:n,signal:r},a){try{const{data:s,error:i}=await this.client.mfa.challenge({factorId:e,webauthn:t});if(!s)return{data:null,error:i};const o=null!=r?r:Cg.createNewAbortSignal();if("create"===s.webauthn.type){const{user:e}=s.webauthn.credential_options.publicKey;e.name||(e.name=`${e.id}:${n}`),e.displayName||(e.displayName=e.name)}switch(s.webauthn.type){case"create":{const t=function(e,t){return Dg(Ag,e,t||{})}(s.webauthn.credential_options.publicKey,null==a?void 0:a.create),{data:n,error:r}=await async function(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new kg("Browser returned unexpected credential type",t)}:{data:null,error:new kg("Empty credential response",t)}}catch(t){return{data:null,error:Eg({error:t,options:e})}}}({publicKey:t,signal:o});return n?{data:{factorId:e,challengeId:s.id,webauthn:{type:s.webauthn.type,credential_response:n}},error:null}:{data:null,error:r}}case"request":{const t=function(e,t){return Dg(Ng,e,t||{})}(s.webauthn.credential_options.publicKey,null==a?void 0:a.request),{data:n,error:r}=await async function(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new kg("Browser returned unexpected credential type",t)}:{data:null,error:new kg("Empty credential response",t)}}catch(t){return{data:null,error:Tg({error:t,options:e})}}}(Object.assign(Object.assign({},s.webauthn.credential_options),{publicKey:t,signal:o}));return n?{data:{factorId:e,challengeId:s.id,webauthn:{type:s.webauthn.type,credential_response:n}},error:null}:{data:null,error:r}}}}catch(s){return gm(s)?{data:null,error:s}:{data:null,error:new vm("Unexpected error in challenge",s)}}}async _verify({challengeId:e,factorId:t,webauthn:n}){return this.client.mfa.verify({factorId:t,challengeId:e,webauthn:n})}async _authenticate({factorId:e,webauthn:{rpId:t=("undefined"!=typeof window?window.location.hostname:void 0),rpOrigins:n=("undefined"!=typeof window?[window.location.origin]:void 0),signal:r}={}},a){if(!t)return{data:null,error:new mm("rpId is required for WebAuthn authentication")};try{if(!Rg())return{data:null,error:new vm("Browser does not support WebAuthn",null)};const{data:s,error:i}=await this.challenge({factorId:e,webauthn:{rpId:t,rpOrigins:n},signal:r},{request:a});if(!s)return{data:null,error:i};const{webauthn:o}=s;return this._verify({factorId:e,challengeId:s.challengeId,webauthn:{type:o.type,rpId:t,rpOrigins:n,credential_response:o.credential_response}})}catch(s){return gm(s)?{data:null,error:s}:{data:null,error:new vm("Unexpected error in authenticate",s)}}}async _register({friendlyName:e,webauthn:{rpId:t=("undefined"!=typeof window?window.location.hostname:void 0),rpOrigins:n=("undefined"!=typeof window?[window.location.origin]:void 0),signal:r}={}},a){if(!t)return{data:null,error:new mm("rpId is required for WebAuthn registration")};try{if(!Rg())return{data:null,error:new vm("Browser does not support WebAuthn",null)};const{data:s,error:i}=await this._enroll({friendlyName:e});if(!s)return await this.client.mfa.listFactors().then(t=>{var n;return null===(n=t.data)||void 0===n?void 0:n.all.find(t=>"webauthn"===t.factor_type&&t.friendly_name===e&&"unverified"!==t.status)}).then(e=>e?this.client.mfa.unenroll({factorId:null==e?void 0:e.id}):void 0),{data:null,error:i};const{data:o,error:l}=await this._challenge({factorId:s.id,friendlyName:s.friendly_name,webauthn:{rpId:t,rpOrigins:n},signal:r},{create:a});return o?this._verify({factorId:s.id,challengeId:o.challengeId,webauthn:{rpId:t,rpOrigins:n,type:o.webauthn.type,credential_response:o.webauthn.credential_response}}):{data:null,error:l}}catch(s){return gm(s)?{data:null,error:s}:{data:null,error:new vm("Unexpected error in register",s)}}}}!function(){if("object"!=typeof globalThis)try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch(Jw){"undefined"!=typeof self&&(self.globalThis=self)}}();const Lg={url:"http://localhost:9999",storageKey:"supabase.auth.token",autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:dm,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function Ug(e,t,n){return await n()}const Mg={};class Bg{get jwks(){var e,t;return null!==(t=null===(e=Mg[this.storageKey])||void 0===e?void 0:e.jwks)&&void 0!==t?t:{keys:[]}}set jwks(e){Mg[this.storageKey]=Object.assign(Object.assign({},Mg[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return null!==(t=null===(e=Mg[this.storageKey])||void 0===e?void 0:e.cachedAt)&&void 0!==t?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Mg[this.storageKey]=Object.assign(Object.assign({},Mg[this.storageKey]),{cachedAt:e})}constructor(e){var t,n,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const a=Object.assign(Object.assign({},Lg),e);if(this.storageKey=a.storageKey,this.instanceID=null!==(t=Bg.nextInstanceID[this.storageKey])&&void 0!==t?t:0,Bg.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!a.debug,"function"==typeof a.debug&&(this.logger=a.debug),this.instanceID>0&&Bm()){this._logPrefix();this.logDebugMessages}if(this.persistSession=a.persistSession,this.autoRefreshToken=a.autoRefreshToken,this.admin=new pg({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=qm(a.fetch),this.lock=a.lock||Ug,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,this.throwOnError=a.throwOnError,this.lockAcquireTimeout=a.lockAcquireTimeout,a.lock?this.lock=a.lock:this.persistSession&&Bm()&&(null===(n=null===globalThis||void 0===globalThis?void 0:globalThis.navigator)||void 0===n?void 0:n.locks)?this.lock=bg:this.lock=Ug,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new $g(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(a.storage?this.storage=a.storage:Fm()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=mg(this.memoryStorage)),a.userStorage&&(this.userStorage=a.userStorage)):(this.memoryStorage={},this.storage=mg(this.memoryStorage)),Bm()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(Jw){}null===(r=this.broadcastChannel)||void 0===r||r.addEventListener("message",async e=>{this._debug("received broadcast notification from other tab or client",e),await this._notifyAllSubscribers(e.data.event,e.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${lm}) ${(new Date).toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise||(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))()),await this.initializePromise}async _initialize(){var e;try{let t={},n="none";if(Bm()&&(t=function(e){const t={},n=new URL(e);if(n.hash&&"#"===n.hash[0])try{new URLSearchParams(n.hash.substring(1)).forEach((e,n)=>{t[n]=e})}catch(Jw){}return n.searchParams.forEach((e,n)=>{t[n]=e}),t}(window.location.href),this._isImplicitGrantCallback(t)?n="implicit":await this._isPKCECallback(t)&&(n="pkce")),Bm()&&this.detectSessionInUrl&&"none"!==n){const{data:r,error:a}=await this._getSessionFromURL(t,n);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),function(e){return gm(e)&&"AuthImplicitGrantRedirectError"===e.name}(a)){const t=null===(e=a.details)||void 0===e?void 0:e.code;if("identity_already_exists"===t||"identity_not_found"===t||"single_identity_not_deletable"===t)return{error:a}}return{error:a}}const{session:s,redirectType:i}=r;return this._debug("#_initialize()","detected session in URL",s,"redirect type",i),await this._saveSession(s),setTimeout(async()=>{"recovery"===i?await this._notifyAllSubscribers("PASSWORD_RECOVERY",s):await this._notifyAllSubscribers("SIGNED_IN",s)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return gm(t)?this._returnResult({error:t}):this._returnResult({error:new vm("Unexpected error during initialization",t)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,n,r;try{const a=await ig(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:null!==(n=null===(t=null==e?void 0:e.options)||void 0===t?void 0:t.data)&&void 0!==n?n:{},gotrue_meta_security:{captcha_token:null===(r=null==e?void 0:e.options)||void 0===r?void 0:r.captchaToken}},xform:og}),{data:s,error:i}=a;if(i||!s)return this._returnResult({data:{user:null,session:null},error:i});const o=s.session,l=s.user;return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",o)),this._returnResult({data:{user:l,session:o},error:null})}catch(a){if(gm(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signUp(e){var t,n,r;try{let a;if("email"in e){const{email:n,password:r,options:s}=e;let i=null,o=null;"pkce"===this.flowType&&([i,o]=await Qm(this.storage,this.storageKey)),a=await ig(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:null==s?void 0:s.emailRedirectTo,body:{email:n,password:r,data:null!==(t=null==s?void 0:s.data)&&void 0!==t?t:{},gotrue_meta_security:{captcha_token:null==s?void 0:s.captchaToken},code_challenge:i,code_challenge_method:o},xform:og})}else{if(!("phone"in e))throw new Sm("You must provide either an email or phone number and a password");{const{phone:t,password:s,options:i}=e;a=await ig(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:t,password:s,data:null!==(n=null==i?void 0:i.data)&&void 0!==n?n:{},channel:null!==(r=null==i?void 0:i.channel)&&void 0!==r?r:"sms",gotrue_meta_security:{captcha_token:null==i?void 0:i.captchaToken}},xform:og})}}const{data:s,error:i}=a;if(i||!s)return await Vm(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:i});const o=s.session,l=s.user;return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",o)),this._returnResult({data:{user:l,session:o},error:null})}catch(a){if(await Vm(this.storage,`${this.storageKey}-code-verifier`),gm(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithPassword(e){try{let t;if("email"in e){const{email:n,password:r,options:a}=e;t=await ig(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:n,password:r,gotrue_meta_security:{captcha_token:null==a?void 0:a.captchaToken}},xform:lg})}else{if(!("phone"in e))throw new Sm("You must provide either an email or phone number and a password");{const{phone:n,password:r,options:a}=e;t=await ig(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:n,password:r,gotrue_meta_security:{captcha_token:null==a?void 0:a.captchaToken}},xform:lg})}}const{data:n,error:r}=t;if(r)return this._returnResult({data:{user:null,session:null},error:r});if(!n||!n.session||!n.user){const e=new _m;return this._returnResult({data:{user:null,session:null},error:e})}return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),this._returnResult({data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:r})}catch(t){if(gm(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async signInWithOAuth(e){var t,n,r,a;return await this._handleProviderSignIn(e.provider,{redirectTo:null===(t=e.options)||void 0===t?void 0:t.redirectTo,scopes:null===(n=e.options)||void 0===n?void 0:n.scopes,queryParams:null===(r=e.options)||void 0===r?void 0:r.queryParams,skipBrowserRedirect:null===(a=e.options)||void 0===a?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;switch(t){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}}async signInWithEthereum(e){var t,n,r,a,s,i,o,l,u,c,d;let h,f;if("message"in e)h=e.message,f=e.signature;else{const{chain:c,wallet:d,statement:p,options:m}=e;let g;if(Bm())if("object"==typeof d)g=d;else{const e=window;if(!("ethereum"in e)||"object"!=typeof e.ethereum||!("request"in e.ethereum)||"function"!=typeof e.ethereum.request)throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.");g=e.ethereum}else{if("object"!=typeof d||!(null==m?void 0:m.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");g=d}const y=new URL(null!==(t=null==m?void 0:m.url)&&void 0!==t?t:window.location.href),v=await g.request({method:"eth_requestAccounts"}).then(e=>e).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!v||0===v.length)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const b=wg(v[0]);let w=null===(n=null==m?void 0:m.signInWithEthereum)||void 0===n?void 0:n.chainId;if(!w){const e=await g.request({method:"eth_chainId"});w=parseInt(e,16)}h=function(e){var t;const{chainId:n,domain:r,expirationTime:a,issuedAt:s=new Date,nonce:i,notBefore:o,requestId:l,resources:u,scheme:c,uri:d,version:h}=e;if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(i&&i.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${i}`);if(!d)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if("1"!==h)throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${h}`);if(null===(t=e.statement)||void 0===t?void 0:t.includes("\n"))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`);const f=`${c?`${c}://${r}`:r} wants you to sign in with your Ethereum account:\n${wg(e.address)}\n\n${e.statement?`${e.statement}\n`:""}`;let p=`URI: ${d}\nVersion: ${h}\nChain ID: ${n}${i?`\nNonce: ${i}`:""}\nIssued At: ${s.toISOString()}`;if(a&&(p+=`\nExpiration Time: ${a.toISOString()}`),o&&(p+=`\nNot Before: ${o.toISOString()}`),l&&(p+=`\nRequest ID: ${l}`),u){let e="\nResources:";for(const t of u){if(!t||"string"!=typeof t)throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${t}`);e+=`\n- ${t}`}p+=e}return`${f}\n${p}`}({domain:y.host,address:b,statement:p,uri:y.href,version:"1",chainId:w,nonce:null===(r=null==m?void 0:m.signInWithEthereum)||void 0===r?void 0:r.nonce,issuedAt:null!==(s=null===(a=null==m?void 0:m.signInWithEthereum)||void 0===a?void 0:a.issuedAt)&&void 0!==s?s:new Date,expirationTime:null===(i=null==m?void 0:m.signInWithEthereum)||void 0===i?void 0:i.expirationTime,notBefore:null===(o=null==m?void 0:m.signInWithEthereum)||void 0===o?void 0:o.notBefore,requestId:null===(l=null==m?void 0:m.signInWithEthereum)||void 0===l?void 0:l.requestId,resources:null===(u=null==m?void 0:m.signInWithEthereum)||void 0===u?void 0:u.resources}),f=await g.request({method:"personal_sign",params:[_g(h),b]})}try{const{data:t,error:n}=await ig(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:h,signature:f},(null===(c=e.options)||void 0===c?void 0:c.captchaToken)?{gotrue_meta_security:{captcha_token:null===(d=e.options)||void 0===d?void 0:d.captchaToken}}:null),xform:og});if(n)throw n;if(!t||!t.session||!t.user){const e=new _m;return this._returnResult({data:{user:null,session:null},error:e})}return t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),this._returnResult({data:Object.assign({},t),error:n})}catch(p){if(gm(p))return this._returnResult({data:{user:null,session:null},error:p});throw p}}async signInWithSolana(e){var t,n,r,a,s,i,o,l,u,c,d,h;let f,p;if("message"in e)f=e.message,p=e.signature;else{const{chain:d,wallet:h,statement:m,options:g}=e;let y;if(Bm())if("object"==typeof h)y=h;else{const e=window;if(!("solana"in e)||"object"!=typeof e.solana||!("signIn"in e.solana&&"function"==typeof e.solana.signIn||"signMessage"in e.solana&&"function"==typeof e.solana.signMessage))throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.");y=e.solana}else{if("object"!=typeof h||!(null==g?void 0:g.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");y=h}const v=new URL(null!==(t=null==g?void 0:g.url)&&void 0!==t?t:window.location.href);if("signIn"in y&&y.signIn){const e=await y.signIn(Object.assign(Object.assign(Object.assign({issuedAt:(new Date).toISOString()},null==g?void 0:g.signInWithSolana),{version:"1",domain:v.host,uri:v.href}),m?{statement:m}:null));let t;if(Array.isArray(e)&&e[0]&&"object"==typeof e[0])t=e[0];else{if(!(e&&"object"==typeof e&&"signedMessage"in e&&"signature"in e))throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");t=e}if(!("signedMessage"in t&&"signature"in t&&("string"==typeof t.signedMessage||t.signedMessage instanceof Uint8Array)&&t.signature instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields");f="string"==typeof t.signedMessage?t.signedMessage:(new TextDecoder).decode(t.signedMessage),p=t.signature}else{if(!("signMessage"in y&&"function"==typeof y.signMessage&&"publicKey"in y&&"object"==typeof y&&y.publicKey&&"toBase58"in y.publicKey&&"function"==typeof y.publicKey.toBase58))throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");f=[`${v.host} wants you to sign in with your Solana account:`,y.publicKey.toBase58(),...m?["",m,""]:[""],"Version: 1",`URI: ${v.href}`,`Issued At: ${null!==(r=null===(n=null==g?void 0:g.signInWithSolana)||void 0===n?void 0:n.issuedAt)&&void 0!==r?r:(new Date).toISOString()}`,...(null===(a=null==g?void 0:g.signInWithSolana)||void 0===a?void 0:a.notBefore)?[`Not Before: ${g.signInWithSolana.notBefore}`]:[],...(null===(s=null==g?void 0:g.signInWithSolana)||void 0===s?void 0:s.expirationTime)?[`Expiration Time: ${g.signInWithSolana.expirationTime}`]:[],...(null===(i=null==g?void 0:g.signInWithSolana)||void 0===i?void 0:i.chainId)?[`Chain ID: ${g.signInWithSolana.chainId}`]:[],...(null===(o=null==g?void 0:g.signInWithSolana)||void 0===o?void 0:o.nonce)?[`Nonce: ${g.signInWithSolana.nonce}`]:[],...(null===(l=null==g?void 0:g.signInWithSolana)||void 0===l?void 0:l.requestId)?[`Request ID: ${g.signInWithSolana.requestId}`]:[],...(null===(c=null===(u=null==g?void 0:g.signInWithSolana)||void 0===u?void 0:u.resources)||void 0===c?void 0:c.length)?["Resources",...g.signInWithSolana.resources.map(e=>`- ${e}`)]:[]].join("\n");const e=await y.signMessage((new TextEncoder).encode(f),"utf8");if(!(e&&e instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");p=e}}try{const{data:t,error:n}=await ig(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:f,signature:Mm(p)},(null===(d=e.options)||void 0===d?void 0:d.captchaToken)?{gotrue_meta_security:{captcha_token:null===(h=e.options)||void 0===h?void 0:h.captchaToken}}:null),xform:og});if(n)throw n;if(!t||!t.session||!t.user){const e=new _m;return this._returnResult({data:{user:null,session:null},error:e})}return t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),this._returnResult({data:Object.assign({},t),error:n})}catch(m){if(gm(m))return this._returnResult({data:{user:null,session:null},error:m});throw m}}async _exchangeCodeForSession(e){const t=await Wm(this.storage,`${this.storageKey}-code-verifier`),[n,r]=(null!=t?t:"").split("/");try{if(!n&&"pkce"===this.flowType)throw new Tm;const{data:t,error:a}=await ig(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:og});if(await Vm(this.storage,`${this.storageKey}-code-verifier`),a)throw a;if(!t||!t.session||!t.user){const e=new _m;return this._returnResult({data:{user:null,session:null,redirectType:null},error:e})}return t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),this._returnResult({data:Object.assign(Object.assign({},t),{redirectType:null!=r?r:null}),error:a})}catch(a){if(await Vm(this.storage,`${this.storageKey}-code-verifier`),gm(a))return this._returnResult({data:{user:null,session:null,redirectType:null},error:a});throw a}}async signInWithIdToken(e){try{const{options:t,provider:n,token:r,access_token:a,nonce:s}=e,i=await ig(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:r,access_token:a,nonce:s,gotrue_meta_security:{captcha_token:null==t?void 0:t.captchaToken}},xform:og}),{data:o,error:l}=i;if(l)return this._returnResult({data:{user:null,session:null},error:l});if(!o||!o.session||!o.user){const e=new _m;return this._returnResult({data:{user:null,session:null},error:e})}return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),this._returnResult({data:o,error:l})}catch(t){if(gm(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async signInWithOtp(e){var t,n,r,a,s;try{if("email"in e){const{email:r,options:a}=e;let s=null,i=null;"pkce"===this.flowType&&([s,i]=await Qm(this.storage,this.storageKey));const{error:o}=await ig(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:r,data:null!==(t=null==a?void 0:a.data)&&void 0!==t?t:{},create_user:null===(n=null==a?void 0:a.shouldCreateUser)||void 0===n||n,gotrue_meta_security:{captcha_token:null==a?void 0:a.captchaToken},code_challenge:s,code_challenge_method:i},redirectTo:null==a?void 0:a.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:o})}if("phone"in e){const{phone:t,options:n}=e,{data:i,error:o}=await ig(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:t,data:null!==(r=null==n?void 0:n.data)&&void 0!==r?r:{},create_user:null===(a=null==n?void 0:n.shouldCreateUser)||void 0===a||a,gotrue_meta_security:{captcha_token:null==n?void 0:n.captchaToken},channel:null!==(s=null==n?void 0:n.channel)&&void 0!==s?s:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:null==i?void 0:i.message_id},error:o})}throw new Sm("You must provide either an email or phone number.")}catch(i){if(await Vm(this.storage,`${this.storageKey}-code-verifier`),gm(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async verifyOtp(e){var t,n;try{let r,a;"options"in e&&(r=null===(t=e.options)||void 0===t?void 0:t.redirectTo,a=null===(n=e.options)||void 0===n?void 0:n.captchaToken);const{data:s,error:i}=await ig(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:a}}),redirectTo:r,xform:og});if(i)throw i;if(!s){throw new Error("An error occurred on token verification.")}const o=s.session,l=s.user;return(null==o?void 0:o.access_token)&&(await this._saveSession(o),await this._notifyAllSubscribers("recovery"==e.type?"PASSWORD_RECOVERY":"SIGNED_IN",o)),this._returnResult({data:{user:l,session:o},error:null})}catch(r){if(gm(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithSSO(e){var t,n,r,a,s;try{let i=null,o=null;"pkce"===this.flowType&&([i,o]=await Qm(this.storage,this.storageKey));const l=await ig(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:null!==(n=null===(t=e.options)||void 0===t?void 0:t.redirectTo)&&void 0!==n?n:void 0}),(null===(r=null==e?void 0:e.options)||void 0===r?void 0:r.captchaToken)?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:cg});return(null===(a=l.data)||void 0===a?void 0:a.url)&&Bm()&&!(null===(s=e.options)||void 0===s?void 0:s.skipBrowserRedirect)&&window.location.assign(l.data.url),this._returnResult(l)}catch(i){if(await Vm(this.storage,`${this.storageKey}-code-verifier`),gm(i))return this._returnResult({data:null,error:i});throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:n}=e;if(n)throw n;if(!t)throw new wm;const{error:r}=await ig(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return this._returnResult({data:{user:null,session:null},error:r})})}catch(e){if(gm(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:n,type:r,options:a}=e,{error:s}=await ig(this.fetch,"POST",t,{headers:this.headers,body:{email:n,type:r,gotrue_meta_security:{captcha_token:null==a?void 0:a.captchaToken}},redirectTo:null==a?void 0:a.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:s})}if("phone"in e){const{phone:n,type:r,options:a}=e,{data:s,error:i}=await ig(this.fetch,"POST",t,{headers:this.headers,body:{phone:n,type:r,gotrue_meta_security:{captcha_token:null==a?void 0:a.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:null==s?void 0:s.message_id},error:i})}throw new Sm("You must provide either an email or phone number and a type")}catch(t){if(gm(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async getSession(){await this.initializePromise;return await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async e=>e))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const e=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),n=(async()=>(await e,await t()))();return this.pendingInLock.push((async()=>{try{await n}catch(Jw){}})()),n}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const e=t();for(this.pendingInLock.push((async()=>{try{await e}catch(Jw){}})()),await e;this.pendingInLock.length;){const e=[...this.pendingInLock];await Promise.all(e),this.pendingInLock.splice(0,e.length)}return await e}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",(new Error).stack);try{let e=null;const t=await Wm(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),null!==t&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=!!e.expires_at&&1e3*e.expires_at-Date.now()<cm;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.userStorage){const t=await Wm(this.userStorage,this.storageKey+"-user");(null==t?void 0:t.user)?e.user=t.user:e.user=tg()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const t={value:this.suppressGetSessionWarning};e.user=function(e,t){return new Proxy(e,{get:(e,n,r)=>{if("__isInsecureUserWarningProxy"===n)return!0;if("symbol"==typeof n){const t=n.toString();if("Symbol(Symbol.toPrimitive)"===t||"Symbol(Symbol.toStringTag)"===t||"Symbol(util.inspect.custom)"===t||"Symbol(nodejs.util.inspect.custom)"===t)return Reflect.get(e,n,r)}return t.value||"string"!=typeof n||(t.value=!0),Reflect.get(e,n,r)}})}(e.user,t),t.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:r,error:a}=await this._callRefreshToken(e.refresh_token);return a?this._returnResult({data:{session:null},error:a}):this._returnResult({data:{session:r},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;const t=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return t.data.user&&(this.suppressGetSessionWarning=!0),t}async _getUser(e){try{return e?await ig(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:ug}):await this._useSession(async e=>{var t,n,r;const{data:a,error:s}=e;if(s)throw s;return(null===(t=a.session)||void 0===t?void 0:t.access_token)||this.hasCustomAuthorizationHeader?await ig(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:null!==(r=null===(n=a.session)||void 0===n?void 0:n.access_token)&&void 0!==r?r:void 0,xform:ug}):{data:{user:null},error:new wm}})}catch(t){if(gm(t))return function(e){return gm(e)&&"AuthSessionMissingError"===e.name}(t)&&(await this._removeSession(),await Vm(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:t});throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async n=>{const{data:r,error:a}=n;if(a)throw a;if(!r.session)throw new wm;const s=r.session;let i=null,o=null;"pkce"===this.flowType&&null!=e.email&&([i,o]=await Qm(this.storage,this.storageKey));const{data:l,error:u}=await ig(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:null==t?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:i,code_challenge_method:o}),jwt:s.access_token,xform:ug});if(u)throw u;return s.user=l.user,await this._saveSession(s),await this._notifyAllSubscribers("USER_UPDATED",s),this._returnResult({data:{user:s.user},error:null})})}catch(n){if(await Vm(this.storage,`${this.storageKey}-code-verifier`),gm(n))return this._returnResult({data:{user:null},error:n});throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new wm;const t=Date.now()/1e3;let n=t,r=!0,a=null;const{payload:s}=Jm(e.access_token);if(s.exp&&(n=s.exp,r=n<=t),r){const{data:t,error:n}=await this._callRefreshToken(e.refresh_token);if(n)return this._returnResult({data:{user:null,session:null},error:n});if(!t)return{data:{user:null,session:null},error:null};a=t}else{const{data:r,error:s}=await this._getUser(e.access_token);if(s)throw s;a={access_token:e.access_token,refresh_token:e.refresh_token,user:r.user,token_type:"bearer",expires_in:n-t,expires_at:n},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return this._returnResult({data:{user:a.user,session:a},error:null})}catch(t){if(gm(t))return this._returnResult({data:{session:null,user:null},error:t});throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var n;if(!e){const{data:r,error:a}=t;if(a)throw a;e=null!==(n=r.session)&&void 0!==n?n:void 0}if(!(null==e?void 0:e.refresh_token))throw new wm;const{data:r,error:a}=await this._callRefreshToken(e.refresh_token);return a?this._returnResult({data:{user:null,session:null},error:a}):r?this._returnResult({data:{user:r.user,session:r},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(t){if(gm(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async _getSessionFromURL(e,t){try{if(!Bm())throw new km("No browser detected.");if(e.error||e.error_description||e.error_code)throw new km(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if("pkce"===this.flowType)throw new Em("Not a valid PKCE flow url.");break;case"pkce":if("implicit"===this.flowType)throw new km("Not a valid implicit grant flow url.")}if("pkce"===t){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Em("No code detected.");const{data:t,error:n}=await this._exchangeCodeForSession(e.code);if(n)throw n;const r=new URL(window.location.href);return r.searchParams.delete("code"),window.history.replaceState(window.history.state,"",r.toString()),{data:{session:t.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:r,access_token:a,refresh_token:s,expires_in:i,expires_at:o,token_type:l}=e;if(!(a&&i&&s&&l))throw new km("No session defined in URL");const u=Math.round(Date.now()/1e3),c=parseInt(i);let d=u+c;o&&(d=parseInt(o));const{data:h,error:f}=await this._getUser(a);if(f)throw f;const p={provider_token:n,provider_refresh_token:r,access_token:a,expires_in:c,expires_at:d,refresh_token:s,token_type:l,user:h.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:p,redirectType:e.type},error:null})}catch(n){if(gm(n))return this._returnResult({data:{session:null,redirectType:null},error:n});throw n}}_isImplicitGrantCallback(e){return"function"==typeof this.detectSessionInUrl?this.detectSessionInUrl(new URL(window.location.href),e):Boolean(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await Wm(this.storage,`${this.storageKey}-code-verifier`);return!(!e.code||!t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var n;const{data:r,error:a}=t;if(a)return this._returnResult({error:a});const s=null===(n=r.session)||void 0===n?void 0:n.access_token;if(s){const{error:t}=await this.admin.signOut(s,e);if(t&&(!function(e){return gm(e)&&"AuthApiError"===e.name}(t)||404!==t.status&&401!==t.status&&403!==t.status))return this._returnResult({error:t})}return"others"!==e&&(await this._removeSession(),await Vm(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const t=Symbol("auth-callback"),n={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,n),(async()=>{await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(t)})})(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async t=>{var n,r;try{const{data:{session:r},error:a}=t;if(a)throw a;await(null===(n=this.stateChangeEmitters.get(e))||void 0===n?void 0:n.callback("INITIAL_SESSION",r)),this._debug("INITIAL_SESSION","callback id",e,"session",r)}catch(a){await(null===(r=this.stateChangeEmitters.get(e))||void 0===r?void 0:r.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",a)}})}async resetPasswordForEmail(e,t={}){let n=null,r=null;"pkce"===this.flowType&&([n,r]=await Qm(this.storage,this.storageKey,!0));try{return await ig(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:r,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(a){if(await Vm(this.storage,`${this.storageKey}-code-verifier`),gm(a))return this._returnResult({data:null,error:a});throw a}}async getUserIdentities(){var e;try{const{data:t,error:n}=await this.getUser();if(n)throw n;return this._returnResult({data:{identities:null!==(e=t.user.identities)&&void 0!==e?e:[]},error:null})}catch(t){if(gm(t))return this._returnResult({data:null,error:t});throw t}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var t;try{const{data:n,error:r}=await this._useSession(async t=>{var n,r,a,s,i;const{data:o,error:l}=t;if(l)throw l;const u=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:null===(n=e.options)||void 0===n?void 0:n.redirectTo,scopes:null===(r=e.options)||void 0===r?void 0:r.scopes,queryParams:null===(a=e.options)||void 0===a?void 0:a.queryParams,skipBrowserRedirect:!0});return await ig(this.fetch,"GET",u,{headers:this.headers,jwt:null!==(i=null===(s=o.session)||void 0===s?void 0:s.access_token)&&void 0!==i?i:void 0})});if(r)throw r;return Bm()&&!(null===(t=e.options)||void 0===t?void 0:t.skipBrowserRedirect)&&window.location.assign(null==n?void 0:n.url),this._returnResult({data:{provider:e.provider,url:null==n?void 0:n.url},error:null})}catch(n){if(gm(n))return this._returnResult({data:{provider:e.provider,url:null},error:n});throw n}}async linkIdentityIdToken(e){return await this._useSession(async t=>{var n;try{const{error:r,data:{session:a}}=t;if(r)throw r;const{options:s,provider:i,token:o,access_token:l,nonce:u}=e,c=await ig(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:null!==(n=null==a?void 0:a.access_token)&&void 0!==n?n:void 0,body:{provider:i,id_token:o,access_token:l,nonce:u,link_identity:!0,gotrue_meta_security:{captcha_token:null==s?void 0:s.captchaToken}},xform:og}),{data:d,error:h}=c;return h?this._returnResult({data:{user:null,session:null},error:h}):d&&d.session&&d.user?(d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("USER_UPDATED",d.session)),this._returnResult({data:d,error:h})):this._returnResult({data:{user:null,session:null},error:new _m})}catch(r){if(await Vm(this.storage,`${this.storageKey}-code-verifier`),gm(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}})}async unlinkIdentity(e){try{return await this._useSession(async t=>{var n,r;const{data:a,error:s}=t;if(s)throw s;return await ig(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:null!==(r=null===(n=a.session)||void 0===n?void 0:n.access_token)&&void 0!==r?r:void 0})})}catch(t){if(gm(t))return this._returnResult({data:null,error:t});throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const a=Date.now();return await(n=async n=>(n>0&&await async function(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}(200*Math.pow(2,n-1)),this._debug(t,"refreshing attempt",n),await ig(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:og})),r=(e,t)=>{const n=200*Math.pow(2,e);return t&&xm(t)&&Date.now()+n-a<um},new Promise((e,t)=>{(async()=>{for(let a=0;a<1/0;a++)try{const t=await n(a);if(!r(a,null,t))return void e(t)}catch(Jw){if(!r(a,Jw))return void t(Jw)}})()}))}catch(a){if(this._debug(t,"error",a),gm(a))return this._returnResult({data:{session:null,user:null},error:a});throw a}finally{this._debug(t,"end")}var n,r}_isValidSession(e){return"object"==typeof e&&null!==e&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",n),Bm()&&!t.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e,t;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const a=await Wm(this.storage,this.storageKey);if(a&&this.userStorage){let t=await Wm(this.userStorage,this.storageKey+"-user");this.storage.isServer||!Object.is(this.storage,this.userStorage)||t||(t={user:a.user},await Hm(this.userStorage,this.storageKey+"-user",t)),a.user=null!==(e=null==t?void 0:t.user)&&void 0!==e?e:tg()}else if(a&&!a.user&&!a.user){const e=await Wm(this.storage,this.storageKey+"-user");e&&(null==e?void 0:e.user)?(a.user=e.user,await Vm(this.storage,this.storageKey+"-user"),await Hm(this.storage,this.storageKey,a)):a.user=tg()}if(this._debug(n,"session from storage",a),!this._isValidSession(a))return this._debug(n,"session is not valid"),void(null!==a&&await this._removeSession());const s=1e3*(null!==(t=a.expires_at)&&void 0!==t?t:1/0)-Date.now()<cm;if(this._debug(n,`session has${s?"":" not"} expired with margin of 90000s`),s){if(this.autoRefreshToken&&a.refresh_token){const{error:e}=await this._callRefreshToken(a.refresh_token);e&&(xm(e)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",e),await this._removeSession()))}}else if(a.user&&!0===a.user.__isUserNotAvailableProxy)try{const{data:e,error:t}=await this._getUser(a.access_token);!t&&(null==e?void 0:e.user)?(a.user=e.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(r){this._debug(n,"error getting user data, skipping SIGNED_IN notification",r)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){return void this._debug(n,"error",a)}finally{this._debug(n,"end")}}async _callRefreshToken(e){var t,n;if(!e)throw new wm;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const r=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{this.refreshingDeferred=new Km;const{data:t,error:n}=await this._refreshAccessToken(e);if(n)throw n;if(!t.session)throw new wm;await this._saveSession(t.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",t.session);const r={data:t.session,error:null};return this.refreshingDeferred.resolve(r),r}catch(a){if(this._debug(r,"error",a),gm(a)){const e={data:null,error:a};return xm(a)||await this._removeSession(),null===(t=this.refreshingDeferred)||void 0===t||t.resolve(e),e}throw null===(n=this.refreshingDeferred)||void 0===n||n.reject(a),a}finally{this.refreshingDeferred=null,this._debug(r,"end")}}async _notifyAllSubscribers(e,t,n=!0){const r=`#_notifyAllSubscribers(${e})`;this._debug(r,"begin",t,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:t});const r=[],a=Array.from(this.stateChangeEmitters.values()).map(async n=>{try{await n.callback(e,t)}catch(Jw){r.push(Jw)}});if(await Promise.all(a),r.length>0){for(let e=0;e<r.length;e+=1);throw r[0]}}finally{this._debug(r,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await Vm(this.storage,`${this.storageKey}-code-verifier`);const t=Object.assign({},e),n=t.user&&!0===t.user.__isUserNotAvailableProxy;if(this.userStorage){!n&&t.user&&await Hm(this.userStorage,this.storageKey+"-user",{user:t.user});const e=Object.assign({},t);delete e.user;const r=ng(e);await Hm(this.storage,this.storageKey,r)}else{const e=ng(t);await Hm(this.storage,this.storageKey,e)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await Vm(this.storage,this.storageKey),await Vm(this.storage,this.storageKey+"-code-verifier"),await Vm(this.storage,this.storageKey+"-user"),this.userStorage&&await Vm(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Bm()&&(null===window||void 0===window?void 0:window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(Jw){}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),um);this.autoRefreshTicker=e,e&&"object"==typeof e&&"function"==typeof e.unref?e.unref():"undefined"!=typeof Deno&&"function"==typeof Deno.unrefTimer&&Deno.unrefTimer(e);const t=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=t,t&&"object"==typeof t&&"function"==typeof t.unref?t.unref():"undefined"!=typeof Deno&&"function"==typeof Deno.unrefTimer&&Deno.unrefTimer(t)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e);const t=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,t&&clearTimeout(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:n}}=t;if(!n||!n.refresh_token||!n.expires_at)return void this._debug("#_autoRefreshTokenTick()","no session");const r=Math.floor((1e3*n.expires_at-e)/um);this._debug("#_autoRefreshTokenTick()",`access token expires in ${r} ticks, a tick lasts 30000ms, refresh threshold is 3 ticks`),r<=3&&await this._callRefreshToken(n.refresh_token)})}catch(Jw){}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(Jw){if(!(Jw.isAcquireTimeout||Jw instanceof yg))throw Jw;this._debug("auto refresh token tick lock not available")}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Bm()||!(null===window||void 0===window?void 0:window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),null===window||void 0===window||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),"visible"===document.visibilityState?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{"visible"===document.visibilityState?await this._recoverAndRefresh():this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting")}))):"hidden"===document.visibilityState&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,n){const r=[`provider=${encodeURIComponent(t)}`];if((null==n?void 0:n.redirectTo)&&r.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),(null==n?void 0:n.scopes)&&r.push(`scopes=${encodeURIComponent(n.scopes)}`),"pkce"===this.flowType){const[e,t]=await Qm(this.storage,this.storageKey),n=new URLSearchParams({code_challenge:`${encodeURIComponent(e)}`,code_challenge_method:`${encodeURIComponent(t)}`});r.push(n.toString())}if(null==n?void 0:n.queryParams){const e=new URLSearchParams(n.queryParams);r.push(e.toString())}return(null==n?void 0:n.skipBrowserRedirect)&&r.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${r.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var n;const{data:r,error:a}=t;return a?this._returnResult({data:null,error:a}):await ig(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:null===(n=null==r?void 0:r.session)||void 0===n?void 0:n.access_token})})}catch(t){if(gm(t))return this._returnResult({data:null,error:t});throw t}}async _enroll(e){try{return await this._useSession(async t=>{var n,r;const{data:a,error:s}=t;if(s)return this._returnResult({data:null,error:s});const i=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},"phone"===e.factorType?{phone:e.phone}:"totp"===e.factorType?{issuer:e.issuer}:{}),{data:o,error:l}=await ig(this.fetch,"POST",`${this.url}/factors`,{body:i,headers:this.headers,jwt:null===(n=null==a?void 0:a.session)||void 0===n?void 0:n.access_token});return l?this._returnResult({data:null,error:l}):("totp"===e.factorType&&"totp"===o.type&&(null===(r=null==o?void 0:o.totp)||void 0===r?void 0:r.qr_code)&&(o.totp.qr_code=`data:image/svg+xml;utf-8,${o.totp.qr_code}`),this._returnResult({data:o,error:null}))})}catch(t){if(gm(t))return this._returnResult({data:null,error:t});throw t}}async _verify(e){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async t=>{var n;const{data:r,error:a}=t;if(a)return this._returnResult({data:null,error:a});const s=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:"create"===e.webauthn.type?Ig(e.webauthn.credential_response):Pg(e.webauthn.credential_response)})}:{code:e.code}),{data:i,error:o}=await ig(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:s,headers:this.headers,jwt:null===(n=null==r?void 0:r.session)||void 0===n?void 0:n.access_token});return o?this._returnResult({data:null,error:o}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+i.expires_in},i)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",i),this._returnResult({data:i,error:o}))})}catch(t){if(gm(t))return this._returnResult({data:null,error:t});throw t}})}async _challenge(e){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async t=>{var n;const{data:r,error:a}=t;if(a)return this._returnResult({data:null,error:a});const s=await ig(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:null===(n=null==r?void 0:r.session)||void 0===n?void 0:n.access_token});if(s.error)return s;const{data:i}=s;if("webauthn"!==i.type)return{data:i,error:null};switch(i.webauthn.type){case"create":return{data:Object.assign(Object.assign({},i),{webauthn:Object.assign(Object.assign({},i.webauthn),{credential_options:Object.assign(Object.assign({},i.webauthn.credential_options),{publicKey:xg(i.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},i),{webauthn:Object.assign(Object.assign({},i.webauthn),{credential_options:Object.assign(Object.assign({},i.webauthn.credential_options),{publicKey:Og(i.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(t){if(gm(t))return this._returnResult({data:null,error:t});throw t}})}async _challengeAndVerify(e){const{data:t,error:n}=await this._challenge({factorId:e.factorId});return n?this._returnResult({data:null,error:n}):await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){var e;const{data:{user:t},error:n}=await this.getUser();if(n)return{data:null,error:n};const r={all:[],phone:[],totp:[],webauthn:[]};for(const a of null!==(e=null==t?void 0:t.factors)&&void 0!==e?e:[])r.all.push(a),"verified"===a.status&&r[a.factor_type].push(a);return{data:r,error:null}}async _getAuthenticatorAssuranceLevel(){var e,t;const{data:{session:n},error:r}=await this.getSession();if(r)return this._returnResult({data:null,error:r});if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:a}=Jm(n.access_token);let s=null;a.aal&&(s=a.aal);let i=s;(null!==(t=null===(e=n.user.factors)||void 0===e?void 0:e.filter(e=>"verified"===e.status))&&void 0!==t?t:[]).length>0&&(i="aal2");return{data:{currentLevel:s,nextLevel:i,currentAuthenticationMethods:a.amr||[]},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async t=>{const{data:{session:n},error:r}=t;return r?this._returnResult({data:null,error:r}):n?await ig(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:n.access_token,xform:e=>({data:e,error:null})}):this._returnResult({data:null,error:new wm})})}catch(t){if(gm(t))return this._returnResult({data:null,error:t});throw t}}async _approveAuthorization(e,t){try{return await this._useSession(async n=>{const{data:{session:r},error:a}=n;if(a)return this._returnResult({data:null,error:a});if(!r)return this._returnResult({data:null,error:new wm});const s=await ig(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:r.access_token,body:{action:"approve"},xform:e=>({data:e,error:null})});return s.data&&s.data.redirect_url&&Bm()&&!(null==t?void 0:t.skipBrowserRedirect)&&window.location.assign(s.data.redirect_url),s})}catch(n){if(gm(n))return this._returnResult({data:null,error:n});throw n}}async _denyAuthorization(e,t){try{return await this._useSession(async n=>{const{data:{session:r},error:a}=n;if(a)return this._returnResult({data:null,error:a});if(!r)return this._returnResult({data:null,error:new wm});const s=await ig(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:r.access_token,body:{action:"deny"},xform:e=>({data:e,error:null})});return s.data&&s.data.redirect_url&&Bm()&&!(null==t?void 0:t.skipBrowserRedirect)&&window.location.assign(s.data.redirect_url),s})}catch(n){if(gm(n))return this._returnResult({data:null,error:n});throw n}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:t},error:n}=e;return n?this._returnResult({data:null,error:n}):t?await ig(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:t.access_token,xform:e=>({data:e,error:null})}):this._returnResult({data:null,error:new wm})})}catch(e){if(gm(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async t=>{const{data:{session:n},error:r}=t;return r?this._returnResult({data:null,error:r}):n?(await ig(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new wm})})}catch(t){if(gm(t))return this._returnResult({data:null,error:t});throw t}}async fetchJwk(e,t={keys:[]}){let n=t.keys.find(t=>t.kid===e);if(n)return n;const r=Date.now();if(n=this.jwks.keys.find(t=>t.kid===e),n&&this.jwks_cached_at+6e5>r)return n;const{data:a,error:s}=await ig(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(s)throw s;return a.keys&&0!==a.keys.length?(this.jwks=a,this.jwks_cached_at=r,n=a.keys.find(t=>t.kid===e),n||null):null}async getClaims(e,t={}){try{let n=e;if(!n){const{data:e,error:t}=await this.getSession();if(t||!e.session)return this._returnResult({data:null,error:t});n=e.session.access_token}const{header:r,payload:a,signature:s,raw:{header:i,payload:o}}=Jm(n);(null==t?void 0:t.allowExpired)||function(e){if(!e)throw new Error("Missing exp claim");if(e<=Math.floor(Date.now()/1e3))throw new Error("JWT has expired")}(a.exp);const l=r.alg&&!r.alg.startsWith("HS")&&r.kid&&"crypto"in globalThis&&"subtle"in globalThis.crypto?await this.fetchJwk(r.kid,(null==t?void 0:t.keys)?{keys:t.keys}:null==t?void 0:t.jwks):null;if(!l){const{error:e}=await this.getUser(n);if(e)throw e;return{data:{claims:a,header:r,signature:s},error:null}}const u=function(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}(r.alg),c=await crypto.subtle.importKey("jwk",l,u,!0,["verify"]);if(!(await crypto.subtle.verify(u,c,s,Um(`${i}.${o}`))))throw new Im("Invalid JWT signature");return{data:{claims:a,header:r,signature:s},error:null}}catch(n){if(gm(n))return this._returnResult({data:null,error:n});throw n}}}Bg.nextInstanceID={};const zg=Bg;let Fg="";Fg="undefined"!=typeof Deno?"deno":"undefined"!=typeof document?"web":"undefined"!=typeof navigator&&"ReactNative"===navigator.product?"react-native":"node";const qg={headers:{"X-Client-Info":`supabase-js-${Fg}/2.90.1`}},Hg={schema:"public"},Wg={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Vg={};function Kg(e){return(Kg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Jg(e){var t=function(e,t){if("object"!=Kg(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=Kg(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Kg(t)?t:t+""}function Gg(e,t,n){return(t=Jg(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Yg(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Qg(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Yg(Object(n),!0).forEach(function(t){Gg(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Yg(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}const Xg=(e,t,n)=>{const r=(e=>e?(...t)=>e(...t):(...e)=>fetch(...e))(n),a=Headers;return async(n,s)=>{var i;const o=null!==(i=await t())&&void 0!==i?i:e;let l=new a(null==s?void 0:s.headers);return l.has("apikey")||l.set("apikey",e),l.has("Authorization")||l.set("Authorization",`Bearer ${o}`),r(n,Qg(Qg({},s),{},{headers:l}))}};var Zg=class extends zg{constructor(e){super(e)}},ey=class{constructor(e,t,n){var r,a;this.supabaseUrl=e,this.supabaseKey=t;const s=function(e){const t=null==e?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL((n=t).endsWith("/")?n:n+"/")}catch(r){throw Error("Invalid supabaseUrl: Provided URL is malformed.")}var n}(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",s),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",s),this.storageUrl=new URL("storage/v1",s),this.functionsUrl=new URL("functions/v1",s);const i=`sb-${s.hostname.split(".")[0]}-auth-token`,o=function(e,t){var n,r;const{db:a,auth:s,realtime:i,global:o}=e,{db:l,auth:u,realtime:c,global:d}=t,h={db:Qg(Qg({},l),a),auth:Qg(Qg({},u),s),realtime:Qg(Qg({},c),i),storage:{},global:Qg(Qg(Qg({},d),o),{},{headers:Qg(Qg({},null!==(n=null==d?void 0:d.headers)&&void 0!==n?n:{}),null!==(r=null==o?void 0:o.headers)&&void 0!==r?r:{})}),accessToken:async()=>""};return e.accessToken?h.accessToken=e.accessToken:delete h.accessToken,h}(null!=n?n:{},{db:Hg,realtime:Vg,auth:Qg(Qg({},Wg),{},{storageKey:i}),global:qg});var l;(this.storageKey=null!==(r=o.auth.storageKey)&&void 0!==r?r:"",this.headers=null!==(a=o.global.headers)&&void 0!==a?a:{},o.accessToken)?(this.accessToken=o.accessToken,this.auth=new Proxy({},{get:(e,t)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(t)} is not possible`)}})):this.auth=this._initSupabaseAuthClient(null!==(l=o.auth)&&void 0!==l?l:{},this.headers,o.global.fetch);this.fetch=Xg(t,this._getAccessToken.bind(this),o.global.fetch),this.realtime=this._initRealtimeClient(Qg({headers:this.headers,accessToken:this._getAccessToken.bind(this)},o.realtime)),this.accessToken&&this.accessToken().then(e=>this.realtime.setAuth(e)).catch(e=>{}),this.rest=new vf(new URL("rest/v1",s).href,{headers:this.headers,schema:o.db.schema,fetch:this.fetch}),this.storage=new om(this.storageUrl.href,this.headers,this.fetch,null==n?void 0:n.storage),o.accessToken||this._listenForAuthEvents()}get functions(){return new df(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,t,n)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e,t,n=this;if(n.accessToken)return await n.accessToken();const{data:r}=await n.auth.getSession();return null!==(e=null===(t=r.session)||void 0===t?void 0:t.access_token)&&void 0!==e?e:n.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:r,userStorage:a,storageKey:s,flowType:i,lock:o,debug:l,throwOnError:u},c,d){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Zg({url:this.authUrl.href,headers:Qg(Qg({},h),c),storageKey:s,autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:r,userStorage:a,flowType:i,lock:o,debug:l,throwOnError:u,fetch:d,hasCustomAuthorizationHeader:Object.keys(this.headers).some(e=>"authorization"===e.toLowerCase())})}_initRealtimeClient(e){return new lp(this.realtimeUrl.href,Qg(Qg({},e),{},{params:Qg(Qg({},{apikey:this.supabaseKey}),null==e?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",null==t?void 0:t.access_token)})}_handleTokenChanged(e,t,n){"TOKEN_REFRESHED"!==e&&"SIGNED_IN"!==e||this.changedAccessToken===n?"SIGNED_OUT"===e&&(this.realtime.setAuth(),"STORAGE"==t&&this.auth.signOut(),this.changedAccessToken=void 0):(this.changedAccessToken=n,this.realtime.setAuth(n))}};!function(){if("undefined"!=typeof window)return!1;const e=globalThis.process;if(!e)return!1;const t=e.version;if(null==t)return!1;const n=t.match(/^v(\d+)\./);!!n&&parseInt(n[1],10)}();const ty=(()=>{const e=window.location.hostname;return"localhost"===e||"127.0.0.1"===e?`${window.location.protocol}//${window.location.host}`:("gogobus.co.bw"===e||e.includes("gogobus"),`https://${e}`)})(),ny=new ey("https://jhnnazntoimddmclzile.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Impobm5hem50b2ltZGRtY2x6aWxlIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjczNzMxNzYsImV4cCI6MjA4Mjk0OTE3Nn0.D2swkrh_enTdXC54nERVdoXCwbBVOIGnqYRKtL6eIT8",ry);var ry;const ay=9e5,sy=e=>`gogobus_rate_limit_${e}`,iy=e=>{try{const t=sy(e),n=localStorage.getItem(t);return n?JSON.parse(n):null}catch(t){return null}},oy=(e,t)=>{try{const n=sy(e);localStorage.setItem(n,JSON.stringify(t))}catch(n){}},ly=e=>{try{const t=sy(e);localStorage.removeItem(t)}catch(t){}},uy=e=>{const t=iy(e);if(!t)return{limited:!1,remainingAttempts:5};const n=Date.now();if(t.lockoutUntil&&n<t.lockoutUntil){const e=Math.ceil((t.lockoutUntil-n)/6e4);return{limited:!0,remainingAttempts:0,lockoutUntil:t.lockoutUntil,minutesRemaining:e}}if(t.lockoutUntil&&n>=t.lockoutUntil)return ly(e),{limited:!1,remainingAttempts:5};if(t.attempts>=5){const t=n+ay;return oy(e,{attempts:5,lockoutUntil:t,lastAttempt:n}),{limited:!0,remainingAttempts:0,lockoutUntil:t,minutesRemaining:15}}return{limited:!1,remainingAttempts:5-t.attempts}},cy=e=>{const t=iy(e)||{attempts:0};t.attempts=(t.attempts||0)+1,t.lastAttempt=Date.now(),t.attempts>=5&&(t.lockoutUntil=Date.now()+ay),oy(e,t)},dy=e=>{const t=iy(e);if(!t||!t.lockoutUntil)return null;const n=Date.now();return n>=t.lockoutUntil?(ly(e),null):Math.ceil((t.lockoutUntil-n)/6e4)},hy={async signUp(e,t,n={}){const{data:r,error:a}=await ny.auth.signUp({email:e,password:t,options:{data:n,emailRedirectTo:ty}});if(a)throw a;return r},async signIn(e,t){const n=uy(e);if(n.limited){const e=new Error(`Too many failed login attempts. Please try again in ${n.minutesRemaining} minute(s).`);throw e.name="RateLimitError",e}try{const{data:n,error:r}=await ny.auth.signInWithPassword({email:e,password:t});if(r)throw cy(e),r;return ly(e),n}catch(r){throw gd(0,{email:e,error:r.message}),r}},async refreshSession(){try{const{data:e,error:t}=await ny.auth.refreshSession();if(t)throw gd(0,t),t;return e}catch(e){throw gd(0,e),e}},async signInWithProvider(e){const{data:t,error:n}=await ny.auth.signInWithOAuth({provider:e,options:{redirectTo:ty}});if(n)throw n;return t},async signOut(){const{error:e}=await ny.auth.signOut();if(e)throw e},async getSession(){const{data:{session:e},error:t}=await ny.auth.getSession();if(t)throw t;return e},async getUser(){const{data:{user:e},error:t}=await ny.auth.getUser();if(t)throw t;return e},async sendOTP(e){const{data:t,error:n}=await ny.auth.signInWithOtp({email:e,options:{shouldCreateUser:!0}});if(n)throw n;return t},async resendVerificationEmail(e){const{data:t,error:n}=await ny.auth.resend({type:"signup",email:e,options:{emailRedirectTo:ty}});if(n)throw n;return t},async verifyOTP(e,t){const{data:n,error:r}=await ny.auth.verifyOtp({email:e,token:t,type:"email"});if(r)throw r;return n},async resetPassword(e){const t=uy(`reset_${e}`);if(t.limited){const e=new Error(`Too many password reset requests. Please try again in ${t.minutesRemaining} minute(s).`);throw e.name="RateLimitError",e}try{const{data:t,error:n}=await ny.auth.resetPasswordForEmail(e,{redirectTo:`${ty}/reset-password`});if(n)throw cy(`reset_${e}`),n;return cy(`reset_${e}`),t}catch(n){throw gd(0,{email:e,error:n.message}),n}},async updatePassword(e){const{data:t,error:n}=await ny.auth.updateUser({password:e});if(n)throw n;return t},onAuthStateChange:e=>ny.auth.onAuthStateChange((t,n)=>{e(t,n)})},fy=Object.freeze(Object.defineProperty({__proto__:null,authService:hy},Symbol.toStringTag,{value:"Module"})),py={async getProfile(e){const{data:t,error:n}=await ny.from("profiles").select("*").eq("id",e).single();if(n&&"PGRST116"!==n.code)throw n;return t},async updateProfile(e,t){var n;const{data:r,error:a}=await ny.from("profiles").update(t).eq("id",e).select().single();if(a&&("PGRST116"===a.code||(null==(n=a.message)?void 0:n.includes("No rows")))){const{data:n,error:r}=await ny.from("profiles").insert({id:e,...t}).select().single();if(r)throw r;return n}if(a)throw a;return r},async uploadAvatar(e,t){const n=t.name.split(".").pop(),r=`avatars/${`${e}-${Date.now()}.${n}`}`,{error:a}=await ny.storage.from("avatars").upload(r,t);if(a)throw a;const{data:{publicUrl:s}}=ny.storage.from("avatars").getPublicUrl(r);return await this.updateProfile(e,{avatar_url:s}),s}},my=3,gy=1e3,yy=1e4,vy=2500,by=2e3,wy=5e3,_y=!0;let Sy=null;const ky=F.createContext(),Ey=()=>{const e=F.useContext(ky);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e},Ty=({children:e})=>{fetch("http://127.0.0.1:7244/ingest/c4c33fba-1ee4-4b2f-aa1a-ed506c7c702f",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({location:"AuthContext.jsx:18",message:"AuthProvider initializing",data:{},timestamp:Date.now(),sessionId:"debug-session",runId:"run1",hypothesisId:"B"})}).catch(()=>{});const[t,n]=F.useState(null),[r,a]=F.useState(null),[s,i]=F.useState(!0),[o,l]=F.useState(null);F.useEffect(()=>{(null==t?void 0:t.id)?(async e=>{var r;if(e)try{const r=await py.getProfile(e);if(a(r),r&&t){const e=r.full_name||"";e!==(t.full_name||"")&&n({...t,full_name:e}),t.id,t.email,r.full_name}}catch(s){"PGRST116"===s.code||(null==(r=s.message)?void 0:r.includes("No rows"))||gd(0,s),a(null)}else a(null)})(t.id):a(null)},[t]),F.useEffect(()=>{hy.getSession().then(e=>{l(e),n((null==e?void 0:e.user)??null),i(!1)});const{data:{subscription:e}}=hy.onAuthStateChange((e,t)=>{l(t),n((null==t?void 0:t.user)??null),i(!1)}),t=(Sy&&clearInterval(Sy),Sy=setInterval(async()=>{try{const{data:{session:e}}=await ny.auth.getSession();if(!e||!e.expires_at)return;const t=Math.floor(Date.now()/1e3);if(e.expires_at-t<300){const{data:e,error:t}=await ny.auth.refreshSession();if(t)return void gd(0,t)}}catch(e){gd(0,e)}},6e4),()=>{Sy&&clearInterval(Sy)});return()=>{e.unsubscribe(),t&&t()}},[]);const u={user:t,userProfile:r,session:o,loading:s,login:async(e,t)=>{const{user:r,session:a}=await hy.signIn(e,t);return n(r),l(a),{user:r,session:a}},signup:async(e,t,r={})=>{const{user:a,session:s}=await hy.signUp(e,t,r);return n(a),l(s),{user:a,session:s}},logout:async()=>{await hy.signOut(),n(null),a(null),l(null)},signInWithProvider:async e=>{await hy.signInWithProvider(e)},sendOTP:async e=>await hy.sendOTP(e),verifyOTP:async(e,t)=>{const{user:r,session:a}=await hy.verifyOTP(e,t);return n(r),l(a),{user:r,session:a}},resetPassword:async e=>await hy.resetPassword(e),updatePassword:async e=>await hy.updatePassword(e),resendVerificationEmail:async e=>await hy.resendVerificationEmail(e),isAuthenticated:!!t,isAdmin:"admin"===(null==r?void 0:r.role),isEmailVerified:!!(null==t?void 0:t.email_confirmed_at)};return X.jsx(ky.Provider,{value:u,children:e})},Cy=F.createContext(),xy=()=>{const e=F.useContext(Cy);if(!e)throw new Error("useSearch must be used within a SearchProvider");return e},Oy=({children:e})=>{fetch("http://127.0.0.1:7244/ingest/c4c33fba-1ee4-4b2f-aa1a-ed506c7c702f",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({location:"SearchContext.jsx:13",message:"SearchProvider initializing",data:{},timestamp:Date.now(),sessionId:"debug-session",runId:"run1",hypothesisId:"B"})}).catch(()=>{});const[t,n]=F.useState({origin:"",destination:"",date:(new Date).toISOString().split("T")[0]}),[r,a]=F.useState([]),[s,i]=F.useState(!1),[o,l]=F.useState(null),u={searchParams:t,searchResults:r,loading:s,error:o,updateSearchParams:e=>{n(t=>({...t,...e}))},setSearchResults:a,setLoading:i,setError:l,clearSearch:()=>{n({origin:"",destination:"",date:(new Date).toISOString().split("T")[0]}),a([]),l(null)}};return X.jsx(Cy.Provider,{value:u,children:e})},Iy=F.createContext(),Py=()=>{const e=F.useContext(Iy);if(!e)throw new Error("useBooking must be used within a BookingProvider");return e},jy=({children:e})=>{fetch("http://127.0.0.1:7244/ingest/c4c33fba-1ee4-4b2f-aa1a-ed506c7c702f",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({location:"BookingContext.jsx:13",message:"BookingProvider initializing",data:{},timestamp:Date.now(),sessionId:"debug-session",runId:"run1",hypothesisId:"B"})}).catch(()=>{});const[t,n]=F.useState(null),[r,a]=F.useState([]),[s,i]=F.useState([]),[o,l]=F.useState(null),[u,c]=F.useState(null),d={selectedRoute:t,setSelectedRoute:n,selectedSeats:r,setSelectedSeats:a,passengerDetails:s,setPassengerDetails:i,booking:o,setBooking:l,paymentMethod:u,setPaymentMethod:c,clearBooking:()=>{n(null),a([]),i([]),l(null),c(null)}};return X.jsx(Iy.Provider,{value:d,children:e})},Ry="_errorBoundary_wrz74_1",Ay="_retryButton_wrz74_23";class Ny extends q.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){var t;return fetch("http://127.0.0.1:7244/ingest/c4c33fba-1ee4-4b2f-aa1a-ed506c7c702f",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({location:"ErrorBoundary.jsx:12",message:"getDerivedStateFromError called",data:{errorMessage:null==e?void 0:e.message,errorName:null==e?void 0:e.name,errorStack:null==(t=null==e?void 0:e.stack)?void 0:t.substring(0,500)},timestamp:Date.now(),sessionId:"debug-session",runId:"run1",hypothesisId:"A"})}).catch(()=>{}),{hasError:!0,error:e}}componentDidCatch(e,t){var n,r;fetch("http://127.0.0.1:7244/ingest/c4c33fba-1ee4-4b2f-aa1a-ed506c7c702f",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({location:"ErrorBoundary.jsx:18",message:"componentDidCatch called",data:{errorMessage:null==e?void 0:e.message,errorName:null==e?void 0:e.name,errorStack:null==(n=null==e?void 0:e.stack)?void 0:n.substring(0,1e3),componentStack:null==(r=null==t?void 0:t.componentStack)?void 0:r.substring(0,500)},timestamp:Date.now(),sessionId:"debug-session",runId:"run1",hypothesisId:"A"})}).catch(()=>{}),gd(0,{error:e,errorInfo:t}),t.componentStack,this.props}render(){var e,t;return this.state.hasError&&fetch("http://127.0.0.1:7244/ingest/c4c33fba-1ee4-4b2f-aa1a-ed506c7c702f",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({location:"ErrorBoundary.jsx:32",message:"ErrorBoundary rendering error UI",data:{errorMessage:null==(e=this.state.error)?void 0:e.message,errorName:null==(t=this.state.error)?void 0:t.name},timestamp:Date.now(),sessionId:"debug-session",runId:"run1",hypothesisId:"A"})}).catch(()=>{}),this.state.hasError?X.jsxs("div",{className:Ry,children:[X.jsx("h2",{children:"Something went wrong"}),X.jsx("p",{children:"We're sorry, but something unexpected happened."}),X.jsx("button",{onClick:()=>{this.setState({hasError:!1,error:null}),window.location.href="/"},className:Ay,children:"Go to Home"})]}):this.props.children}}var Dy,$y,Ly,Uy,My,By;($y=Dy||(Dy={})).STRING="string",$y.NUMBER="number",$y.INTEGER="integer",$y.BOOLEAN="boolean",$y.ARRAY="array",$y.OBJECT="object",(Uy=Ly||(Ly={})).LANGUAGE_UNSPECIFIED="language_unspecified",Uy.PYTHON="python",(By=My||(My={})).OUTCOME_UNSPECIFIED="outcome_unspecified",By.OUTCOME_OK="outcome_ok",By.OUTCOME_FAILED="outcome_failed",By.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded";
/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const zy=["user","model","function","system"];var Fy,qy,Hy,Wy,Vy,Ky,Jy,Gy,Yy,Qy,Xy,Zy,ev,tv,nv,rv;(qy=Fy||(Fy={})).HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",qy.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",qy.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",qy.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",qy.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",(Wy=Hy||(Hy={})).HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",Wy.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",Wy.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",Wy.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",Wy.BLOCK_NONE="BLOCK_NONE",(Ky=Vy||(Vy={})).HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",Ky.NEGLIGIBLE="NEGLIGIBLE",Ky.LOW="LOW",Ky.MEDIUM="MEDIUM",Ky.HIGH="HIGH",(Gy=Jy||(Jy={})).BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",Gy.SAFETY="SAFETY",Gy.OTHER="OTHER",(Qy=Yy||(Yy={})).FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",Qy.STOP="STOP",Qy.MAX_TOKENS="MAX_TOKENS",Qy.SAFETY="SAFETY",Qy.RECITATION="RECITATION",Qy.LANGUAGE="LANGUAGE",Qy.OTHER="OTHER",(Zy=Xy||(Xy={})).TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",Zy.RETRIEVAL_QUERY="RETRIEVAL_QUERY",Zy.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",Zy.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",Zy.CLASSIFICATION="CLASSIFICATION",Zy.CLUSTERING="CLUSTERING",(tv=ev||(ev={})).MODE_UNSPECIFIED="MODE_UNSPECIFIED",tv.AUTO="AUTO",tv.ANY="ANY",tv.NONE="NONE",(rv=nv||(nv={})).MODE_UNSPECIFIED="MODE_UNSPECIFIED",rv.MODE_DYNAMIC="MODE_DYNAMIC";
/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class av extends Error{constructor(e){super(`[GoogleGenerativeAI Error]: ${e}`)}}class sv extends av{constructor(e,t){super(e),this.response=t}}class iv extends av{constructor(e,t,n,r){super(e),this.status=t,this.statusText=n,this.errorDetails=r}}class ov extends av{}
/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var lv,uv;(uv=lv||(lv={})).GENERATE_CONTENT="generateContent",uv.STREAM_GENERATE_CONTENT="streamGenerateContent",uv.COUNT_TOKENS="countTokens",uv.EMBED_CONTENT="embedContent",uv.BATCH_EMBED_CONTENTS="batchEmbedContents";class cv{constructor(e,t,n,r,a){this.model=e,this.task=t,this.apiKey=n,this.stream=r,this.requestOptions=a}toString(){var e,t;const n=(null===(e=this.requestOptions)||void 0===e?void 0:e.apiVersion)||"v1beta";let r=`${(null===(t=this.requestOptions)||void 0===t?void 0:t.baseUrl)||"https://generativelanguage.googleapis.com"}/${n}/${this.model}:${this.task}`;return this.stream&&(r+="?alt=sse"),r}}async function dv(e){var t;const n=new Headers;n.append("Content-Type","application/json"),n.append("x-goog-api-client",function(e){const t=[];return(null==e?void 0:e.apiClient)&&t.push(e.apiClient),t.push("genai-js/0.21.0"),t.join(" ")}(e.requestOptions)),n.append("x-goog-api-key",e.apiKey);let r=null===(t=e.requestOptions)||void 0===t?void 0:t.customHeaders;if(r){if(!(r instanceof Headers))try{r=new Headers(r)}catch(Jw){throw new ov(`unable to convert customHeaders value ${JSON.stringify(r)} to Headers: ${Jw.message}`)}for(const[e,t]of r.entries()){if("x-goog-api-key"===e)throw new ov(`Cannot set reserved header name ${e}`);if("x-goog-api-client"===e)throw new ov(`Header name ${e} can only be set using the apiClient field`);n.append(e,t)}}return n}async function hv(e,t,n,r,a,s={},i=fetch){const{url:o,fetchOptions:l}=await async function(e,t,n,r,a,s){const i=new cv(e,t,n,r,s);return{url:i.toString(),fetchOptions:Object.assign(Object.assign({},fv(s)),{method:"POST",headers:await dv(i),body:a})}}(e,t,n,r,a,s);return async function(e,t,n=fetch){let r;try{r=await n(e,t)}catch(Jw){!function(e,t){let n=e;e instanceof iv||e instanceof ov||(n=new av(`Error fetching from ${t.toString()}: ${e.message}`),n.stack=e.stack);throw n}(Jw,e)}r.ok||await async function(e,t){let n,r="";try{const t=await e.json();r=t.error.message,t.error.details&&(r+=` ${JSON.stringify(t.error.details)}`,n=t.error.details)}catch(Jw){}throw new iv(`Error fetching from ${t.toString()}: [${e.status} ${e.statusText}] ${r}`,e.status,e.statusText,n)}(r,e);return r}(o,l,i)}function fv(e){const t={};if(void 0!==(null==e?void 0:e.signal)||(null==e?void 0:e.timeout)>=0){const n=new AbortController;(null==e?void 0:e.timeout)>=0&&setTimeout(()=>n.abort(),e.timeout),(null==e?void 0:e.signal)&&e.signal.addEventListener("abort",()=>{n.abort()}),t.signal=n.signal}return t}
/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pv(e){return e.text=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length,yv(e.candidates[0]))throw new sv(`${vv(e)}`,e);return function(e){var t,n,r,a;const s=[];if(null===(n=null===(t=e.candidates)||void 0===t?void 0:t[0].content)||void 0===n?void 0:n.parts)for(const i of null===(a=null===(r=e.candidates)||void 0===r?void 0:r[0].content)||void 0===a?void 0:a.parts)i.text&&s.push(i.text),i.executableCode&&s.push("\n```"+i.executableCode.language+"\n"+i.executableCode.code+"\n```\n"),i.codeExecutionResult&&s.push("\n```\n"+i.codeExecutionResult.output+"\n```\n");return s.length>0?s.join(""):""}(e)}if(e.promptFeedback)throw new sv(`Text not available. ${vv(e)}`,e);return""},e.functionCall=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length,yv(e.candidates[0]))throw new sv(`${vv(e)}`,e);return mv(e)[0]}if(e.promptFeedback)throw new sv(`Function call not available. ${vv(e)}`,e)},e.functionCalls=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length,yv(e.candidates[0]))throw new sv(`${vv(e)}`,e);return mv(e)}if(e.promptFeedback)throw new sv(`Function call not available. ${vv(e)}`,e)},e}function mv(e){var t,n,r,a;const s=[];if(null===(n=null===(t=e.candidates)||void 0===t?void 0:t[0].content)||void 0===n?void 0:n.parts)for(const i of null===(a=null===(r=e.candidates)||void 0===r?void 0:r[0].content)||void 0===a?void 0:a.parts)i.functionCall&&s.push(i.functionCall);return s.length>0?s:void 0}const gv=[Yy.RECITATION,Yy.SAFETY,Yy.LANGUAGE];function yv(e){return!!e.finishReason&&gv.includes(e.finishReason)}function vv(e){var t,n,r;let a="";if(e.candidates&&0!==e.candidates.length||!e.promptFeedback){if(null===(r=e.candidates)||void 0===r?void 0:r[0]){const t=e.candidates[0];yv(t)&&(a+=`Candidate was blocked due to ${t.finishReason}`,t.finishMessage&&(a+=`: ${t.finishMessage}`))}}else a+="Response was blocked",(null===(t=e.promptFeedback)||void 0===t?void 0:t.blockReason)&&(a+=` due to ${e.promptFeedback.blockReason}`),(null===(n=e.promptFeedback)||void 0===n?void 0:n.blockReasonMessage)&&(a+=`: ${e.promptFeedback.blockReasonMessage}`);return a}function bv(e){return this instanceof bv?(this.v=e,this):new bv(e)}function wv(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,a=n.apply(e,t||[]),s=[];return r={},i("next"),i("throw"),i("return"),r[Symbol.asyncIterator]=function(){return this},r;function i(e){a[e]&&(r[e]=function(t){return new Promise(function(n,r){s.push([e,t,n,r])>1||o(e,t)})})}function o(e,t){try{(n=a[e](t)).value instanceof bv?Promise.resolve(n.value.v).then(l,u):c(s[0][2],n)}catch(Jw){c(s[0][3],Jw)}var n}function l(e){o("next",e)}function u(e){o("throw",e)}function c(e,t){e(t),s.shift(),s.length&&o(s[0][0],s[0][1])}}"function"==typeof SuppressedError&&SuppressedError;
/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const _v=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function Sv(e){const t=function(e){const t=e.getReader();return new ReadableStream({start(e){let n="";return r();function r(){return t.read().then(({value:t,done:a})=>{if(a)return n.trim()?void e.error(new av("Failed to parse stream")):void e.close();n+=t;let s,i=n.match(_v);for(;i;){try{s=JSON.parse(i[1])}catch(Jw){return void e.error(new av(`Error parsing JSON response: "${i[1]}"`))}e.enqueue(s),n=n.substring(i[0].length),i=n.match(_v)}return r()})}}})}(e.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0}))),[n,r]=t.tee();return{stream:Ev(n),response:kv(r)}}async function kv(e){const t=[],n=e.getReader();for(;;){const{done:e,value:r}=await n.read();if(e)return pv(Tv(t));t.push(r)}}function Ev(e){return wv(this,arguments,function*(){const t=e.getReader();for(;;){const{value:e,done:n}=yield bv(t.read());if(n)break;yield yield bv(pv(e))}})}function Tv(e){const t=e[e.length-1],n={promptFeedback:null==t?void 0:t.promptFeedback};for(const r of e){if(r.candidates)for(const e of r.candidates){const t=e.index;if(n.candidates||(n.candidates=[]),n.candidates[t]||(n.candidates[t]={index:e.index}),n.candidates[t].citationMetadata=e.citationMetadata,n.candidates[t].groundingMetadata=e.groundingMetadata,n.candidates[t].finishReason=e.finishReason,n.candidates[t].finishMessage=e.finishMessage,n.candidates[t].safetyRatings=e.safetyRatings,e.content&&e.content.parts){n.candidates[t].content||(n.candidates[t].content={role:e.content.role||"user",parts:[]});const r={};for(const a of e.content.parts)a.text&&(r.text=a.text),a.functionCall&&(r.functionCall=a.functionCall),a.executableCode&&(r.executableCode=a.executableCode),a.codeExecutionResult&&(r.codeExecutionResult=a.codeExecutionResult),0===Object.keys(r).length&&(r.text=""),n.candidates[t].content.parts.push(r)}}r.usageMetadata&&(n.usageMetadata=r.usageMetadata)}return n}
/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cv(e,t,n,r){return Sv(await hv(t,lv.STREAM_GENERATE_CONTENT,e,!0,JSON.stringify(n),r))}async function xv(e,t,n,r){const a=await hv(t,lv.GENERATE_CONTENT,e,!1,JSON.stringify(n),r);return{response:pv(await a.json())}}
/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ov(e){if(null!=e)return"string"==typeof e?{role:"system",parts:[{text:e}]}:e.text?{role:"system",parts:[e]}:e.parts?e.role?e:{role:"system",parts:e.parts}:void 0}function Iv(e){let t=[];if("string"==typeof e)t=[{text:e}];else for(const n of e)"string"==typeof n?t.push({text:n}):t.push(n);return function(e){const t={role:"user",parts:[]},n={role:"function",parts:[]};let r=!1,a=!1;for(const s of e)"functionResponse"in s?(n.parts.push(s),a=!0):(t.parts.push(s),r=!0);if(r&&a)throw new av("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!r&&!a)throw new av("No content is provided for sending chat message.");if(r)return t;return n}(t)}function Pv(e){let t;if(e.contents)t=e;else{t={contents:[Iv(e)]}}return e.systemInstruction&&(t.systemInstruction=Ov(e.systemInstruction)),t}
/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const jv=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],Rv={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};
/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Av="SILENT_ERROR";class Nv{constructor(e,t,n,r={}){this.model=t,this.params=n,this._requestOptions=r,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=e,(null==n?void 0:n.history)&&(!function(e){let t=!1;for(const n of e){const{role:e,parts:r}=n;if(!t&&"user"!==e)throw new av(`First content should be with role 'user', got ${e}`);if(!zy.includes(e))throw new av(`Each item should include role field. Got ${e} but valid roles are: ${JSON.stringify(zy)}`);if(!Array.isArray(r))throw new av("Content should have 'parts' property with an array of Parts");if(0===r.length)throw new av("Each Content should have at least one part");const a={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(const t of r)for(const e of jv)e in t&&(a[e]+=1);const s=Rv[e];for(const t of jv)if(!s.includes(t)&&a[t]>0)throw new av(`Content with role '${e}' can't contain '${t}' part`);t=!0}}(n.history),this._history=n.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(e,t={}){var n,r,a,s,i,o;await this._sendPromise;const l=Iv(e),u={safetySettings:null===(n=this.params)||void 0===n?void 0:n.safetySettings,generationConfig:null===(r=this.params)||void 0===r?void 0:r.generationConfig,tools:null===(a=this.params)||void 0===a?void 0:a.tools,toolConfig:null===(s=this.params)||void 0===s?void 0:s.toolConfig,systemInstruction:null===(i=this.params)||void 0===i?void 0:i.systemInstruction,cachedContent:null===(o=this.params)||void 0===o?void 0:o.cachedContent,contents:[...this._history,l]},c=Object.assign(Object.assign({},this._requestOptions),t);let d;return this._sendPromise=this._sendPromise.then(()=>xv(this._apiKey,this.model,u,c)).then(e=>{var t;if(e.response.candidates&&e.response.candidates.length>0){this._history.push(l);const n=Object.assign({parts:[],role:"model"},null===(t=e.response.candidates)||void 0===t?void 0:t[0].content);this._history.push(n)}else{vv(e.response)}d=e}),await this._sendPromise,d}async sendMessageStream(e,t={}){var n,r,a,s,i,o;await this._sendPromise;const l=Iv(e),u={safetySettings:null===(n=this.params)||void 0===n?void 0:n.safetySettings,generationConfig:null===(r=this.params)||void 0===r?void 0:r.generationConfig,tools:null===(a=this.params)||void 0===a?void 0:a.tools,toolConfig:null===(s=this.params)||void 0===s?void 0:s.toolConfig,systemInstruction:null===(i=this.params)||void 0===i?void 0:i.systemInstruction,cachedContent:null===(o=this.params)||void 0===o?void 0:o.cachedContent,contents:[...this._history,l]},c=Object.assign(Object.assign({},this._requestOptions),t),d=Cv(this._apiKey,this.model,u,c);return this._sendPromise=this._sendPromise.then(()=>d).catch(e=>{throw new Error(Av)}).then(e=>e.response).then(e=>{if(e.candidates&&e.candidates.length>0){this._history.push(l);const t=Object.assign({},e.candidates[0].content);t.role||(t.role="model"),this._history.push(t)}else{vv(e)}}).catch(e=>{e.message}),d}}
/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Dv{constructor(e,t,n={}){this.apiKey=e,this._requestOptions=n,t.model.includes("/")?this.model=t.model:this.model=`models/${t.model}`,this.generationConfig=t.generationConfig||{},this.safetySettings=t.safetySettings||[],this.tools=t.tools,this.toolConfig=t.toolConfig,this.systemInstruction=Ov(t.systemInstruction),this.cachedContent=t.cachedContent}async generateContent(e,t={}){var n;const r=Pv(e),a=Object.assign(Object.assign({},this._requestOptions),t);return xv(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:null===(n=this.cachedContent)||void 0===n?void 0:n.name},r),a)}async generateContentStream(e,t={}){var n;const r=Pv(e),a=Object.assign(Object.assign({},this._requestOptions),t);return Cv(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:null===(n=this.cachedContent)||void 0===n?void 0:n.name},r),a)}startChat(e){var t;return new Nv(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:null===(t=this.cachedContent)||void 0===t?void 0:t.name},e),this._requestOptions)}async countTokens(e,t={}){const n=function(e,t){var n;let r={model:null==t?void 0:t.model,generationConfig:null==t?void 0:t.generationConfig,safetySettings:null==t?void 0:t.safetySettings,tools:null==t?void 0:t.tools,toolConfig:null==t?void 0:t.toolConfig,systemInstruction:null==t?void 0:t.systemInstruction,cachedContent:null===(n=null==t?void 0:t.cachedContent)||void 0===n?void 0:n.name,contents:[]};const a=null!=e.generateContentRequest;if(e.contents){if(a)throw new ov("CountTokensRequest must have one of contents or generateContentRequest, not both.");r.contents=e.contents}else if(a)r=Object.assign(Object.assign({},r),e.generateContentRequest);else{const t=Iv(e);r.contents=[t]}return{generateContentRequest:r}}(e,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),r=Object.assign(Object.assign({},this._requestOptions),t);return async function(e,t,n,r){return(await hv(t,lv.COUNT_TOKENS,e,!1,JSON.stringify(n),r)).json()}
/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(this.apiKey,this.model,n,r)}async embedContent(e,t={}){const n=function(e){if("string"==typeof e||Array.isArray(e))return{content:Iv(e)};return e}(e),r=Object.assign(Object.assign({},this._requestOptions),t);return async function(e,t,n,r){return(await hv(t,lv.EMBED_CONTENT,e,!1,JSON.stringify(n),r)).json()}(this.apiKey,this.model,n,r)}async batchEmbedContents(e,t={}){const n=Object.assign(Object.assign({},this._requestOptions),t);return async function(e,t,n,r){const a=n.requests.map(e=>Object.assign(Object.assign({},e),{model:t}));return(await hv(t,lv.BATCH_EMBED_CONTENTS,e,!1,JSON.stringify({requests:a}),r)).json()}(this.apiKey,this.model,e,n)}}
/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $v{constructor(e){this.apiKey=e}getGenerativeModel(e,t){if(!e.model)throw new av("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new Dv(this.apiKey,e,t)}getGenerativeModelFromCachedContent(e,t,n){if(!e.name)throw new ov("Cached content must contain a `name` field.");if(!e.model)throw new ov("Cached content must contain a `model` field.");const r=["model","systemInstruction"];for(const s of r)if((null==t?void 0:t[s])&&e[s]&&(null==t?void 0:t[s])!==e[s]){if("model"===s){if((t.model.startsWith("models/")?t.model.replace("models/",""):t.model)===(e.model.startsWith("models/")?e.model.replace("models/",""):e.model))continue}throw new ov(`Different value for "${s}" specified in modelParams (${t[s]}) and cachedContent (${e[s]})`)}const a=Object.assign(Object.assign({},t),{model:e.model,tools:e.tools,toolConfig:e.toolConfig,systemInstruction:e.systemInstruction,cachedContent:e});return new Dv(this.apiKey,a,n)}}const Lv=e=>{if(!e||"string"!=typeof e)return!1;return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e.trim())},Uv=e=>{if(!e||"string"!=typeof e)return!1;return/^\+267\d{8}$/.test(e.trim())},Mv=(e,t={})=>{const{minLength:n=2,maxLength:r=100}=t;if(!e||"string"!=typeof e)return!1;const a=e.trim();if(a.length<n||a.length>r)return!1;return/^[a-zA-Z\s\-'\.]+$/.test(a)},Bv=(e,t={})=>{const{min:n=.01,max:r=1e5}=t,a="string"==typeof e?parseFloat(e):e;return!(isNaN(a)||!isFinite(a))&&(a>=n&&a<=r)},zv=(e,t={})=>{const{allowPast:n=!1,maxDaysFuture:r=365}=t;if(!e)return!1;const a=e instanceof Date?e:new Date(e);if(isNaN(a.getTime()))return!1;const s=new Date;if(s.setHours(0,0,0,0),a.setHours(0,0,0,0),!n&&a<s)return!1;const i=new Date(s);return i.setDate(i.getDate()+r),!(a>i)},Fv=(e,t=10)=>{if(!e)return!1;const n=Array.isArray(e)?e:[e];if(0===n.length||n.length>t)return!1;const r=/^\d+[A-Z]$/i;return n.every(e=>"string"==typeof e&&r.test(e.trim()))},qv=e=>{if(!e||"string"!=typeof e)return"";const t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"};return e.replace(/[&<>"'/]/g,e=>t[e])},Hv=e=>{if(null==e)return e;if("string"==typeof e)return qv(e);if(Array.isArray(e))return e.map(e=>Hv(e));if("object"==typeof e){const t={};for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=Hv(e[n]));return t}return e},Wv=e=>{const t=[];return e.schedule_id||t.push("Schedule ID is required"),e.seats&&Array.isArray(e.seats)&&0!==e.seats.length?Fv(e.seats)||t.push("Invalid seat selection format"):t.push("At least one seat must be selected"),e.passenger_name&&Mv(e.passenger_name)||t.push("Valid passenger name is required"),e.passenger_email&&Lv(e.passenger_email)||t.push("Valid passenger email is required"),e.passenger_phone&&Uv(e.passenger_phone)||t.push("Valid passenger phone number is required (format: +267XXXXXXXX)"),e.total_price&&!Bv(e.total_price)&&t.push("Invalid payment amount"),{valid:0===t.length,errors:t}},Vv=e=>{if(!e||"string"!=typeof e)return!1;return/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(e.trim())},Kv=Object.freeze(Object.defineProperty({__proto__:null,sanitizeInput:qv,sanitizeObject:Hv,validateAmount:Bv,validateBookingInput:Wv,validateDate:zv,validateEmail:Lv,validateName:Mv,validatePhone:Uv,validateSeats:Fv,validateUUID:Vv},Symbol.toStringTag,{value:"Module"})),Jv={async searchTrips({origin:e,destination:t,date:n,passengers:r}){const a=new Date(n);a.setHours(0,0,0,0);const s=new Date(n);s.setHours(23,59,59,999);const{data:i,error:o}=await ny.from("schedules").select("\n        *,\n        route:routes(*),\n        bus:buses(*)\n      ").eq("status","active").gte("departure_time",a.toISOString()).lte("departure_time",s.toISOString()).gte("available_seats",r||1).order("departure_time");if(o)return{data:null,error:o};return{data:i.filter(n=>{var r,a;const s=n.route;if(!s)return!1;const i=null==(r=s.origin)?void 0:r.toLowerCase().includes(e.toLowerCase()),o=null==(a=s.destination)?void 0:a.toLowerCase().includes(t.toLowerCase());return i&&o}).map(e=>{const t=e.route||{},n=e.bus||{},r=t.duration_hours?Math.round(60*t.duration_hours):null;return{id:e.id,departure_time:e.departure_time,arrival_time:e.arrival_time,price:parseFloat(e.price),available_seats:e.available_seats,routes:{id:t.id,origin:t.origin,destination:t.destination,distance_km:t.distance_km,duration_minutes:r},buses:{id:n.id,bus_name:n.plate_number||"Standard Bus",bus_type:n.bus_type||"standard",capacity:n.capacity||40,amenities:Array.isArray(n.amenities)?n.amenities:[]}}}),error:null}},async getTripById(e){const{data:t,error:n}=await ny.from("schedules").select("\n        *,\n        route:routes(*),\n        bus:buses(*)\n      ").eq("id",e).single();if(n)return{data:null,error:n};const r=t.route||{},a=t.bus||{},s=r.duration_hours?Math.round(60*r.duration_hours):null,i=a.capacity||40,o=t.seat_map||[],l=[],u=Math.ceil(i/4),c=["A","B","C","D"],d=new Set;Array.isArray(o)&&o.forEach(e=>{"string"==typeof e?d.add(e):e&&e.seat_number&&d.add(e.seat_number)});for(let h=1;h<=u;h++){for(let e=0;e<c.length;e++){const n=c[e],r=`${h}${n}`,a=d.has(r);if(l.length>=i)break;l.push({id:`${t.id}-${r}`,seat_number:r,seat_row:h.toString(),seat_column:n,is_available:!a})}if(l.length>=i)break}return{data:{id:t.id,departure_time:t.departure_time,arrival_time:t.arrival_time,price:parseFloat(t.price),available_seats:t.available_seats,routes:{id:r.id,origin:r.origin,destination:r.destination,distance_km:r.distance_km,duration_minutes:s},buses:{id:a.id,bus_name:a.plate_number||"Standard Bus",bus_type:a.bus_type||"standard",capacity:a.capacity||40,amenities:Array.isArray(a.amenities)?a.amenities:[]},seats:l},error:null}},async searchSchedules(e,t,n){const r=new Date(n);r.setHours(0,0,0,0);const a=new Date(n);a.setHours(23,59,59,999);const{data:s,error:i}=await ny.from("schedules").select("\n        *,\n        route:routes(*),\n        bus:buses(*, company:companies(*))\n      ").eq("status","active").gte("departure_time",r.toISOString()).lte("departure_time",a.toISOString()).gt("available_seats",0).order("departure_time");if(i)throw i;return s.filter(n=>n.route.origin.toLowerCase().includes(e.toLowerCase())&&n.route.destination.toLowerCase().includes(t.toLowerCase())).map(e=>{var t,r,a,s;const i=new Date(e.departure_time),o=new Date(e.arrival_time),l=o-i,u=Math.floor(l/36e5),c=Math.floor(l%36e5/6e4);return{id:e.id,company:{name:(null==(r=null==(t=e.bus)?void 0:t.company)?void 0:r.name)||"Unknown",logo:""},departure_time:i.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1}),arrival_time:o.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1}),duration:`${u}h ${c}m`,price:parseFloat(e.price),available_seats:e.available_seats,amenities:(null==(a=e.bus)?void 0:a.amenities)||[],bus_type:(null==(s=e.bus)?void 0:s.bus_type)||"Standard",origin:e.route.origin,destination:e.route.destination,date:n}})},async createBooking(e){try{const t=Wv(e);if(!t.valid)throw new Error(t.errors.join(", "));if(e.schedule_id&&!Vv(e.schedule_id))throw new Error("Invalid schedule ID");if(e.user_id&&!Vv(e.user_id))throw new Error("Invalid user ID");const n=Hv(e),{data:r,error:a}=await ny.from("bookings").insert(n).select().single();if(a)throw a;if(e.schedule_id&&e.seats){const t=Array.isArray(e.seats)?e.seats.map(e=>"string"==typeof e?e:e.seat_number||e):[e.seats],{data:n,error:r}=await ny.from("schedules").select("seat_map, available_seats").eq("id",e.schedule_id).single();if(!r&&n){const r=Array.isArray(n.seat_map)?n.seat_map:[],a=[...new Set([...r,...t])],s=Math.max(0,(n.available_seats||0)-t.length);await ny.from("schedules").update({seat_map:a,available_seats:s}).eq("id",e.schedule_id)}}return r}catch(t){throw gd(0,t),t}},async getUserBookings(e){const{data:t,error:n}=await ny.from("bookings").select("\n        *,\n        schedule:schedules(\n          *,\n          route:routes(*),\n          bus:buses(*, company:companies(*))\n        )\n      ").eq("user_id",e).order("created_at",{ascending:!1});if(n)throw n;return t},async cancelBooking(e){const{data:t,error:n}=await ny.from("bookings").update({status:"cancelled"}).eq("id",e).select().single();if(n)throw n;return t}},Gv=["speak to human","talk to human","real person","human agent","customer service","speak to someone","talk to someone","human support","live agent","representative"],Yv=async e=>{const t={user:null,bookings:[],upcomingTrips:[],pastTrips:[]};try{const{data:n}=await ny.from("profiles").select("id, full_name, phone_number, email").eq("id",e).single();n&&(t.user={name:n.full_name||"Customer",phone:n.phone_number,email:n.email});const r=await Jv.getUserBookings(e);if(r&&r.length>0){const e=new Date;t.bookings=r.slice(0,5).map(e=>{var t,n;return{reference:e.booking_reference,status:e.status,route:(null==(t=e.schedule)?void 0:t.route)?`${e.schedule.route.origin} to ${e.schedule.route.destination}`:"Unknown route",date:null==(n=e.schedule)?void 0:n.departure_time,seats:e.seat_numbers,amount:e.total_amount}}),t.upcomingTrips=t.bookings.filter(t=>t.date&&new Date(t.date)>e&&"cancelled"!==t.status),t.pastTrips=t.bookings.filter(t=>t.date&&new Date(t.date)<=e)}}catch(n){gd(0,n)}return t},Qv=e=>{const t=e.toLowerCase();return Gv.some(e=>t.includes(e))},Xv=e=>{let t=.85,n=!1,r=e;e.includes("[ESCALATE]")&&(n=!0,t=.4,r=e.replace("[ESCALATE]","").trim());const a=e.toLowerCase(),s=["i'm not sure","i don't have access","i cannot confirm","you should contact","please contact support","i recommend speaking","a human agent","i don't know","i'm unable to"].filter(e=>a.includes(e)).length;return s>0&&(t-=.15*s,t<.5&&(n=!0)),t=Math.max(0,Math.min(1,t)),{confidence:t,shouldEscalate:n,cleanResponse:r}},Zv=async(e,t,n,r)=>{try{const{data:a,error:s}=await ny.functions.invoke("ai-chat-handler",{body:{conversationId:e,userId:t,userMessage:n,conversationHistory:r.slice(-10)}});if(s)throw s;return{success:!0,response:a.response,confidence:a.confidence,shouldEscalate:a.shouldEscalate}}catch(a){return gd(0,a),{success:!1,error:a.message,shouldEscalate:!0,response:"I apologize, but I'm having trouble right now. Let me connect you with our support team."}}},eb=async(e,t,n,r=[])=>{try{if(Qv(n))return{success:!0,response:"I understand you'd like to speak with a human agent. I'm connecting you with our support team now. They typically respond within a few minutes.",confidence:1,shouldEscalate:!0,isHumanRequest:!0};if(!0)return await Zv(e,t,n,r);const i=new $v("AIzaSyDeHmlwvIvw3764l_Cftv9kYWDUbHbH02A");if(!i)return{success:!1,error:"AI service not configured",shouldEscalate:!0};const o=(e=>{let t="\n\n--- User Context ---\n";return e.user&&(t+=`Customer Name: ${e.user.name}\n`),e.upcomingTrips.length>0&&(t+=`\nUpcoming Trips (${e.upcomingTrips.length}):\n`,e.upcomingTrips.forEach((e,n)=>{const r=e.date?new Date(e.date).toLocaleDateString("en-GB"):"Unknown";t+=`${n+1}. ${e.route} on ${r} - Ref: ${e.reference} - Status: ${e.status}\n`})),e.pastTrips.length>0&&(t+=`\nRecent Past Trips (${Math.min(e.pastTrips.length,3)}):\n`,e.pastTrips.slice(0,3).forEach((e,n)=>{const r=e.date?new Date(e.date).toLocaleDateString("en-GB"):"Unknown";t+=`${n+1}. ${e.route} on ${r} - Ref: ${e.reference}\n`})),0===e.bookings.length&&(t+="No booking history found.\n"),t+="--- End Context ---\n",t})(await Yv(t)),l=`You are GoGoBus AI Support Assistant, a helpful and friendly customer service agent for GoGoBus, a bus booking platform in Botswana.\n\nYour role is to:\n1. Help customers with booking inquiries, ticket questions, and travel information\n2. Provide information about routes, schedules, and pricing\n3. Assist with account-related questions\n4. Guide users through the booking process\n\nImportant guidelines:\n- Be friendly, professional, and concise\n- If you're unsure about specific booking details, prices, or real-time availability, acknowledge this and suggest the user check the app or contact support\n- For refunds, cancellations, or complex issues, indicate that a human agent can assist\n- Keep responses under 200 words unless more detail is needed\n- Use Botswana Pula (BWP/P) for currency references\n\nWhen you cannot confidently answer a question or the user needs human assistance, include the phrase "[ESCALATE]" at the end of your response.\n\nCurrent context will be provided about the user and their bookings to help personalize responses.${o}\n\nPrevious conversation:\n${((a=r)&&0!==a.length?a.slice(-10).map(e=>`${"user"===e.sender_type?"Customer":"Support"}: ${e.content}`).join("\n"):"")||"No previous messages."}\n\nCustomer's new message: ${n}\n\nPlease provide a helpful response:`,u=["gemini-1.5-flash-latest","gemini-pro","gemini-1.0-pro"];let c=null,d=null;for(const e of u)try{const t=i.getGenerativeModel({model:e});c=(await t.generateContent(l)).response.text();break}catch(s){d=s,pd(0,{error:s.message});continue}if(!c)throw new Error(`All Gemini models failed. Last error: ${(null==d?void 0:d.message)||"Unknown error"}`);const h=Xv(c);return h.confidence,h.shouldEscalate,{success:!0,response:h.cleanResponse,confidence:h.confidence,shouldEscalate:h.shouldEscalate||h.confidence<.7}}catch(s){return gd(0,s),{success:!1,error:s.message,shouldEscalate:!0,response:"I apologize, but I'm having trouble processing your request right now. Let me connect you with our support team."}}var a};function tb(e){const t=e.toLowerCase();return t.includes("book")||t.includes("ticket")||t.includes("buy")?"To book a ticket:\n\n1. Select your departure and destination cities\n2. Choose your travel date\n3. Pick the number of passengers\n4. Click 'Search Buses' to see available options\n5. Select your preferred bus and seat\n6. Complete payment\n\nWould you like me to help you with any specific route?":t.includes("route")||t.includes("where")||t.includes("destination")?"We operate routes across Botswana including:\n\n Gaborone  Francistown\n Gaborone  Maun  \n Gaborone  Kasane\n Francistown  Kasane\n And many more!\n\nUse the 'Popular Routes' section on the home page or the search form to find your specific route.":t.includes("price")||t.includes("cost")||t.includes("how much")||t.includes("fare")?"Ticket prices vary by route and bus type. For example:\n\n Gaborone to Francistown: from P150\n Gaborone to Kasane: from P350\n\nTo see exact prices, please search for your specific route and date.":t.includes("cancel")||t.includes("refund")?"To cancel a booking:\n\n1. Go to 'My Tickets' in the menu\n2. Find your booking\n3. Click 'Cancel Booking'\n\nRefund policy:\n 24+ hours before departure: Full refund\n 12-24 hours: 50% refund\n Less than 12 hours: No refund":t.includes("schedule")||t.includes("time")||t.includes("when")||t.includes("depart")?"Bus schedules vary by route. Most routes have multiple departures daily:\n\n Early morning: 5:00 AM - 7:00 AM\n Morning: 8:00 AM - 10:00 AM\n Afternoon: 2:00 PM - 4:00 PM\n Evening: 6:00 PM - 8:00 PM\n\nSearch for your specific route to see available departure times.":t.includes("pay")||t.includes("orange money")||t.includes("myzaka")||t.includes("card")?"We accept multiple payment methods:\n\n Orange Money\n MyZaka\n Bank cards (Visa/Mastercard)\n Cash at select stations\n\nAll online payments are secure and you'll receive a confirmation SMS immediately after booking.":t.includes("contact")||t.includes("phone")||t.includes("call")||t.includes("human")||t.includes("agent")?"Need to speak with a human agent? Our support team is available:\n\n Phone: +267 123 4567\n Email: support@gogobus.co.bw\n Hours: 7:00 AM - 9:00 PM daily\n\nOr I can escalate this chat to a human agent right now. Would you like me to do that?":t.includes("hello")||t.includes("hi")||t.includes("hey")||"yo"===t?"Hello!  Welcome to GoGoBus Support!\n\nI'm here to help you with:\n Booking tickets\n Finding routes and schedules\n Payment questions\n Cancellations and refunds\n\nHow can I assist you today?":t.includes("thank")||t.includes("thanks")?"You're welcome!  Is there anything else I can help you with?":"I'd be happy to help! Here are some things I can assist with:\n\n **Booking tickets** - How to book, select seats, make payments\n **Routes & schedules** - Available destinations and departure times  \n **Prices** - Fare information for different routes\n **Cancellations** - How to cancel and refund policy\n\nWhat would you like to know more about?"}const nb={sendMessageAndGetAIResponse:async function(e,t,n){try{const r=tb(t);await new Promise(e=>setTimeout(e,800+700*Math.random()));const{data:a}=await ny.from("chat_conversations").select("user_id").eq("id",e).single(),{data:s,error:i}=await ny.from("chat_messages").insert({conversation_id:e,sender_id:(null==a?void 0:a.user_id)||n,sender_type:"ai",content:r,is_read:!0}).select().single();if(i)throw i;return{success:!0,message:s}}catch(r){throw r}},shouldEscalateToHuman:function(e){const t=e.toLowerCase();return["human","agent","person","representative","speak to someone","talk to someone","real person","not helpful","escalate","manager","supervisor","complaint"].some(e=>t.includes(e))},generateLocalAIResponse:tb},rb={async getOrCreateConversation(e){var t,n,r,a,s,i;fetch("http://127.0.0.1:7244/ingest/c4c33fba-1ee4-4b2f-aa1a-ed506c7c702f",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({location:"chatService.js:15",message:"getOrCreateConversation called",data:{userId:e,userIdType:typeof e},timestamp:Date.now(),sessionId:"debug-session",runId:"run1",hypothesisId:"A"})}).catch(()=>{});try{fetch("http://127.0.0.1:7244/ingest/c4c33fba-1ee4-4b2f-aa1a-ed506c7c702f",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({location:"chatService.js:18",message:"Checking auth session before query",data:{},timestamp:Date.now(),sessionId:"debug-session",runId:"run1",hypothesisId:"B"})}).catch(()=>{});const{data:o,error:l}=await ny.auth.getSession();fetch("http://127.0.0.1:7244/ingest/c4c33fba-1ee4-4b2f-aa1a-ed506c7c702f",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({location:"chatService.js:21",message:"Session check result",data:{hasSession:!!(null==o?void 0:o.session),userId:null==(n=null==(t=null==o?void 0:o.session)?void 0:t.user)?void 0:n.id,authUid:null==(a=null==(r=null==o?void 0:o.session)?void 0:r.user)?void 0:a.id,matchesUserId:(null==(i=null==(s=null==o?void 0:o.session)?void 0:s.user)?void 0:i.id)===e,sessionError:null==l?void 0:l.message},timestamp:Date.now(),sessionId:"debug-session",runId:"run1",hypothesisId:"B"})}).catch(()=>{}),fetch("http://127.0.0.1:7244/ingest/c4c33fba-1ee4-4b2f-aa1a-ed506c7c702f",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({location:"chatService.js:25",message:"Searching for existing conversation",data:{userId:e},timestamp:Date.now(),sessionId:"debug-session",runId:"run1",hypothesisId:"A"})}).catch(()=>{});const{data:u,error:c}=await ny.from("chat_conversations").select("*").eq("user_id",e).eq("status","open").order("created_at",{ascending:!1}).limit(1).single();if(fetch("http://127.0.0.1:7244/ingest/c4c33fba-1ee4-4b2f-aa1a-ed506c7c702f",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({location:"chatService.js:35",message:"Existing conversation search result",data:{hasExisting:!!u,hasError:!!c,errorCode:null==c?void 0:c.code,errorMessage:null==c?void 0:c.message},timestamp:Date.now(),sessionId:"debug-session",runId:"run1",hypothesisId:"A"})}).catch(()=>{}),u&&!c)return{data:u,error:null};fetch("http://127.0.0.1:7244/ingest/c4c33fba-1ee4-4b2f-aa1a-ed506c7c702f",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({location:"chatService.js:42",message:"Attempting to create new conversation",data:{userId:e,userIdType:typeof e,insertData:{user_id:e,status:"open"}},timestamp:Date.now(),sessionId:"debug-session",runId:"run1",hypothesisId:"C"})}).catch(()=>{});const{data:d,error:h}=await ny.from("chat_conversations").insert({user_id:e,status:"open"}).select().single();return fetch("http://127.0.0.1:7244/ingest/c4c33fba-1ee4-4b2f-aa1a-ed506c7c702f",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({location:"chatService.js:52",message:"Create conversation result",data:{hasConversation:!!d,hasError:!!h,errorCode:null==h?void 0:h.code,errorMessage:null==h?void 0:h.message,errorDetails:null==h?void 0:h.details,errorHint:null==h?void 0:h.hint},timestamp:Date.now(),sessionId:"debug-session",runId:"run1",hypothesisId:"C"})}).catch(()=>{}),h?(gd(0,h),{data:null,error:h}):{data:d,error:null}}catch(o){return fetch("http://127.0.0.1:7244/ingest/c4c33fba-1ee4-4b2f-aa1a-ed506c7c702f",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({location:"chatService.js:60",message:"getOrCreateConversation exception",data:{errorMessage:null==o?void 0:o.message,errorStack:null==o?void 0:o.stack},timestamp:Date.now(),sessionId:"debug-session",runId:"run1",hypothesisId:"D"})}).catch(()=>{}),gd(0,o),{data:null,error:o}}},async getAllConversations(e={}){try{let t=ny.from("chat_conversations").select("*").order("updated_at",{ascending:!1});e.status&&"all"!==e.status&&(t=t.eq("status",e.status));const{data:n,error:r}=await t;if(r)return gd(0,r),{data:null,error:r};if(!n||0===n.length)return{data:[],error:null};const a=[...new Set(n.map(e=>e.user_id))],{data:s,error:i}=await ny.from("profiles").select("id, full_name, phone_number, avatar_url").in("id",a);i&&gd(0,i);const o=new Map((s||[]).map(e=>[e.id,e]));return{data:await Promise.all((n||[]).map(async e=>{const{count:t}=await ny.from("chat_messages").select("*",{count:"exact",head:!0}).eq("conversation_id",e.id).eq("sender_type","user").eq("is_read",!1);return{...e,user:o.get(e.user_id)||null,unread_count:t||0}})),error:null}}catch(t){return gd(0,t),{data:null,error:t}}},async getMessages(e,t=50){try{const{data:n,error:r}=await ny.from("chat_messages").select("*").eq("conversation_id",e).order("created_at",{ascending:!0}).limit(t);return r?(gd(0,r),{data:null,error:r}):{data:n,error:null}}catch(n){return gd(0,n),{data:null,error:n}}},async sendMessage(e,t,n,r="user"){try{const{data:a,error:s}=await ny.from("chat_messages").insert({conversation_id:e,sender_id:t,sender_type:r,content:n.trim(),is_read:!1}).select().single();return s?(gd(0,s),{data:null,error:s}):{data:a,error:null}}catch(a){return gd(0,a),{data:null,error:a}}},async markMessagesAsRead(e,t){try{const n="admin"===t?"user":"admin",{error:r}=await ny.from("chat_messages").update({is_read:!0}).eq("conversation_id",e).eq("sender_type",n).eq("is_read",!1);return r?(gd(0,r),{error:r}):{error:null}}catch(n){return gd(0,n),{error:n}}},async getUnreadCount(e){try{const{data:t,error:n}=await ny.from("chat_conversations").select("id").eq("user_id",e);if(n||!(null==t?void 0:t.length))return{count:0,error:n};const r=t.map(e=>e.id),{count:a,error:s}=await ny.from("chat_messages").select("*",{count:"exact",head:!0}).in("conversation_id",r).eq("sender_type","admin").eq("is_read",!1);return s?(gd(0,s),{count:0,error:s}):{count:a||0,error:null}}catch(t){return gd(0,t),{count:0,error:t}}},async getAdminUnreadCount(){try{const{count:e,error:t}=await ny.from("chat_messages").select("*",{count:"exact",head:!0}).eq("sender_type","user").eq("is_read",!1);return t?(gd(0,t),{count:0,error:t}):{count:e||0,error:null}}catch(e){return gd(0,e),{count:0,error:e}}},async closeConversation(e,t){try{const{data:n,error:r}=await ny.from("chat_conversations").update({status:"closed",closed_at:(new Date).toISOString(),closed_by:t}).eq("id",e).select().single();return r?(gd(0,r),{data:null,error:r}):{data:n,error:null}}catch(n){return gd(0,n),{data:null,error:n}}},async reopenConversation(e){try{const{data:t,error:n}=await ny.from("chat_conversations").update({status:"open",closed_at:null,closed_by:null}).eq("id",e).select().single();return n?(gd(0,n),{data:null,error:n}):{data:t,error:null}}catch(t){return gd(0,t),{data:null,error:t}}},subscribeToMessages:(e,t)=>ny.channel(`chat_messages:${e}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"chat_messages",filter:`conversation_id=eq.${e}`},e=>{t(e.new)}).subscribe(),subscribeToConversations:e=>ny.channel("chat_conversations").on("postgres_changes",{event:"*",schema:"public",table:"chat_conversations"},t=>{e(t)}).subscribe(),subscribeToAllMessages:e=>ny.channel("all_chat_messages").on("postgres_changes",{event:"INSERT",schema:"public",table:"chat_messages"},t=>{e(t.new)}).subscribe(),unsubscribe(e){e&&ny.removeChannel(e)},async sendMessageWithAI(e,t,n){try{const{data:a,error:s}=await this.sendMessage(e,t,n,"user");if(s)return{userMessage:null,aiMessage:null,error:s,escalated:!1};const{data:i}=await this.getMessages(e);let o;if("AIzaSyDeHmlwvIvw3764l_Cftv9kYWDUbHbH02A"){if(o=await eb(e,t,n,i||[]),o.success){const{data:t,error:n}=await this.saveAIResponse(e,o.response,o.confidence);return o.shouldEscalate&&(await this.escalateToAdmin(e),o.confidence),{userMessage:a,aiMessage:t,error:n,escalated:o.shouldEscalate,confidence:o.confidence}}o.error}try{const r=await nb.sendMessageAndGetAIResponse(e,n,t);if(r.success&&r.message){const t=nb.shouldEscalateToHuman(n);return t&&await this.escalateToAdmin(e),{userMessage:a,aiMessage:r.message,error:null,escalated:t,confidence:.8}}throw new Error("Local AI service returned no message")}catch(r){return gd(0,r),await this.escalateToAdmin(e),{userMessage:a,aiMessage:null,error:r,escalated:!0}}}catch(a){return gd(0,a),{userMessage:null,aiMessage:null,error:a,escalated:!1}}},async saveAIResponse(e,t,n){try{const{data:r}=await ny.from("chat_conversations").select("user_id").eq("id",e).single(),{data:a,error:s}=await ny.from("chat_messages").insert({conversation_id:e,sender_id:null==r?void 0:r.user_id,sender_type:"ai",content:t.trim(),is_read:!0,ai_confidence:n}).select().single();return s?(gd(0,s),{data:null,error:s}):{data:a,error:null}}catch(r){return gd(0,r),{data:null,error:r}}},async escalateToAdmin(e){try{const{data:t,error:n}=await ny.from("chat_conversations").update({is_ai_handled:!1,escalated_to_admin:!0,escalated_at:(new Date).toISOString()}).eq("id",e).select().single();return n?(gd(0,n),{data:null,error:n}):{data:t,error:null}}catch(t){return gd(0,t),{data:null,error:t}}},async isAIHandled(e){try{const{data:t,error:n}=await ny.from("chat_conversations").select("is_ai_handled, escalated_to_admin").eq("id",e).single();return n?{isAIHandled:!0,escalated:!1,error:n}:{isAIHandled:(null==t?void 0:t.is_ai_handled)??!0,escalated:(null==t?void 0:t.escalated_to_admin)??!1,error:null}}catch(t){return gd(0,t),{isAIHandled:!0,escalated:!1,error:t}}},async getEscalatedConversations(){try{const{data:e,error:t}=await ny.from("chat_conversations").select("*").eq("escalated_to_admin",!0).eq("status","open").order("escalated_at",{ascending:!1});return t?(gd(0,t),{data:null,error:t}):{data:e,error:null}}catch(e){return gd(0,e),{data:null,error:e}}},async takeOverFromAI(e,t){try{const{data:n,error:r}=await ny.from("chat_conversations").update({is_ai_handled:!1,escalated_to_admin:!0,escalated_at:(new Date).toISOString()}).eq("id",e).select().single();return r?(gd(0,r),{data:null,error:r}):(await this.sendMessage(e,t,"A support agent has joined the conversation. How can I help you?","admin"),{data:n,error:null})}catch(n){return gd(0,n),{data:null,error:n}}}},ab="_chatWidget_f5m9r_5",sb="_chatBackdrop_f5m9r_14",ib="_floatingButtonContainer_f5m9r_43",ob="_hidden_f5m9r_51",lb="_floatingButton_f5m9r_43",ub="_dragging_f5m9r_74",cb="_minimizeButton_f5m9r_100",db="_slideInButton_f5m9r_135",hb="_unreadBadge_f5m9r_194",fb="_chatWindow_f5m9r_223",pb="_open_f5m9r_244",mb="_chatHeader_f5m9r_251",gb="_headerInfo_f5m9r_265",yb="_headerAvatar_f5m9r_271",vb="_headerTitle_f5m9r_281",bb="_headerStatus_f5m9r_287",wb="_statusDot_f5m9r_295",_b="_closeButton_f5m9r_312",Sb="_closeButtonText_f5m9r_338",kb="_errorBanner_f5m9r_361",Eb="_messagesContainer_f5m9r_387",Tb="_loadingState_f5m9r_408",Cb="_spinner_f5m9r_418",xb="_welcomeMessage_f5m9r_434",Ob="_welcomeIcon_f5m9r_444",Ib="_quickActions_f5m9r_464",Pb="_quickAction_f5m9r_464",jb="_messagesList_f5m9r_491",Rb="_dateDivider_f5m9r_500",Ab="_message_f5m9r_387",Nb="_userMessage_f5m9r_524",Db="_adminMessage_f5m9r_532",$b="_aiMessage_f5m9r_539",Lb="_messageBubble_f5m9r_546",Ub="_senderLabel_f5m9r_578",Mb="_messageTime_f5m9r_594",Bb="_typingIndicator_f5m9r_607",zb="_humanSupportBar_f5m9r_646",Fb="_humanSupportButton_f5m9r_654",qb="_aiStatus_f5m9r_681",Hb="_humanStatus_f5m9r_685",Wb="_inputContainer_f5m9r_690",Vb="_messageInput_f5m9r_699",Kb="_sendButton_f5m9r_726",Jb="_sendingSpinner_f5m9r_755",Gb=()=>{var e;const{user:t,userProfile:n}=Ey(),[r,a]=F.useState(!1),[s,i]=F.useState(!0),[o,l]=F.useState({x:0,y:0}),[u,c]=F.useState(!1),[d,h]=F.useState({x:0,y:0}),[f,p]=F.useState([]),[m,g]=F.useState(""),[y,v]=F.useState(null),[b,w]=F.useState(!1),[_,S]=F.useState(!1),[k,E]=F.useState(!1),[T,C]=F.useState(!1),[x,O]=F.useState(0),[I,P]=F.useState(null),j=F.useRef(null),R=F.useRef(null),A=F.useRef(null),N=F.useRef(null),D=F.useRef(null),$=F.useRef(null),L=F.useRef(null),U=F.useRef(0),M=F.useRef(0),[B,z]=F.useState(0),q=F.useCallback(()=>{var e;null==(e=j.current)||e.scrollIntoView({behavior:"smooth"})},[]),H=F.useCallback(async()=>{var e;if(fetch("http://127.0.0.1:7244/ingest/c4c33fba-1ee4-4b2f-aa1a-ed506c7c702f",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({location:"LiveChatWidget.jsx:28",message:"loadChat called",data:{hasUser:!!t,userId:null==t?void 0:t.id,userIdType:typeof(null==t?void 0:t.id),isOpen:r},timestamp:Date.now(),sessionId:"debug-session",runId:"run1",hypothesisId:"A"})}).catch(()=>{}),null==t?void 0:t.id){w(!0),P(null);try{fetch("http://127.0.0.1:7244/ingest/c4c33fba-1ee4-4b2f-aa1a-ed506c7c702f",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({location:"LiveChatWidget.jsx:40",message:"Calling getOrCreateConversation",data:{userId:t.id,userIdType:typeof t.id},timestamp:Date.now(),sessionId:"debug-session",runId:"run1",hypothesisId:"A"})}).catch(()=>{});const{data:n,error:a}=await rb.getOrCreateConversation(t.id);if(fetch("http://127.0.0.1:7244/ingest/c4c33fba-1ee4-4b2f-aa1a-ed506c7c702f",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({location:"LiveChatWidget.jsx:44",message:"getOrCreateConversation result",data:{hasConv:!!n,convId:null==n?void 0:n.id,hasError:!!a,errorCode:null==a?void 0:a.code,errorMessage:null==a?void 0:a.message,errorDetails:null==a?void 0:a.details},timestamp:Date.now(),sessionId:"debug-session",runId:"run1",hypothesisId:"C"})}).catch(()=>{}),a)return void P(`Failed to load chat: ${a.message||"Unknown error"}`);if(!n)return void P("Failed to create conversation. Please try again.");v(n),C((null==n?void 0:n.escalated_to_admin)||!1);const{data:s,error:i}=await rb.getMessages(n.id);p(s||[]),fetch("http://127.0.0.1:7244/ingest/c4c33fba-1ee4-4b2f-aa1a-ed506c7c702f",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({location:"LiveChatWidget.jsx:75",message:"Messages loaded and set",data:{msgCount:(null==s?void 0:s.length)||0,msgsSample:null==(e=null==s?void 0:s.slice(0,3))?void 0:e.map(e=>{var t;return{id:null==e?void 0:e.id,content:null==(t=null==e?void 0:e.content)?void 0:t.substring(0,50),sender_type:null==e?void 0:e.sender_type,created_at:null==e?void 0:e.created_at,hasContent:!!(null==e?void 0:e.content),contentType:typeof(null==e?void 0:e.content)}})},timestamp:Date.now(),sessionId:"debug-session",runId:"run1",hypothesisId:"H"})}).catch(()=>{}),r&&(null==n?void 0:n.id)&&(await rb.markMessagesAsRead(n.id,"user"),O(0))}catch(n){P("An unexpected error occurred. Please try again.")}finally{w(!1)}}else fetch("http://127.0.0.1:7244/ingest/c4c33fba-1ee4-4b2f-aa1a-ed506c7c702f",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({location:"LiveChatWidget.jsx:31",message:"loadChat early return - no user",data:{},timestamp:Date.now(),sessionId:"debug-session",runId:"run1",hypothesisId:"B"})}).catch(()=>{})},[null==t?void 0:t.id,r]),W=F.useCallback(async()=>{if(!(null==t?void 0:t.id))return;const{count:e}=await rb.getUnreadCount(t.id);O(e)},[null==t?void 0:t.id]);F.useEffect(()=>{if(null==y?void 0:y.id)return A.current=rb.subscribeToMessages(y.id,e=>{p(t=>t.some(t=>t.id===e.id)?t:[...t,e]),"ai"===e.sender_type&&E(!1),!r||"admin"!==e.sender_type&&"ai"!==e.sender_type?r||"admin"!==e.sender_type&&"ai"!==e.sender_type||O(e=>e+1):rb.markMessagesAsRead(y.id,"user"),q()}),()=>{A.current&&rb.unsubscribe(A.current)}},[null==y?void 0:y.id,r,q]),F.useEffect(()=>{(null==t?void 0:t.id)&&W()},[null==t?void 0:t.id,W]),F.useEffect(()=>{r&&(null==t?void 0:t.id)&&H()},[r,null==t?void 0:t.id,H]),F.useEffect(()=>{q()},[f,q]),F.useEffect(()=>{var e;if(r&&f.length>0&&N.current){const t=N.current,n=t.children.length,r=Array.from(t.children).map((e,t)=>{var n,r;return{index:t,tagName:e.tagName,className:e.className,textContent:null==(n=e.textContent)?void 0:n.substring(0,50),childCount:e.children.length,innerHTML:null==(r=e.innerHTML)?void 0:r.substring(0,100)}});fetch("http://127.0.0.1:7244/ingest/c4c33fba-1ee4-4b2f-aa1a-ed506c7c702f",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({location:"LiveChatWidget.jsx:149",message:"DOM structure check",data:{messagesListExists:!!t,childCount:n,childTypes:r,groupedMessagesCount:J(f).length,messagesListTextContent:null==(e=t.textContent)?void 0:e.substring(0,100)},timestamp:Date.now(),sessionId:"debug-session",runId:"run2",hypothesisId:"L"})}).catch(()=>{})}},[r,f]),F.useEffect(()=>{r&&setTimeout(()=>{var e;return null==(e=R.current)?void 0:e.focus()},100)},[r]);const V=()=>{a(!r),P(null),r||O(0)};F.useEffect(()=>{const e=e=>{if(!u||!D.current||!$.current)return;const t=$.current.getBoundingClientRect(),n=e.clientX-t.left,r=e.clientY-t.top,a=n-d.x-30,s=r-d.y-30,i=Math.max(0,t.width-60),o=Math.max(0,t.height-60);l({x:Math.max(0,Math.min(i,a)),y:Math.max(0,Math.min(o,s))})},t=()=>{c(!1)};if(u)return document.addEventListener("mousemove",e),document.addEventListener("mouseup",t),()=>{document.removeEventListener("mousemove",e),document.removeEventListener("mouseup",t)}},[u,d]);const K=e=>new Date(e).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}),J=e=>{var t;fetch("http://127.0.0.1:7244/ingest/c4c33fba-1ee4-4b2f-aa1a-ed506c7c702f",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({location:"LiveChatWidget.jsx:319",message:"groupMessagesByDate called",data:{msgCount:null==e?void 0:e.length,msgsSample:null==(t=null==e?void 0:e.slice(0,2))?void 0:t.map(e=>{var t;return{id:null==e?void 0:e.id,content:null==(t=null==e?void 0:e.content)?void 0:t.substring(0,50),sender_type:null==e?void 0:e.sender_type,created_at:null==e?void 0:e.created_at}})},timestamp:Date.now(),sessionId:"debug-session",runId:"run1",hypothesisId:"A"})}).catch(()=>{});const n=[];let r=null;return e.forEach(e=>{var t,a;fetch("http://127.0.0.1:7244/ingest/c4c33fba-1ee4-4b2f-aa1a-ed506c7c702f",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({location:"LiveChatWidget.jsx:325",message:"Processing message in groupMessagesByDate",data:{msgId:null==e?void 0:e.id,hasContent:!!(null==e?void 0:e.content),contentLength:null==(t=null==e?void 0:e.content)?void 0:t.length,contentPreview:null==(a=null==e?void 0:e.content)?void 0:a.substring(0,30),hasCreatedAt:!!(null==e?void 0:e.created_at),createdAt:null==e?void 0:e.created_at,senderType:null==e?void 0:e.sender_type,msgKeys:Object.keys(e||{})},timestamp:Date.now(),sessionId:"debug-session",runId:"run1",hypothesisId:"B"})}).catch(()=>{});const s=(e=>{const t=new Date(e),n=new Date,r=new Date(n);return r.setDate(r.getDate()-1),t.toDateString()===n.toDateString()?"Today":t.toDateString()===r.toDateString()?"Yesterday":t.toLocaleDateString("en-US",{month:"short",day:"numeric"})})(e.created_at);fetch("http://127.0.0.1:7244/ingest/c4c33fba-1ee4-4b2f-aa1a-ed506c7c702f",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({location:"LiveChatWidget.jsx:328",message:"Date comparison in grouping",data:{msgDate:s,currentDate:r,willAddDateDivider:s!==r},timestamp:Date.now(),sessionId:"debug-session",runId:"run1",hypothesisId:"C"})}).catch(()=>{}),s!==r&&(r=s,n.push({type:"date",date:s}));const i={type:"message",...e};fetch("http://127.0.0.1:7244/ingest/c4c33fba-1ee4-4b2f-aa1a-ed506c7c702f",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({location:"LiveChatWidget.jsx:334",message:"Adding message to groups",data:{groupType:i.type,hasId:!!i.id,hasContent:!!i.content,hasSenderType:!!i.sender_type,groupKeys:Object.keys(i)},timestamp:Date.now(),sessionId:"debug-session",runId:"run1",hypothesisId:"D"})}).catch(()=>{}),n.push(i)}),fetch("http://127.0.0.1:7244/ingest/c4c33fba-1ee4-4b2f-aa1a-ed506c7c702f",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({location:"LiveChatWidget.jsx:339",message:"groupMessagesByDate result",data:{totalGroups:n.length,dateGroups:n.filter(e=>"date"===e.type).length,messageGroups:n.filter(e=>"message"===e.type).length,groupsSample:n.slice(0,3).map(e=>{var t;return{type:e.type,date:e.date,id:e.id,content:(null==(t=e.content)?void 0:t.substring(0,30))||"no content"}})},timestamp:Date.now(),sessionId:"debug-session",runId:"run1",hypothesisId:"E"})}).catch(()=>{}),n},G=e=>{switch(e){case"ai":return"AI Assistant";case"admin":return"Support Agent";default:return null}};if(!t)return null;const Y=J(f);fetch("http://127.0.0.1:7244/ingest/c4c33fba-1ee4-4b2f-aa1a-ed506c7c702f",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({location:"LiveChatWidget.jsx:350",message:"Before render - messages state",data:{messagesCount:f.length,messagesSample:f.slice(0,2).map(e=>{var t;return{id:null==e?void 0:e.id,content:null==(t=null==e?void 0:e.content)?void 0:t.substring(0,50),sender_type:null==e?void 0:e.sender_type}}),groupedCount:Y.length,isOpen:r,loading:b},timestamp:Date.now(),sessionId:"debug-session",runId:"run1",hypothesisId:"F"})}).catch(()=>{});const Q=!m.trim()||_||b||k;return X.jsxs("div",{ref:$,className:ab,children:[r&&X.jsx("div",{className:sb,onClick:V,onTouchEnd:e=>{e.preventDefault(),V()},"aria-hidden":"true"}),!s&&!r&&X.jsx("button",{className:db,onClick:()=>{i(!0)},"aria-label":"Show chat",children:X.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:X.jsx("path",{d:"M12 2a2 2 0 0 1 2 2c0 .74-.4 1.39-1 1.73V7h1a7 7 0 0 1 7 7h1a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1h-1v1a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-1H2a1 1 0 0 1-1-1v-3a1 1 0 0 1 1-1h1a7 7 0 0 1 7-7h1V5.73c-.6-.34-1-.99-1-1.73a2 2 0 0 1 2-2z"})})}),X.jsxs("div",{ref:L,className:`${fb} ${r?pb:""}`,onClick:e=>e.stopPropagation(),onTouchStart:e=>{U.current=e.touches[0].clientY,M.current=Date.now()},onTouchMove:e=>{const t=e.touches[0].clientY-U.current;t>0&&z(Math.min(t,150))},onTouchEnd:e=>{e.stopPropagation();const t=e.changedTouches[0].clientY-U.current,n=Date.now()-M.current;t>100||t>50&&n<300?(z(0),V()):z(0)},style:B>0?{transform:`translateY(${B}px)`}:void 0,children:[X.jsxs("div",{className:mb,children:[X.jsxs("div",{className:gb,children:[X.jsx("div",{className:yb,children:X.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[X.jsx("path",{d:"M12 2a2 2 0 0 1 2 2c0 .74-.4 1.39-1 1.73V7h1a7 7 0 0 1 7 7h1a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1h-1v1a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-1H2a1 1 0 0 1-1-1v-3a1 1 0 0 1 1-1h1a7 7 0 0 1 7-7h1V5.73c-.6-.34-1-.99-1-1.73a2 2 0 0 1 2-2z"}),X.jsx("circle",{cx:"8.5",cy:"14.5",r:"1.5"}),X.jsx("circle",{cx:"15.5",cy:"14.5",r:"1.5"})]})}),X.jsxs("div",{children:[X.jsx("h3",{className:vb,children:T?"GoGoBus Support":"GoGoBus AI Support"}),X.jsxs("span",{className:bb,children:[X.jsx("span",{className:`${wb} ${T?Hb:qb}`}),T?"Connected to support team":k?"AI is typing...":"AI-powered instant support"]})]})]}),X.jsxs("button",{className:_b,onClick:e=>{e.preventDefault(),e.stopPropagation(),V()},onTouchStart:e=>{e.stopPropagation()},onTouchEnd:e=>{e.preventDefault(),e.stopPropagation(),V()},onMouseDown:e=>{e.stopPropagation()},"aria-label":"Close chat",type:"button",children:[X.jsx("span",{className:Sb,children:"Close"}),X.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:X.jsx("path",{d:"M18 6L6 18M6 6l12 12"})})]})]}),I&&X.jsxs("div",{className:kb,children:[X.jsx("span",{children:I}),X.jsx("button",{onClick:()=>P(null),"aria-label":"Dismiss error",children:""})]}),X.jsx("div",{className:Eb,children:b?X.jsxs("div",{className:Tb,children:[X.jsx("div",{className:Cb}),X.jsx("span",{children:"Loading messages..."})]}):0===f.length?X.jsxs("div",{className:xb,children:[X.jsx("div",{className:Ob,children:""}),X.jsxs("h4",{children:["Hi ",(null==(e=null==n?void 0:n.full_name)?void 0:e.split(" ")[0])||"there","!"]}),X.jsx("p",{children:"I'm your AI assistant. Ask me anything about bookings, routes, or tickets. I'll help you right away!"}),X.jsxs("div",{className:Ib,children:[X.jsx("button",{className:Pb,onClick:()=>g("How do I book a ticket?"),children:"How to book?"}),X.jsx("button",{className:Pb,onClick:()=>g("What routes are available?"),children:"View routes"}),X.jsx("button",{className:Pb,onClick:()=>g("Help with my booking"),children:"My bookings"})]})]}):X.jsxs("div",{ref:N,className:jb,children:[Y.map((e,t)=>{var n,r;if(fetch("http://127.0.0.1:7244/ingest/c4c33fba-1ee4-4b2f-aa1a-ed506c7c702f",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({location:"LiveChatWidget.jsx:432",message:"Rendering grouped item",data:{index:t,itemType:e.type,itemId:e.id,hasContent:!!e.content,contentPreview:null==(n=e.content)?void 0:n.substring(0,30),senderType:e.sender_type,itemKeys:Object.keys(e||{})},timestamp:Date.now(),sessionId:"debug-session",runId:"run2",hypothesisId:"I"})}).catch(()=>{}),"date"===e.type)return fetch("http://127.0.0.1:7244/ingest/c4c33fba-1ee4-4b2f-aa1a-ed506c7c702f",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({location:"LiveChatWidget.jsx:458",message:"Rendering date divider",data:{index:t,date:e.date,dateDividerClass:Rb},timestamp:Date.now(),sessionId:"debug-session",runId:"run2",hypothesisId:"J"})}).catch(()=>{}),X.jsx("div",{className:Rb,children:X.jsx("span",{children:e.date})},`date-${t}`);const a=`${Ab} ${"user"===e.sender_type?Nb:"ai"===e.sender_type?$b:Db}`;return fetch("http://127.0.0.1:7244/ingest/c4c33fba-1ee4-4b2f-aa1a-ed506c7c702f",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({location:"LiveChatWidget.jsx:470",message:"Rendering message",data:{index:t,itemId:e.id,senderType:e.sender_type,messageClasses:a,hasContent:!!e.content,contentLength:null==(r=e.content)?void 0:r.length,createdAt:e.created_at,formattedTime:K(e.created_at)},timestamp:Date.now(),sessionId:"debug-session",runId:"run2",hypothesisId:"K"})}).catch(()=>{}),X.jsxs("div",{className:a,children:["user"!==e.sender_type&&X.jsxs("span",{className:Ub,children:["ai"===e.sender_type?"":""," ",G(e.sender_type)]}),X.jsxs("div",{className:Lb,children:[X.jsx("p",{children:e.content}),X.jsx("span",{className:Mb,children:K(e.created_at)})]})]},e.id)}),k&&X.jsxs("div",{className:`${Ab} ${$b}`,children:[X.jsx("span",{className:Ub,children:" AI Assistant"}),X.jsx("div",{className:Lb,children:X.jsxs("div",{className:Bb,children:[X.jsx("span",{}),X.jsx("span",{}),X.jsx("span",{})]})})]}),X.jsx("div",{ref:j})]})}),!T&&f.length>0&&X.jsx("div",{className:zb,children:X.jsxs("button",{className:Fb,onClick:async()=>{if(null==y?void 0:y.id){S(!0);try{await rb.escalateToAdmin(y.id),C(!0),p(e=>[...e,{id:`system-${Date.now()}`,sender_type:"ai",content:"I've connected you with our support team. A human agent will respond shortly.",created_at:(new Date).toISOString()}])}catch(e){P("Failed to connect to support. Please try again.")}finally{S(!1)}}},disabled:_,children:[X.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[X.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),X.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),"Talk to human agent"]})}),X.jsxs("form",{className:Wb,onSubmit:async e=>{if(e.preventDefault(),!m.trim()||_)return;if(!(null==t?void 0:t.id))return void alert("Please log in to send messages.");P(null);let n=y;if(!(null==n?void 0:n.id)){w(!0);try{const{data:e,error:r}=await rb.getOrCreateConversation(t.id);if(r||!e){const e=(null==r?void 0:r.message)||"Unknown error";return P(`Unable to start chat: ${e}`),void w(!1)}v(e),n=e}catch(a){return P("Unable to start chat. Please try again."),void w(!1)}finally{w(!1)}}if(!(null==n?void 0:n.id))return void P("Unable to send message. Please refresh and try again.");const r=m.trim();g(""),S(!0),E(!0);try{const e=await rb.sendMessageWithAI(n.id,t.id,r);if(e.error&&!e.userMessage){const{error:e}=await rb.sendMessage(n.id,t.id,r,"user");e&&(g(r),P("Failed to send message. Please try again."))}e.escalated&&C(!0)}catch(a){try{await rb.sendMessage(n.id,t.id,r,"user")}catch(s){g(r),P("Failed to send message. Please try again.")}}finally{S(!1),E(!1)}},children:[X.jsx("input",{ref:R,type:"text",className:Vb,placeholder:b?"Loading chat...":k?"AI is thinking...":"Type your message...",value:m,onChange:e=>g(e.target.value),disabled:_||b||k}),X.jsx("button",{type:"submit",className:Kb,disabled:Q,"aria-label":"Send message",children:_||k?X.jsx("div",{className:Jb}):X.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:X.jsx("path",{d:"M22 2L11 13M22 2l-7 20-4-9-9-4 20-7z"})})})]})]}),s&&X.jsxs("div",{ref:D,className:`${ib} ${r?ob:""}`,style:{transform:0!==o.x||0!==o.y?`translate(${o.x}px, ${o.y}px)`:void 0},children:[X.jsxs("button",{className:`${lb} ${u?ub:""}`,onClick:e=>{u||V()},onMouseDown:e=>{var t,n;if(e.target.closest(`.${cb}`))return;if(0!==e.button)return;e.preventDefault(),c(!0);const r=null==(t=D.current)?void 0:t.getBoundingClientRect(),a=null==(n=$.current)?void 0:n.getBoundingClientRect();r&&a&&h({x:e.clientX-(r.left+r.width/2),y:e.clientY-(r.top+r.height/2)})},"aria-label":"Open chat",children:[X.jsx("svg",{width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:X.jsx("path",{d:"M12 2a2 2 0 0 1 2 2c0 .74-.4 1.39-1 1.73V7h1a7 7 0 0 1 7 7h1a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1h-1v1a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-1H2a1 1 0 0 1-1-1v-3a1 1 0 0 1 1-1h1a7 7 0 0 1 7-7h1V5.73c-.6-.34-1-.99-1-1.73a2 2 0 0 1 2-2z"})}),x>0&&X.jsx("span",{className:hb,children:x>9?"9+":x})]}),X.jsx("button",{className:cb,onClick:e=>{e.stopPropagation(),i(!1)},"aria-label":"Minimize chat",title:"Minimize",children:X.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:X.jsx("path",{d:"M18 6L6 18M6 6l12 12"})})})]})]})},Yb="_appLayout_11a0k_1",Qb=["/","/login","/signup","/get-started","/onboarding","/otp-verification","/check-email","/become-partner","/complete-profile"],Xb=({children:e})=>{fetch("http://127.0.0.1:7244/ingest/c4c33fba-1ee4-4b2f-aa1a-ed506c7c702f",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({location:"AppLayout.jsx:20",message:"AppLayout render start",data:{hasChildren:!!e,childrenType:typeof e,childrenIsArray:Array.isArray(e)},timestamp:Date.now(),sessionId:"debug-session",runId:"run1",hypothesisId:"A"})}).catch(()=>{});const{user:t,loading:n}=Ey();fetch("http://127.0.0.1:7244/ingest/c4c33fba-1ee4-4b2f-aa1a-ed506c7c702f",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({location:"AppLayout.jsx:23",message:"useAuth result",data:{hasUser:!!t,userId:null==t?void 0:t.id,userEmail:null==t?void 0:t.email,loading:n,userType:typeof t},timestamp:Date.now(),sessionId:"debug-session",runId:"run1",hypothesisId:"B"})}).catch(()=>{});const r=_h();fetch("http://127.0.0.1:7244/ingest/c4c33fba-1ee4-4b2f-aa1a-ed506c7c702f",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({location:"AppLayout.jsx:26",message:"useLocation result",data:{pathname:null==r?void 0:r.pathname,hasLocation:!!r,locationType:typeof r},timestamp:Date.now(),sessionId:"debug-session",runId:"run1",hypothesisId:"C"})}).catch(()=>{});const a=r.pathname.startsWith("/admin"),s=Qb.includes(r.pathname)||r.pathname.startsWith("/onboarding"),i=t&&!n&&!a&&!s;return fetch("http://127.0.0.1:7244/ingest/c4c33fba-1ee4-4b2f-aa1a-ed506c7c702f",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({location:"AppLayout.jsx:33",message:"showChatWidget evaluation",data:{isAdminPage:a,isHiddenPage:s,pathname:null==r?void 0:r.pathname,hasUser:!!t,loading:n,showChatWidget:i,breakdown:{userExists:!!t,notLoading:!n,notAdmin:!a,notHidden:!s}},timestamp:Date.now(),sessionId:"debug-session",runId:"run1",hypothesisId:"D"})}).catch(()=>{}),fetch("http://127.0.0.1:7244/ingest/c4c33fba-1ee4-4b2f-aa1a-ed506c7c702f",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({location:"AppLayout.jsx:35",message:"Before render return",data:{hasChildren:!!e,willRenderChatWidget:i,className:Yb},timestamp:Date.now(),sessionId:"debug-session",runId:"run1",hypothesisId:"E"})}).catch(()=>{}),F.useEffect(()=>{fetch("http://127.0.0.1:7244/ingest/c4c33fba-1ee4-4b2f-aa1a-ed506c7c702f",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({location:"AppLayout.jsx:38",message:"Rendering children",data:{hasChildren:!!e,childrenReactElement:!(!e||"object"!=typeof e||!e.$$typeof)},timestamp:Date.now(),sessionId:"debug-session",runId:"run1",hypothesisId:"F"})}).catch(()=>{})},[e]),F.useEffect(()=>{const e=()=>{var e,t;const n=document.querySelector(`.${Yb}`);if(n){const r=Array.from(n.children).filter(e=>!e.querySelector('[class*="LiveChatWidget"]')),a=r[0],s=a?window.getComputedStyle(a):null,i=(null==a?void 0:a.className)||"",o=(null==(e=null==a?void 0:a.textContent)?void 0:e.substring(0,100))||"",l=(null==a?void 0:a.querySelector('[class*="spinner"]'))||(null==a?void 0:a.querySelector('[class*="Spinner"]'));fetch("http://127.0.0.1:7244/ingest/c4c33fba-1ee4-4b2f-aa1a-ed506c7c702f",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({location:"AppLayout.jsx:45",message:"DOM check after render",data:{hasLayoutEl:!!n,childrenCount:null==(t=null==n?void 0:n.children)?void 0:t.length,nonChatChildrenCount:r.length,firstChildExists:!!a,firstChildTag:null==a?void 0:a.tagName,firstChildClasses:i,firstChildText:o,hasLoadingSpinner:!!l,firstChildDisplay:null==s?void 0:s.display,firstChildVisibility:null==s?void 0:s.visibility,firstChildOpacity:null==s?void 0:s.opacity,firstChildHeight:null==s?void 0:s.height,firstChildWidth:null==s?void 0:s.width,firstChildZIndex:null==s?void 0:s.zIndex,firstChildOverflow:null==s?void 0:s.overflow,firstChildMinHeight:null==s?void 0:s.minHeight},timestamp:Date.now(),sessionId:"debug-session",runId:"run1",hypothesisId:"G"})}).catch(()=>{})}},t=setTimeout(e,100),n=setTimeout(e,500);return()=>{clearTimeout(t),clearTimeout(n)}},[e,r.pathname]),X.jsxs("div",{className:Yb,children:[e,i&&X.jsx(Gb,{})]})},Zb={spinner:"_spinner_195yh_1",spinnerCircle:"_spinnerCircle_195yh_7",spin:"_spin_195yh_1",small:"_small_195yh_14",medium:"_medium_195yh_20",large:"_large_195yh_26"},ew=({size:e="medium",className:t=""})=>{const n=[Zb.spinner,Zb[e],t].filter(Boolean).join(" ");return X.jsx("div",{className:n,role:"status","aria-label":"Loading",children:X.jsx("div",{className:Zb.spinnerCircle})})},tw=({children:e})=>{const{user:t,loading:n}=Ey();return fetch("http://127.0.0.1:7244/ingest/c4c33fba-1ee4-4b2f-aa1a-ed506c7c702f",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({location:"ProtectedRoute.jsx:6",message:"ProtectedRoute render",data:{hasUser:!!t,userId:null==t?void 0:t.id,loading:n,hasChildren:!!e,willShowLoading:n,willRedirect:!n&&!t,willRenderChildren:!n&&!!t},timestamp:Date.now(),sessionId:"debug-session",runId:"run1",hypothesisId:"I"})}).catch(()=>{}),n?(fetch("http://127.0.0.1:7244/ingest/c4c33fba-1ee4-4b2f-aa1a-ed506c7c702f",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({location:"ProtectedRoute.jsx:11",message:"ProtectedRoute showing loading",data:{},timestamp:Date.now(),sessionId:"debug-session",runId:"run1",hypothesisId:"I"})}).catch(()=>{}),X.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100vh"},children:X.jsx(ew,{size:"large"})})):t?(fetch("http://127.0.0.1:7244/ingest/c4c33fba-1ee4-4b2f-aa1a-ed506c7c702f",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({location:"ProtectedRoute.jsx:23",message:"ProtectedRoute rendering children",data:{hasChildren:!!e},timestamp:Date.now(),sessionId:"debug-session",runId:"run1",hypothesisId:"I"})}).catch(()=>{}),e):(fetch("http://127.0.0.1:7244/ingest/c4c33fba-1ee4-4b2f-aa1a-ed506c7c702f",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({location:"ProtectedRoute.jsx:19",message:"ProtectedRoute redirecting to login",data:{},timestamp:Date.now(),sessionId:"debug-session",runId:"run1",hypothesisId:"I"})}).catch(()=>{}),X.jsx(Dh,{to:"/login",replace:!0}))},nw=({children:e})=>{const{user:t,userProfile:n,isAdmin:r,loading:a}=Ey(),[s,i]=q.useState(!1);return q.useEffect(()=>{},[t,n,r,a,s]),q.useEffect(()=>{if(t&&!a){const e=setTimeout(()=>{null===n&&i(!0)},3e3);return()=>clearTimeout(e)}i(!1)},[t,a,n]),a?X.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100vh"},children:X.jsx(ew,{size:"large"})}):t?null===n&&t&&!s?X.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100vh",flexDirection:"column",gap:"16px"},children:[X.jsx(ew,{size:"large"}),X.jsx("p",{style:{color:"#666",fontSize:"14px"},children:"Loading admin profile..."})]}):s&&null===n?X.jsx(Dh,{to:"/home",replace:!0}):n&&"admin"!==n.role?(md(0,n.role),X.jsx(Dh,{to:"/home",replace:!0})):r?e:(md(0,n),X.jsx(Dh,{to:"/home",replace:!0})):X.jsx(Dh,{to:"/login",replace:!0})},rw="_cookieBanner_1cjux_1",aw="_cookieContent_1cjux_23",sw="_cookieIcon_1cjux_32",iw="_cookieText_1cjux_38",ow="_cookieTitle_1cjux_43",lw="_cookieDescription_1cjux_50",uw="_cookieLink_1cjux_57",cw="_cookieActions_1cjux_67",dw="_rejectButton_1cjux_74",hw="_necessaryButton_1cjux_75",fw="_acceptButton_1cjux_76",pw=()=>{const[e,t]=F.useState(!1),[n,r]=F.useState(!1);F.useEffect(()=>{const e=localStorage.getItem("cookie_consent");if(!e){const e=setTimeout(()=>{t(!0)},1e3);return()=>clearTimeout(e)}"accepted"!==e&&"all"!==e||r(!0)},[]);return!e||n?null:X.jsx("div",{className:rw,children:X.jsxs("div",{className:aw,children:[X.jsx("div",{className:sw,children:X.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:X.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12C2 17.52 6.48 22 12 22C17.52 22 22 17.52 22 12C22 6.48 17.52 2 12 2ZM13 17H11V15H13V17ZM13 13H11V7H13V13Z",fill:"currentColor"})})}),X.jsxs("div",{className:iw,children:[X.jsx("h3",{className:ow,children:"Cookie Consent"}),X.jsxs("p",{className:lw,children:['We use cookies to enhance your experience, analyze site usage, and assist in marketing efforts. By clicking "Accept All", you consent to our use of cookies. You can also choose to accept only necessary cookies. Learn more in our'," ",X.jsx("a",{href:"/privacy",target:"_blank",rel:"noopener noreferrer",className:uw,children:"Privacy Policy"}),"."]})]}),X.jsxs("div",{className:cw,children:[X.jsx("button",{onClick:()=>{localStorage.setItem("cookie_consent","rejected"),r(!0),t(!1)},className:dw,"aria-label":"Reject non-essential cookies",children:"Reject"}),X.jsx("button",{onClick:()=>{localStorage.setItem("cookie_consent","necessary"),r(!0),t(!1)},className:hw,"aria-label":"Accept only necessary cookies",children:"Necessary Only"}),X.jsx("button",{onClick:()=>{localStorage.setItem("cookie_consent","all"),r(!0),t(!1)},className:fw,"aria-label":"Accept all cookies",children:"Accept All"})]})]})})},mw=()=>{if("undefined"==typeof window||!window.performance)return null;const e=window.performance.timing;return{pageLoadTime:e.loadEventEnd-e.navigationStart,domContentLoaded:e.domContentLoadedEventEnd-e.navigationStart,firstByte:e.responseStart-e.navigationStart,dns:e.domainLookupEnd-e.domainLookupStart,tcp:e.connectEnd-e.connectStart,request:e.responseStart-e.requestStart,response:e.responseEnd-e.responseStart,domProcessing:e.domComplete-e.domLoading,domInteractive:e.domInteractive-e.domLoading}},gw=()=>{(()=>{if("undefined"!=typeof window&&"PerformanceObserver"in window){try{new PerformanceObserver(e=>{const t=e.getEntries(),n=t[t.length-1];n.renderTime||n.loadTime,window.gtag&&window.gtag("event","web_vitals",{metric_name:"LCP",metric_value:Math.round(n.renderTime||n.loadTime),metric_id:n.id})}).observe({entryTypes:["largest-contentful-paint"]})}catch(Jw){}try{new PerformanceObserver(e=>{e.getEntries().forEach(e=>{const t=e.processingStart-e.startTime;window.gtag&&window.gtag("event","web_vitals",{metric_name:"FID",metric_value:Math.round(t),metric_id:e.id})})}).observe({entryTypes:["first-input"]})}catch(Jw){}try{let e=0;new PerformanceObserver(t=>{t.getEntries().forEach(t=>{t.hadRecentInput||(e+=t.value)}),window.gtag&&window.gtag("event","web_vitals",{metric_name:"CLS",metric_value:Math.round(1e3*e)/1e3})}).observe({entryTypes:["layout-shift"]})}catch(Jw){}}})(),"undefined"!=typeof window&&window.performance&&window.addEventListener("load",()=>{const e=performance.getEntriesByType("resource");e.forEach(e=>{e.responseEnd,e.startTime;const t=e.initiatorType||"other";e.name.split("/").pop(),e.transferSize,"img"===t||"script"===t||"link"===t&&e.name.includes(".css")||"css"===t||e.name.includes(".woff")}),e.forEach(e=>{const t=e.responseEnd-e.startTime;t>3e3&&md(e.name,{loadTime:Math.round(t)})})}),"complete"===document.readyState?mw():window.addEventListener("load",()=>{const e=mw();e&&window.gtag&&window.gtag("event","page_load_time",{value:Math.round(e.pageLoadTime),metric_name:"Page Load Time"})})},yw=(e,t="Unknown")=>F.lazy(()=>Promise.resolve(e()).then(e=>{if(fetch("http://127.0.0.1:7244/ingest/c4c33fba-1ee4-4b2f-aa1a-ed506c7c702f",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({location:"App.jsx:25",message:"Lazy component loaded successfully",data:{componentName:t,hasDefault:!!(null==e?void 0:e.default),moduleKeys:e?Object.keys(e).join(","):"null"},timestamp:Date.now(),sessionId:"debug-session",runId:"post-fix",hypothesisId:"C"})}).catch(()=>{}),!e||!e.default){const n=`Component ${t} does not have a default export. Available exports: ${e?Object.keys(e).join(", "):"none"}`;return{default:()=>q.createElement("div",{style:{padding:"20px",textAlign:"center",color:"#dc2626"}},`Error: ${n}`)}}return e}).catch(e=>{fetch("http://127.0.0.1:7244/ingest/c4c33fba-1ee4-4b2f-aa1a-ed506c7c702f",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({location:"App.jsx:38",message:"Lazy component load error",data:{componentName:t,errorMessage:(null==e?void 0:e.message)||"Unknown error",errorName:null==e?void 0:e.name,errorType:typeof e},timestamp:Date.now(),sessionId:"debug-session",runId:"post-fix",hypothesisId:"C"})}).catch(()=>{});let n="Failed to load component";try{e&&"object"==typeof e?n=e.message||e.toString()||"Unknown error":e&&(n=String(e))}catch(Jw){n=`Failed to load component ${t}`}return{default:()=>q.createElement("div",{style:{padding:"20px",textAlign:"center",color:"#dc2626"}},`Failed to load component: ${t}`)}})),vw=yw(()=>hd(()=>import("./Splash-BX5zTE_j.js"),__vite__mapDeps([0,1])),"Splash"),bw=yw(()=>hd(()=>import("./OnboardingFlow-DLvwFxlm.js"),__vite__mapDeps([2,3,4,5])),"OnboardingFlow"),ww=yw(()=>hd(()=>import("./GetStarted-DYj5RXN5.js"),__vite__mapDeps([6,3,4,7])),"GetStarted"),_w=yw(()=>hd(()=>import("./Login-Tk6dsqbx.js"),__vite__mapDeps([8,3,4,9,10])),"Login"),Sw=yw(()=>hd(()=>import("./SignUp-B_xOdtx2.js"),__vite__mapDeps([11,3,4,9,10,12])),"SignUp"),kw=yw(()=>hd(()=>import("./OTPVerification-DM_OYab1.js"),__vite__mapDeps([13,3,4,14,15,9,10])),"OTPVerification"),Ew=yw(()=>hd(()=>import("./CheckEmail-CRhTtBfz.js"),__vite__mapDeps([16,3,4,9,10])),"CheckEmail"),Tw=yw(()=>hd(()=>import("./CompleteProfile-JbFLT0N0.js"),__vite__mapDeps([17,3,4,18,19,20])),"CompleteProfile"),Cw=yw(()=>hd(()=>import("./Home-D_KRin3q.js"),__vite__mapDeps([21,3,4,14,15,22])),"Home"),xw=yw(()=>hd(()=>import("./SearchResults-DTr-qLVq.js"),__vite__mapDeps([23,24])),"SearchResults"),Ow=yw(()=>hd(()=>import("./SeatSelection-D7DkY8bw.js"),__vite__mapDeps([25,26])),"SeatSelection"),Iw=yw(()=>hd(()=>import("./PassengerDetails-CvRVvhjo.js"),__vite__mapDeps([27,3,4,14,15,28,29,30])),"PassengerDetails"),Pw=yw(()=>hd(()=>import("./BookingSummary-Bhha2e77.js"),__vite__mapDeps([31,3,4,28,29,32])),"BookingSummary"),jw=yw(()=>hd(()=>import("./Payment-Dknwa44e.js"),__vite__mapDeps([33,34,35,36])),"Payment"),Rw=yw(()=>hd(()=>import("./PaymentConfirmation-DBNsYCN5.js"),__vite__mapDeps([37,34,35,38])),"PaymentConfirmation"),Aw=yw(()=>hd(()=>import("./BookingConfirmation-CvqlmfpR.js"),__vite__mapDeps([39,3,4,40,41,35,28,29])),"BookingConfirmation"),Nw=yw(()=>hd(()=>import("./MyTickets-BAMAr8B1.js"),__vite__mapDeps([42,43])),"MyTickets"),Dw=yw(()=>hd(()=>import("./TicketView-8XdcbdJf.js"),__vite__mapDeps([44,3,4,40,41,45,46,47])),"TicketView"),$w=yw(()=>hd(()=>import("./Tracking-O6rMIRcN.js"),__vite__mapDeps([48,45,46,49])),"Tracking"),Lw=yw(()=>hd(()=>import("./Profile-_i-WN252.js"),__vite__mapDeps([50,3,4,14,15,18,19,51])),"Profile"),Uw=yw(()=>hd(()=>import("./Help-B2-UFQGX.js"),__vite__mapDeps([52,53])),"Help"),Mw=yw(()=>hd(()=>import("./Notifications-C4Bzw6dM.js"),__vite__mapDeps([54,55])),"Notifications"),Bw=yw(()=>hd(()=>import("./BecomePartner-j48vJ3oB.js"),__vite__mapDeps([56,57])),"BecomePartner"),zw=yw(()=>hd(()=>import("./AdminDashboard-1G9hdBdo.js"),__vite__mapDeps([58,59,60])),"AdminDashboard"),Fw=yw(()=>hd(()=>import("./QRScanner-Drs8bwsc.js"),__vite__mapDeps([61,59,62])),"QRScanner"),qw=()=>(fetch("http://127.0.0.1:7244/ingest/c4c33fba-1ee4-4b2f-aa1a-ed506c7c702f",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({location:"App.jsx:PageLoader",message:"PageLoader (Suspense fallback) rendering",data:{hash:window.location.hash,pathname:window.location.pathname},timestamp:Date.now(),sessionId:"debug-session",runId:"run1",hypothesisId:"J"})}).catch(()=>{}),X.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100vh"},children:X.jsx(ew,{size:"large"})}));function Hw(){const e=_h();return F.useEffect(()=>{var t,n;t=e.pathname+e.search,window.gtag&&window.gtag("config",void 0,{page_path:t,page_title:n})},[e]),F.useEffect(()=>{const e=e=>{};return window.addEventListener("popstate",e),()=>window.removeEventListener("popstate",e)},[]),null}function Ww(){const e=_h(),{user:t,loading:n}=Ey();return F.useEffect(()=>{fetch("http://127.0.0.1:7244/ingest/c4c33fba-1ee4-4b2f-aa1a-ed506c7c702f",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({location:"App.jsx:RouteDebugger",message:"Route debug info",data:{pathname:e.pathname,hash:window.location.hash,hasUser:!!t,userId:null==t?void 0:t.id,loading:n,expectedRoute:"/"===e.pathname?"Splash":"/home"===e.pathname?"Home":"/login"===e.pathname?"Login":"Other"},timestamp:Date.now(),sessionId:"debug-session",runId:"run1",hypothesisId:"H"})}).catch(()=>{})},[e.pathname,t,n]),null}function Vw(){const e=window.location.hash;return e&&!e.startsWith("#/")&&(e.includes("access_token=")||e.includes("type=signup")||e.includes("type=email")||e.includes("type=recovery"))}function Kw(){fetch("http://127.0.0.1:7244/ingest/c4c33fba-1ee4-4b2f-aa1a-ed506c7c702f",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({location:"App.jsx:84",message:"App component rendering",data:{},timestamp:Date.now(),sessionId:"debug-session",runId:"run1",hypothesisId:"B"})}).catch(()=>{});const[e,t]=F.useState(()=>Vw());return F.useEffect(()=>{if(!Vw())return;(async()=>{try{const e=new URLSearchParams(window.location.hash.substring(1)),t=e.get("access_token"),n=e.get("refresh_token"),r=e.get("type");if(t&&n){const{error:e}=await ny.auth.setSession({access_token:t,refresh_token:n});if(e)return void(window.location.hash="/login");window.location.hash="signup"===r?"/complete-profile":"recovery"===r?"/":"/home"}else window.location.hash="/login"}catch(e){window.location.hash="/login"}finally{t(!1)}})()},[]),F.useEffect(()=>(gw(),()=>{}),[]),F.useEffect(()=>{const e=()=>{},t=()=>{};return document.addEventListener("visibilitychange",e),window.addEventListener("beforeunload",t),()=>{document.removeEventListener("visibilitychange",e),window.removeEventListener("beforeunload",t)}},[]),e?X.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100vh",backgroundColor:"#1a1a2e"},children:X.jsx(ew,{size:"large"})}):(fetch("http://127.0.0.1:7244/ingest/c4c33fba-1ee4-4b2f-aa1a-ed506c7c702f",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({location:"App.jsx:177",message:"Before rendering providers",data:{isProcessingAuth:e},timestamp:Date.now(),sessionId:"debug-session",runId:"run1",hypothesisId:"B"})}).catch(()=>{}),X.jsx(Ny,{children:X.jsx(tf,{children:X.jsx(Ty,{children:X.jsx(Oy,{children:X.jsx(jy,{children:X.jsxs(Hh,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:[X.jsx(Hw,{}),X.jsx(pw,{}),X.jsx(Xb,{children:X.jsx(F.Suspense,{fallback:X.jsx(qw,{}),children:X.jsxs(Ny,{children:[X.jsx(Ww,{}),X.jsxs(Uh,{children:[X.jsx($h,{path:"/",element:X.jsx(vw,{})}),X.jsx($h,{path:"/onboarding",element:X.jsx(bw,{})}),X.jsx($h,{path:"/get-started",element:X.jsx(ww,{})}),X.jsx($h,{path:"/login",element:X.jsx(_w,{})}),X.jsx($h,{path:"/signup",element:X.jsx(Sw,{})}),X.jsx($h,{path:"/otp-verification",element:X.jsx(kw,{})}),X.jsx($h,{path:"/check-email",element:X.jsx(Ew,{})}),X.jsx($h,{path:"/become-partner",element:X.jsx(Bw,{})}),X.jsx($h,{path:"/complete-profile",element:X.jsx(tw,{children:X.jsx(Tw,{})})}),X.jsx($h,{path:"/home",element:X.jsx(tw,{children:X.jsx(Cw,{})})}),X.jsx($h,{path:"/search",element:X.jsx(tw,{children:X.jsx(xw,{})})}),X.jsx($h,{path:"/booking/seats/:tripId",element:X.jsx(tw,{children:X.jsx(Ow,{})})}),X.jsx($h,{path:"/booking/passenger-details",element:X.jsx(tw,{children:X.jsx(Iw,{})})}),X.jsx($h,{path:"/booking/summary",element:X.jsx(tw,{children:X.jsx(Pw,{})})}),X.jsx($h,{path:"/booking/payment",element:X.jsx(tw,{children:X.jsx(jw,{})})}),X.jsx($h,{path:"/booking/payment-confirmation",element:X.jsx(tw,{children:X.jsx(Rw,{})})}),X.jsx($h,{path:"/booking/confirmation",element:X.jsx(tw,{children:X.jsx(Aw,{})})}),X.jsx($h,{path:"/tickets",element:X.jsx(tw,{children:X.jsx(Nw,{})})}),X.jsx($h,{path:"/tickets/:id",element:X.jsx(tw,{children:X.jsx(Dw,{})})}),X.jsx($h,{path:"/tracking/:routeId",element:X.jsx(tw,{children:X.jsx($w,{})})}),X.jsx($h,{path:"/profile/*",element:X.jsx(tw,{children:X.jsx(Lw,{})})}),X.jsx($h,{path:"/help",element:X.jsx(tw,{children:X.jsx(Uw,{})})}),X.jsx($h,{path:"/notifications",element:X.jsx(tw,{children:X.jsx(Mw,{})})}),X.jsx($h,{path:"/admin/scanner",element:X.jsx(nw,{children:X.jsx(Fw,{})})}),X.jsx($h,{path:"/admin/*",element:X.jsx(nw,{children:X.jsx(zw,{})})}),X.jsx($h,{path:"*",element:X.jsx(Dh,{to:"/",replace:!0})})]})]})})})]})})})})})}))}fetch("http://127.0.0.1:7244/ingest/c4c33fba-1ee4-4b2f-aa1a-ed506c7c702f",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({location:"main.jsx:9",message:"Starting app initialization",data:{},timestamp:Date.now(),sessionId:"debug-session",runId:"run1",hypothesisId:"D"})}).catch(()=>{});try{fetch("http://127.0.0.1:7244/ingest/c4c33fba-1ee4-4b2f-aa1a-ed506c7c702f",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({location:"main.jsx:10",message:"Before runProductionChecks",data:{},timestamp:Date.now(),sessionId:"debug-session",runId:"run1",hypothesisId:"D"})}).catch(()=>{}),(()=>{const e=Ed();e.valid||gd(0,{errors:e.errors}),e.warnings.length>0&&md(0,{warnings:e.warnings})})(),fetch("http://127.0.0.1:7244/ingest/c4c33fba-1ee4-4b2f-aa1a-ed506c7c702f",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({location:"main.jsx:11",message:"After runProductionChecks",data:{},timestamp:Date.now(),sessionId:"debug-session",runId:"run1",hypothesisId:"D"})}).catch(()=>{}),Cd(),fetch("http://127.0.0.1:7244/ingest/c4c33fba-1ee4-4b2f-aa1a-ed506c7c702f",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({location:"main.jsx:14",message:"Before initSentry",data:{},timestamp:Date.now(),sessionId:"debug-session",runId:"run1",hypothesisId:"D"})}).catch(()=>{}),fetch("http://127.0.0.1:7244/ingest/c4c33fba-1ee4-4b2f-aa1a-ed506c7c702f",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({location:"main.jsx:17",message:"Before initAnalytics",data:{},timestamp:Date.now(),sessionId:"debug-session",runId:"run1",hypothesisId:"D"})}).catch(()=>{}),fetch("http://127.0.0.1:7244/ingest/c4c33fba-1ee4-4b2f-aa1a-ed506c7c702f",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({location:"main.jsx:19",message:"After initAnalytics, before ReactDOM.render",data:{},timestamp:Date.now(),sessionId:"debug-session",runId:"run1",hypothesisId:"D"})}).catch(()=>{})}catch(Gw){fetch("http://127.0.0.1:7244/ingest/c4c33fba-1ee4-4b2f-aa1a-ed506c7c702f",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({location:"main.jsx:20",message:"Error during initialization",data:{errorMessage:null==Gw?void 0:Gw.message,errorName:null==Gw?void 0:Gw.name,errorStack:null==(e=null==Gw?void 0:Gw.stack)?void 0:e.substring(0,500)},timestamp:Date.now(),sessionId:"debug-session",runId:"run1",hypothesisId:"D"})}).catch(()=>{})}Z.createRoot(document.getElementById("root")).render(X.jsx(q.StrictMode,{children:X.jsx(Kw,{})}));export{Bv as A,Hv as B,by as C,wd as D,sd as E,r as F,n as G,wy as H,ef as I,Uh as J,$h as K,ew as L,my as M,rb as N,zv as O,fy as P,Kv as Q,q as R,vy as S,_y as U,hd as _,Ey as a,pd as b,gd as c,Kh as d,uy as e,Uv as f,dy as g,Mv as h,vd as i,X as j,_h as k,md as l,Xh as m,xy as n,Py as o,py as p,Jv as q,F as r,ny as s,bd as t,kh as u,Lv as v,Eh as w,gy as x,yy as y,Vv as z};
