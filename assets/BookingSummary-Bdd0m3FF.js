import{j as e,u as s,h as a,m as t,R as n}from"./index-CHY3DGCF.js";import{B as i}from"./Button-BPOJBceX.js";import{s as o}from"./Booking.module-D7FNbwNS.js";const c="_priceBreakdown_izwfs_1",d="_priceRow_izwfs_17",r="_total_izwfs_26",l="_divider_izwfs_33",h=({basePrice:s,seatCount:a,totalPrice:t})=>e.jsxs("div",{className:c,children:[e.jsx("h2",{children:"Price Breakdown"}),e.jsxs("div",{className:d,children:[e.jsx("span",{children:"Base Price (per seat)"}),e.jsxs("span",{children:["P",s.toFixed(2)]})]}),e.jsxs("div",{className:d,children:[e.jsxs("span",{children:["Seats (",a,")"]}),e.jsxs("span",{children:["× ",a]})]}),e.jsxs("div",{className:d,children:[e.jsx("span",{children:"Service Fee"}),e.jsx("span",{children:"P0.00"})]}),e.jsx("div",{className:l}),e.jsxs("div",{className:`${d} ${r}`,children:[e.jsx("span",{children:"Total"}),e.jsxs("span",{children:["P",t.toFixed(2)]})]})]}),m=()=>{const c=s(),d=a(),{selectedRoute:r,selectedSeats:l,passengerDetails:m}=t();n.useEffect(()=>{fetch("http://127.0.0.1:7244/ingest/c4c33fba-1ee4-4b2f-aa1a-ed506c7c702f",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({location:"BookingSummary.jsx:15",message:"Component mounted/updated",data:{currentPath:d.pathname,hasRoute:!!r,seatsCount:null==l?void 0:l.length,passengersCount:null==m?void 0:m.length},timestamp:Date.now(),sessionId:"debug-session",runId:"run1",hypothesisId:"E"})}).catch(()=>{})},[d.pathname,r,l,m]);if(!r||!l||0===l.length)return fetch("http://127.0.0.1:7244/ingest/c4c33fba-1ee4-4b2f-aa1a-ed506c7c702f",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({location:"BookingSummary.jsx:24",message:"Redirecting: missing route/seats",data:{hasRoute:!!r,seatsCount:null==l?void 0:l.length,redirectTo:"/booking/seat-selection"},timestamp:Date.now(),sessionId:"debug-session",runId:"run1",hypothesisId:"C"})}).catch(()=>{}),c("/booking/seat-selection"),null;if(!m||0===m.length||m.length!==l.length)return fetch("http://127.0.0.1:7244/ingest/c4c33fba-1ee4-4b2f-aa1a-ed506c7c702f",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({location:"BookingSummary.jsx:31",message:"Redirecting: missing passenger details",data:{passengersCount:null==m?void 0:m.length,seatsCount:null==l?void 0:l.length,redirectTo:"/booking/passenger-details"},timestamp:Date.now(),sessionId:"debug-session",runId:"run1",hypothesisId:"C"})}).catch(()=>{}),c("/booking/passenger-details"),null;const p=r.price*l.length;return e.jsxs("div",{className:o.bookingScreen,children:[e.jsxs("div",{className:o.bookingHeader,children:[e.jsx("button",{className:o.backButton,onClick:e=>{fetch("http://127.0.0.1:7244/ingest/c4c33fba-1ee4-4b2f-aa1a-ed506c7c702f",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({location:"BookingSummary.jsx:40",message:"Back button clicked",data:{currentPath:d.pathname,eventType:null==e?void 0:e.type,defaultPrevented:null==e?void 0:e.defaultPrevented},timestamp:Date.now(),sessionId:"debug-session",runId:"run1",hypothesisId:"A"})}).catch(()=>{});try{fetch("http://127.0.0.1:7244/ingest/c4c33fba-1ee4-4b2f-aa1a-ed506c7c702f",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({location:"BookingSummary.jsx:44",message:"Before navigate call",data:{targetPath:"/home",currentPath:d.pathname},timestamp:Date.now(),sessionId:"debug-session",runId:"post-fix",hypothesisId:"B"})}).catch(()=>{}),c("/home"),fetch("http://127.0.0.1:7244/ingest/c4c33fba-1ee4-4b2f-aa1a-ed506c7c702f",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({location:"BookingSummary.jsx:47",message:"After navigate call",data:{targetPath:"/home"},timestamp:Date.now(),sessionId:"debug-session",runId:"post-fix",hypothesisId:"B"})}).catch(()=>{})}catch(s){fetch("http://127.0.0.1:7244/ingest/c4c33fba-1ee4-4b2f-aa1a-ed506c7c702f",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({location:"BookingSummary.jsx:50",message:"Error in navigate",data:{errorMessage:null==s?void 0:s.message,errorStack:null==s?void 0:s.stack},timestamp:Date.now(),sessionId:"debug-session",runId:"run1",hypothesisId:"D"})}).catch(()=>{})}},children:"← Back"}),e.jsx("h1",{children:"Booking Summary"})]}),e.jsxs("div",{className:o.bookingContent,children:[e.jsxs("div",{className:o.summarySection,children:[e.jsx("h2",{children:"Trip Details"}),e.jsx("div",{className:o.tripInfo,children:e.jsxs("div",{className:o.routeInfo,children:[e.jsxs("span",{className:o.route,children:[r.origin," → ",r.destination]}),e.jsxs("span",{className:o.time,children:[r.departure_time," - ",r.arrival_time]}),e.jsx("span",{className:o.duration,children:r.duration})]})})]}),e.jsxs("div",{className:o.summarySection,children:[e.jsx("h2",{children:"Selected Seats"}),e.jsx("div",{className:o.seatsList,children:l.map(s=>e.jsx("span",{className:o.seatBadge,children:s},s))})]}),e.jsxs("div",{className:o.summarySection,children:[e.jsx("h2",{children:"Passengers"}),e.jsx("div",{className:o.passengersList,children:m.map((s,a)=>e.jsxs("div",{className:o.passengerItem,children:[e.jsx("span",{className:o.passengerName,children:(null==s?void 0:s.fullName)||"N/A"}),e.jsxs("span",{className:o.passengerSeat,children:["Seat ",(null==s?void 0:s.seatNumber)||l[a]||"N/A"]})]},a))})]}),e.jsx(h,{basePrice:r.price,seatCount:l.length,totalPrice:p}),e.jsx("div",{className:o.bookingFooter,children:e.jsx(i,{onClick:()=>{c("/booking/payment")},children:"Continue to Payment"})})]})]})};export{m as default};
