const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-DzaH6n5y.js","assets/index-FXjg0z6j.css"])))=>i.map(i=>d[i]);
import{u as e,a as s,r as i,j as t,d as r,L as o,e as n,g as a,t as l,_ as c,p as d,c as h}from"./index-DzaH6n5y.js";import{validateEmail as u}from"./validation-DjNTQiWP.js";import{B as x}from"./Button-BO3q_CR1.js";import{s as j}from"./Auth.module-VA9ZlUWa.js";const m=()=>{const m=e(),{login:p,signInWithProvider:g}=s(),[v,k]=i.useState(""),[C,w]=i.useState(""),[L,f]=i.useState(!1),[b,y]=i.useState(!1),[N,B]=i.useState(""),[M,S]=i.useState(!1),[W,A]=i.useState(null),[P,_]=i.useState(!1),[E,F]=i.useState(!1);i.useEffect(()=>{const e=setTimeout(()=>S(!0),100);return()=>clearTimeout(e)},[]),i.useEffect(()=>{const e=localStorage.getItem("gogobus_remembered_email");e&&(k(e),_(!0))},[]);const I=async e=>{try{await g(e)}catch(s){B(`${e} login failed. Please try again.`)}},$=v&&u(v),H=C.length>=6;return t.jsxs("div",{className:j.authScreen,children:[t.jsxs("div",{className:j.authHero,children:[t.jsx("div",{className:j.heroBackground,style:{backgroundImage:"url(https://images.unsplash.com/photo-1544620347-c4fd4a3d5957?w=1200&q=80)"},children:t.jsx("div",{className:j.heroOverlay})}),t.jsxs("div",{className:j.heroContent,children:[t.jsx("button",{className:j.backBtn,onClick:()=>m("/get-started"),"aria-label":"Go back",children:t.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:t.jsx("path",{d:"M15 18L9 12L15 6",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),t.jsxs("div",{className:j.heroLogo,children:[t.jsxs("svg",{viewBox:"0 0 40 40",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[t.jsx("rect",{x:"4",y:"10",width:"32",height:"20",rx:"5",fill:"#F5A623"}),t.jsx("rect",{x:"7",y:"13",width:"8",height:"6",rx:"1.5",fill:"#1B4D4A"}),t.jsx("rect",{x:"17",y:"13",width:"8",height:"6",rx:"1.5",fill:"#1B4D4A"}),t.jsx("circle",{cx:"12",cy:"30",r:"4",fill:"#333"}),t.jsx("circle",{cx:"28",cy:"30",r:"4",fill:"#333"})]}),t.jsx("span",{children:"GOGOBUS"})]}),t.jsxs("div",{className:j.heroText,children:[t.jsx("h1",{children:"Welcome Back!"}),t.jsx("p",{children:"Sign in to continue your journey"})]})]})]}),t.jsxs("div",{className:`${j.authContainer} ${M?j.loaded:""} ${E?j.success:""}`,children:[E&&t.jsxs("div",{className:j.successOverlay,children:[t.jsx("div",{className:j.successIcon,children:t.jsxs("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",children:[t.jsx("circle",{cx:"12",cy:"12",r:"10",fill:"#22C55E"}),t.jsx("path",{d:"M8 12L11 15L16 9",stroke:"white",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"})]})}),t.jsx("span",{children:"Welcome aboard!"})]}),t.jsxs("form",{onSubmit:async e=>{var s;if(e.preventDefault(),B(""),!u(v))return void B("Please enter a valid email address");if(n(v).limited){const e=a(v);return void B(`Too many failed login attempts. Please try again in ${e} minute(s).`)}if(C.length<6)B("Password must be at least 6 characters");else{y(!0);try{await p(v,C),l("email"),P?localStorage.setItem("gogobus_remembered_email",v):localStorage.removeItem("gogobus_remembered_email"),F(!0),setTimeout(async()=>{try{const{authService:e}=await c(async()=>{const{authService:e}=await import("./index-DzaH6n5y.js").then(e=>e.D);return{authService:e}},__vite__mapDeps([0,1])),s=await e.getUser();if(null==s?void 0:s.id){const e=await d.getProfile(s.id);if("admin"===(null==e?void 0:e.role))return void m("/admin",{replace:!0})}}catch(e){h("Error checking admin status",e)}m("/home",{replace:!0})},1200)}catch(i){let e="Login failed. Please check your credentials.";const t=i.status||i.code,r=(null==(s=i.message)?void 0:s.toLowerCase())||"";400===t||r.includes("email not confirmed")||r.includes("not confirmed")?e="Please verify your email address before logging in.":401===t||r.includes("invalid")||r.includes("invalid_credentials")?e="Invalid email or password.":i.message&&(e=i.message),B(e)}finally{y(!1)}}},className:j.authForm,children:[N&&t.jsxs("div",{className:j.errorMessage,children:[t.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",children:[t.jsx("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"2"}),t.jsx("path",{d:"M12 8V12M12 16H12.01",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})]}),N]}),t.jsxs("div",{className:`${j.inputGroup} ${"email"===W?j.focused:""} ${$?j.valid:""}`,children:[t.jsxs("label",{className:j.inputLabel,children:[t.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",children:[t.jsx("rect",{x:"2",y:"4",width:"20",height:"16",rx:"3",stroke:"currentColor",strokeWidth:"2"}),t.jsx("path",{d:"M2 7L12 13L22 7",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})]}),"Email Address"]}),t.jsxs("div",{className:j.inputWrapper,children:[t.jsx("input",{type:"email",value:v,onChange:e=>k(e.target.value),onFocus:()=>A("email"),onBlur:()=>A(null),placeholder:"yourname@example.com",required:!0,className:j.input,autoComplete:"email"}),$&&t.jsx("div",{className:j.validIcon,children:t.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",children:t.jsx("path",{d:"M20 6L9 17L4 12",stroke:"#22C55E",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"})})})]})]}),t.jsxs("div",{className:`${j.inputGroup} ${"password"===W?j.focused:""} ${H?j.valid:""}`,children:[t.jsxs("label",{className:j.inputLabel,children:[t.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",children:[t.jsx("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",stroke:"currentColor",strokeWidth:"2"}),t.jsx("path",{d:"M7 11V7C7 4.23858 9.23858 2 12 2C14.7614 2 17 4.23858 17 7V11",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"}),t.jsx("circle",{cx:"12",cy:"16",r:"1.5",fill:"currentColor"})]}),"Password"]}),t.jsxs("div",{className:j.inputWrapper,children:[t.jsx("input",{type:L?"text":"password",value:C,onChange:e=>w(e.target.value),onFocus:()=>A("password"),onBlur:()=>A(null),placeholder:"Enter your password",required:!0,className:j.input,autoComplete:"current-password"}),t.jsx("button",{type:"button",className:j.togglePassword,onClick:()=>f(!L),"aria-label":L?"Hide password":"Show password",children:L?t.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",children:[t.jsx("path",{d:"M17.94 17.94A10.07 10.07 0 0112 20C7 20 2.73 16.11 1 12C1.69 10.24 2.78 8.69 4.19 7.46M9.88 9.88A3 3 0 0014.12 14.12",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),t.jsx("path",{d:"M1 1L23 23",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"}),t.jsx("path",{d:"M6.34 6.34C8.06 5.13 10.02 4.5 12 4.5C17 4.5 21.27 8.39 23 12.5C22.29 14.31 21.16 15.91 19.73 17.16",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}):t.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",children:[t.jsx("path",{d:"M1 12C2.73 7.61 7 4 12 4C17 4 21.27 7.61 23 12C21.27 16.39 17 20 12 20C7 20 2.73 16.39 1 12Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),t.jsx("circle",{cx:"12",cy:"12",r:"3",stroke:"currentColor",strokeWidth:"2"})]})}),H&&t.jsx("div",{className:j.validIcon,style:{right:"48px"},children:t.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",children:t.jsx("path",{d:"M20 6L9 17L4 12",stroke:"#22C55E",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"})})})]})]}),t.jsxs("div",{className:j.formOptions,children:[t.jsxs("label",{className:j.rememberMe,children:[t.jsx("input",{type:"checkbox",checked:P,onChange:e=>_(e.target.checked)}),t.jsx("span",{className:j.checkmark,children:t.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",children:t.jsx("path",{d:"M20 6L9 17L4 12",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round"})})}),"Remember me"]}),t.jsx(r,{to:"/reset-password",className:j.forgotPassword,children:"Forgot Password?"})]}),t.jsx(x,{type:"submit",disabled:b||E,className:j.submitButton,children:b?t.jsxs("span",{className:j.loadingState,children:[t.jsx(o,{size:"small"}),t.jsx("span",{children:"Signing in..."})]}):t.jsxs("span",{className:j.buttonContent,children:[t.jsx("span",{children:"Sign In"}),t.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",children:t.jsx("path",{d:"M5 12H19M19 12L12 5M19 12L12 19",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})]})})]}),t.jsxs("div",{className:j.divider,children:[t.jsx("div",{className:j.dividerLine}),t.jsx("span",{children:"or continue with"}),t.jsx("div",{className:j.dividerLine})]}),t.jsxs("div",{className:j.socialLoginButtons,children:[t.jsxs("button",{type:"button",className:j.socialBtn,"aria-label":"Login with Google",onClick:()=>I("google"),children:[t.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",children:[t.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),t.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),t.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z",fill:"#FBBC05"}),t.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})]}),t.jsx("span",{children:"Google"})]}),t.jsxs("button",{type:"button",className:j.socialBtn,"aria-label":"Login with Facebook",onClick:()=>I("facebook"),children:[t.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"#1877F2",children:t.jsx("path",{d:"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"})}),t.jsx("span",{children:"Facebook"})]}),t.jsxs("button",{type:"button",className:j.socialBtn,"aria-label":"Login with Apple",onClick:()=>I("apple"),children:[t.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"currentColor",children:t.jsx("path",{d:"M18.71 19.5C17.88 20.74 17 21.95 15.66 21.97C14.32 22 13.89 21.18 12.37 21.18C10.84 21.18 10.37 21.95 9.09997 22C7.78997 22.05 6.79997 20.68 5.95997 19.47C4.24997 17 2.93997 12.45 4.69997 9.39C5.56997 7.87 7.12997 6.91 8.81997 6.88C10.1 6.86 11.32 7.75 12.11 7.75C12.89 7.75 14.37 6.68 15.92 6.84C16.57 6.87 18.39 7.1 19.56 8.82C19.47 8.88 17.39 10.1 17.41 12.63C17.44 15.65 20.06 16.66 20.09 16.67C20.06 16.74 19.67 18.11 18.71 19.5ZM13 3.5C13.73 2.67 14.94 2.04 15.94 2C16.07 3.17 15.6 4.35 14.9 5.19C14.21 6.04 13.07 6.7 11.95 6.61C11.8 5.46 12.36 4.26 13 3.5Z"})}),t.jsx("span",{children:"Apple"})]})]}),t.jsx("div",{className:j.authFooter,children:t.jsxs("p",{children:["Don't have an account? ",t.jsx(r,{to:"/signup",children:"Create Account"})]})}),t.jsxs("div",{className:j.securityBadge,children:[t.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",children:[t.jsx("path",{d:"M12 22C12 22 20 18 20 12V5L12 2L4 5V12C4 18 12 22 12 22Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),t.jsx("path",{d:"M9 12L11 14L15 10",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),t.jsx("span",{children:"Secured with 256-bit encryption"})]})]})]})};export{m as default};
